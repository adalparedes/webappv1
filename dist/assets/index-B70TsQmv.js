const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoadBalance-DF-CULrL.js","assets/ModalContainer-CLNa7ERG.js","assets/stripe-DvR_4HOq.js","assets/OnlineStore-DWQ9-Jbo.js","assets/OtherServices-B8lSGOZm.js","assets/UserProfile-BhZUwApu.js","assets/PersonalizationModal-BwRxt1Hn.js","assets/SettingsModal-DYBcxWUL.js","assets/ContentModal-juAMqHcp.js","assets/MembershipModal-DFygydKZ.js","assets/ToolsModal-CpCZeWAF.js","assets/VipVaultModal-BAIz223g.js","assets/CoreHubModal-C0dKdI5V.js","assets/NotificationsModal-CW2A1oam.js"])))=>i.map(i=>d[i]);
var Kh=Object.defineProperty;var Gh=(e,t,r)=>t in e?Kh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Sl=(e,t,r)=>Gh(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Jh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var oc={exports:{}},xi={},ac={exports:{}},M={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ss=Symbol.for("react.element"),Yh=Symbol.for("react.portal"),Qh=Symbol.for("react.fragment"),Xh=Symbol.for("react.strict_mode"),Zh=Symbol.for("react.profiler"),ef=Symbol.for("react.provider"),tf=Symbol.for("react.context"),rf=Symbol.for("react.forward_ref"),nf=Symbol.for("react.suspense"),sf=Symbol.for("react.memo"),of=Symbol.for("react.lazy"),El=Symbol.iterator;function af(e){return e===null||typeof e!="object"?null:(e=El&&e[El]||e["@@iterator"],typeof e=="function"?e:null)}var lc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uc=Object.assign,cc={};function rn(e,t,r){this.props=e,this.context=t,this.refs=cc,this.updater=r||lc}rn.prototype.isReactComponent={};rn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};rn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dc(){}dc.prototype=rn.prototype;function Ca(e,t,r){this.props=e,this.context=t,this.refs=cc,this.updater=r||lc}var Ta=Ca.prototype=new dc;Ta.constructor=Ca;uc(Ta,rn.prototype);Ta.isPureReactComponent=!0;var jl=Array.isArray,hc=Object.prototype.hasOwnProperty,Aa={current:null},fc={key:!0,ref:!0,__self:!0,__source:!0};function pc(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)hc.call(t,n)&&!fc.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:ss,type:e,key:i,ref:o,props:s,_owner:Aa.current}}function lf(e,t){return{$$typeof:ss,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Oa(e){return typeof e=="object"&&e!==null&&e.$$typeof===ss}function uf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Nl=/\/+/g;function Vi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?uf(""+e.key):t.toString(36)}function Ls(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ss:case Yh:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Vi(o,0):n,jl(s)?(r="",e!=null&&(r=e.replace(Nl,"$&/")+"/"),Ls(s,t,r,"",function(c){return c})):s!=null&&(Oa(s)&&(s=lf(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Nl,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",jl(e))for(var l=0;l<e.length;l++){i=e[l];var u=n+Vi(i,l);o+=Ls(i,t,r,u,s)}else if(u=af(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=n+Vi(i,l++),o+=Ls(i,t,r,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function hs(e,t,r){if(e==null)return e;var n=[],s=0;return Ls(e,n,"","",function(i){return t.call(r,i,s++)}),n}function cf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ne={current:null},Ds={transition:null},df={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:Ds,ReactCurrentOwner:Aa};function mc(){throw Error("act(...) is not supported in production builds of React.")}M.Children={map:hs,forEach:function(e,t,r){hs(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return hs(e,function(){t++}),t},toArray:function(e){return hs(e,function(t){return t})||[]},only:function(e){if(!Oa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};M.Component=rn;M.Fragment=Qh;M.Profiler=Zh;M.PureComponent=Ca;M.StrictMode=Xh;M.Suspense=nf;M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=df;M.act=mc;M.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=uc({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Aa.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)hc.call(t,u)&&!fc.hasOwnProperty(u)&&(n[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:ss,type:e.type,key:s,ref:i,props:n,_owner:o}};M.createContext=function(e){return e={$$typeof:tf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ef,_context:e},e.Consumer=e};M.createElement=pc;M.createFactory=function(e){var t=pc.bind(null,e);return t.type=e,t};M.createRef=function(){return{current:null}};M.forwardRef=function(e){return{$$typeof:rf,render:e}};M.isValidElement=Oa;M.lazy=function(e){return{$$typeof:of,_payload:{_status:-1,_result:e},_init:cf}};M.memo=function(e,t){return{$$typeof:sf,type:e,compare:t===void 0?null:t}};M.startTransition=function(e){var t=Ds.transition;Ds.transition={};try{e()}finally{Ds.transition=t}};M.unstable_act=mc;M.useCallback=function(e,t){return Ne.current.useCallback(e,t)};M.useContext=function(e){return Ne.current.useContext(e)};M.useDebugValue=function(){};M.useDeferredValue=function(e){return Ne.current.useDeferredValue(e)};M.useEffect=function(e,t){return Ne.current.useEffect(e,t)};M.useId=function(){return Ne.current.useId()};M.useImperativeHandle=function(e,t,r){return Ne.current.useImperativeHandle(e,t,r)};M.useInsertionEffect=function(e,t){return Ne.current.useInsertionEffect(e,t)};M.useLayoutEffect=function(e,t){return Ne.current.useLayoutEffect(e,t)};M.useMemo=function(e,t){return Ne.current.useMemo(e,t)};M.useReducer=function(e,t,r){return Ne.current.useReducer(e,t,r)};M.useRef=function(e){return Ne.current.useRef(e)};M.useState=function(e){return Ne.current.useState(e)};M.useSyncExternalStore=function(e,t,r){return Ne.current.useSyncExternalStore(e,t,r)};M.useTransition=function(){return Ne.current.useTransition()};M.version="18.3.1";ac.exports=M;var b=ac.exports;const gc=Jh(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hf=b,ff=Symbol.for("react.element"),pf=Symbol.for("react.fragment"),mf=Object.prototype.hasOwnProperty,gf=hf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vf={key:!0,ref:!0,__self:!0,__source:!0};function vc(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)mf.call(t,n)&&!vf.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:ff,type:e,key:i,ref:o,props:s,_owner:gf.current}}xi.Fragment=pf;xi.jsx=vc;xi.jsxs=vc;oc.exports=xi;var a=oc.exports,Eo={},yc={exports:{}},Ve={},wc={exports:{}},xc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,A){var U=C.length;C.push(A);e:for(;0<U;){var $=U-1>>>1,H=C[$];if(0<s(H,A))C[$]=A,C[U]=H,U=$;else break e}}function r(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var A=C[0],U=C.pop();if(U!==A){C[0]=U;e:for(var $=0,H=C.length,Gt=H>>>1;$<Gt;){var lt=2*($+1)-1,gr=C[lt],xe=lt+1,He=C[xe];if(0>s(gr,U))xe<H&&0>s(He,gr)?(C[$]=He,C[xe]=U,$=xe):(C[$]=gr,C[lt]=U,$=lt);else if(xe<H&&0>s(He,U))C[$]=He,C[xe]=U,$=xe;else break e}}return A}function s(C,A){var U=C.sortIndex-A.sortIndex;return U!==0?U:C.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,p=null,h=3,f=!1,y=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(C){for(var A=r(c);A!==null;){if(A.callback===null)n(c);else if(A.startTime<=C)n(c),A.sortIndex=A.expirationTime,t(u,A);else break;A=r(c)}}function x(C){if(w=!1,g(C),!y)if(r(u)!==null)y=!0,Te(S);else{var A=r(c);A!==null&&z(x,A.startTime-C)}}function S(C,A){y=!1,w&&(w=!1,v(k),k=-1),f=!0;var U=h;try{for(g(A),p=r(u);p!==null&&(!(p.expirationTime>A)||C&&!re());){var $=p.callback;if(typeof $=="function"){p.callback=null,h=p.priorityLevel;var H=$(p.expirationTime<=A);A=e.unstable_now(),typeof H=="function"?p.callback=H:p===r(u)&&n(u),g(A)}else n(u);p=r(u)}if(p!==null)var Gt=!0;else{var lt=r(c);lt!==null&&z(x,lt.startTime-A),Gt=!1}return Gt}finally{p=null,h=U,f=!1}}var E=!1,N=null,k=-1,L=5,R=-1;function re(){return!(e.unstable_now()-R<L)}function pe(){if(N!==null){var C=e.unstable_now();R=C;var A=!0;try{A=N(!0,C)}finally{A?D():(E=!1,N=null)}}else E=!1}var D;if(typeof m=="function")D=function(){m(pe)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,ie=B.port2;B.port1.onmessage=pe,D=function(){ie.postMessage(null)}}else D=function(){_(pe,0)};function Te(C){N=C,E||(E=!0,D())}function z(C,A){k=_(function(){C(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){y||f||(y=!0,Te(S))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(C){switch(h){case 1:case 2:case 3:var A=3;break;default:A=h}var U=h;h=A;try{return C()}finally{h=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,A){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var U=h;h=C;try{return A()}finally{h=U}},e.unstable_scheduleCallback=function(C,A,U){var $=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?$+U:$):U=$,C){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=U+H,C={id:d++,callback:A,priorityLevel:C,startTime:U,expirationTime:H,sortIndex:-1},U>$?(C.sortIndex=U,t(c,C),r(u)===null&&C===r(c)&&(w?(v(k),k=-1):w=!0,z(x,U-$))):(C.sortIndex=H,t(u,C),y||f||(y=!0,Te(S))),C},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(C){var A=h;return function(){var U=h;h=A;try{return C.apply(this,arguments)}finally{h=U}}}})(xc);wc.exports=xc;var yf=wc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wf=b,Fe=yf;function j(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _c=new Set,In={};function pr(e,t){Jr(e,t),Jr(e+"Capture",t)}function Jr(e,t){for(In[e]=t,e=0;e<t.length;e++)_c.add(t[e])}var xt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jo=Object.prototype.hasOwnProperty,xf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cl={},Tl={};function _f(e){return jo.call(Tl,e)?!0:jo.call(Cl,e)?!1:xf.test(e)?Tl[e]=!0:(Cl[e]=!0,!1)}function bf(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function kf(e,t,r,n){if(t===null||typeof t>"u"||bf(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ce(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var we={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){we[e]=new Ce(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];we[t]=new Ce(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){we[e]=new Ce(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){we[e]=new Ce(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){we[e]=new Ce(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){we[e]=new Ce(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){we[e]=new Ce(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){we[e]=new Ce(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){we[e]=new Ce(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ra=/[\-:]([a-z])/g;function Pa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ra,Pa);we[t]=new Ce(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ra,Pa);we[t]=new Ce(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ra,Pa);we[t]=new Ce(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){we[e]=new Ce(e,1,!1,e.toLowerCase(),null,!1,!1)});we.xlinkHref=new Ce("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){we[e]=new Ce(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ia(e,t,r,n){var s=we.hasOwnProperty(t)?we[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(kf(t,r,s,n)&&(r=null),n||s===null?_f(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var St=wf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fs=Symbol.for("react.element"),Tr=Symbol.for("react.portal"),Ar=Symbol.for("react.fragment"),La=Symbol.for("react.strict_mode"),No=Symbol.for("react.profiler"),bc=Symbol.for("react.provider"),kc=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Co=Symbol.for("react.suspense"),To=Symbol.for("react.suspense_list"),Ua=Symbol.for("react.memo"),Nt=Symbol.for("react.lazy"),Sc=Symbol.for("react.offscreen"),Al=Symbol.iterator;function ln(e){return e===null||typeof e!="object"?null:(e=Al&&e[Al]||e["@@iterator"],typeof e=="function"?e:null)}var Z=Object.assign,Wi;function yn(e){if(Wi===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Wi=t&&t[1]||""}return`
`+Wi+e}var qi=!1;function Hi(e,t){if(!e||qi)return"";qi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{qi=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?yn(e):""}function Sf(e){switch(e.tag){case 5:return yn(e.type);case 16:return yn("Lazy");case 13:return yn("Suspense");case 19:return yn("SuspenseList");case 0:case 2:case 15:return e=Hi(e.type,!1),e;case 11:return e=Hi(e.type.render,!1),e;case 1:return e=Hi(e.type,!0),e;default:return""}}function Ao(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ar:return"Fragment";case Tr:return"Portal";case No:return"Profiler";case La:return"StrictMode";case Co:return"Suspense";case To:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case kc:return(e.displayName||"Context")+".Consumer";case bc:return(e._context.displayName||"Context")+".Provider";case Da:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ua:return t=e.displayName||null,t!==null?t:Ao(e.type)||"Memo";case Nt:t=e._payload,e=e._init;try{return Ao(e(t))}catch{}}return null}function Ef(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ao(t);case 8:return t===La?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ec(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jf(e){var t=Ec(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ps(e){e._valueTracker||(e._valueTracker=jf(e))}function jc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Ec(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ks(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Oo(e,t){var r=t.checked;return Z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Ol(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Vt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nc(e,t){t=t.checked,t!=null&&Ia(e,"checked",t,!1)}function Ro(e,t){Nc(e,t);var r=Vt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Po(e,t.type,r):t.hasOwnProperty("defaultValue")&&Po(e,t.type,Vt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Rl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Po(e,t,r){(t!=="number"||Ks(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var wn=Array.isArray;function Fr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Vt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Io(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(j(91));return Z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Pl(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(j(92));if(wn(r)){if(1<r.length)throw Error(j(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Vt(r)}}function Cc(e,t){var r=Vt(t.value),n=Vt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Il(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Tc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Tc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ms,Ac=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ms=ms||document.createElement("div"),ms.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ms.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ln(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var kn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nf=["Webkit","ms","Moz","O"];Object.keys(kn).forEach(function(e){Nf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),kn[t]=kn[e]})});function Oc(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||kn.hasOwnProperty(e)&&kn[e]?(""+t).trim():t+"px"}function Rc(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Oc(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Cf=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Do(e,t){if(t){if(Cf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(j(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(j(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(j(61))}if(t.style!=null&&typeof t.style!="object")throw Error(j(62))}}function Uo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $o=null;function $a(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mo=null,Vr=null,Wr=null;function Ll(e){if(e=as(e)){if(typeof Mo!="function")throw Error(j(280));var t=e.stateNode;t&&(t=Ei(t),Mo(e.stateNode,e.type,t))}}function Pc(e){Vr?Wr?Wr.push(e):Wr=[e]:Vr=e}function Ic(){if(Vr){var e=Vr,t=Wr;if(Wr=Vr=null,Ll(e),t)for(e=0;e<t.length;e++)Ll(t[e])}}function Lc(e,t){return e(t)}function Dc(){}var Ki=!1;function Uc(e,t,r){if(Ki)return e(t,r);Ki=!0;try{return Lc(e,t,r)}finally{Ki=!1,(Vr!==null||Wr!==null)&&(Dc(),Ic())}}function Dn(e,t){var r=e.stateNode;if(r===null)return null;var n=Ei(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(j(231,t,typeof r));return r}var zo=!1;if(xt)try{var un={};Object.defineProperty(un,"passive",{get:function(){zo=!0}}),window.addEventListener("test",un,un),window.removeEventListener("test",un,un)}catch{zo=!1}function Tf(e,t,r,n,s,i,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Sn=!1,Gs=null,Js=!1,Bo=null,Af={onError:function(e){Sn=!0,Gs=e}};function Of(e,t,r,n,s,i,o,l,u){Sn=!1,Gs=null,Tf.apply(Af,arguments)}function Rf(e,t,r,n,s,i,o,l,u){if(Of.apply(this,arguments),Sn){if(Sn){var c=Gs;Sn=!1,Gs=null}else throw Error(j(198));Js||(Js=!0,Bo=c)}}function mr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function $c(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Dl(e){if(mr(e)!==e)throw Error(j(188))}function Pf(e){var t=e.alternate;if(!t){if(t=mr(e),t===null)throw Error(j(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Dl(s),e;if(i===n)return Dl(s),t;i=i.sibling}throw Error(j(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(j(189))}}if(r.alternate!==n)throw Error(j(190))}if(r.tag!==3)throw Error(j(188));return r.stateNode.current===r?e:t}function Mc(e){return e=Pf(e),e!==null?zc(e):null}function zc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=zc(e);if(t!==null)return t;e=e.sibling}return null}var Bc=Fe.unstable_scheduleCallback,Ul=Fe.unstable_cancelCallback,If=Fe.unstable_shouldYield,Lf=Fe.unstable_requestPaint,se=Fe.unstable_now,Df=Fe.unstable_getCurrentPriorityLevel,Ma=Fe.unstable_ImmediatePriority,Fc=Fe.unstable_UserBlockingPriority,Ys=Fe.unstable_NormalPriority,Uf=Fe.unstable_LowPriority,Vc=Fe.unstable_IdlePriority,_i=null,ht=null;function $f(e){if(ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(_i,e,void 0,(e.current.flags&128)===128)}catch{}}var it=Math.clz32?Math.clz32:Bf,Mf=Math.log,zf=Math.LN2;function Bf(e){return e>>>=0,e===0?32:31-(Mf(e)/zf|0)|0}var gs=64,vs=4194304;function xn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Qs(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=xn(l):(i&=o,i!==0&&(n=xn(i)))}else o=r&~s,o!==0?n=xn(o):i!==0&&(n=xn(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-it(t),s=1<<r,n|=e[r],t&=~s;return n}function Ff(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vf(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-it(i),l=1<<o,u=s[o];u===-1?(!(l&r)||l&n)&&(s[o]=Ff(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function Fo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Wc(){var e=gs;return gs<<=1,!(gs&4194240)&&(gs=64),e}function Gi(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function is(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-it(t),e[t]=r}function Wf(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-it(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function za(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-it(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var V=0;function qc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Hc,Ba,Kc,Gc,Jc,Vo=!1,ys=[],Lt=null,Dt=null,Ut=null,Un=new Map,$n=new Map,At=[],qf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $l(e,t){switch(e){case"focusin":case"focusout":Lt=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":Ut=null;break;case"pointerover":case"pointerout":Un.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$n.delete(t.pointerId)}}function cn(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=as(t),t!==null&&Ba(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Hf(e,t,r,n,s){switch(t){case"focusin":return Lt=cn(Lt,e,t,r,n,s),!0;case"dragenter":return Dt=cn(Dt,e,t,r,n,s),!0;case"mouseover":return Ut=cn(Ut,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Un.set(i,cn(Un.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,$n.set(i,cn($n.get(i)||null,e,t,r,n,s)),!0}return!1}function Yc(e){var t=nr(e.target);if(t!==null){var r=mr(t);if(r!==null){if(t=r.tag,t===13){if(t=$c(r),t!==null){e.blockedOn=t,Jc(e.priority,function(){Kc(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Us(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Wo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);$o=n,r.target.dispatchEvent(n),$o=null}else return t=as(r),t!==null&&Ba(t),e.blockedOn=r,!1;t.shift()}return!0}function Ml(e,t,r){Us(e)&&r.delete(t)}function Kf(){Vo=!1,Lt!==null&&Us(Lt)&&(Lt=null),Dt!==null&&Us(Dt)&&(Dt=null),Ut!==null&&Us(Ut)&&(Ut=null),Un.forEach(Ml),$n.forEach(Ml)}function dn(e,t){e.blockedOn===t&&(e.blockedOn=null,Vo||(Vo=!0,Fe.unstable_scheduleCallback(Fe.unstable_NormalPriority,Kf)))}function Mn(e){function t(s){return dn(s,e)}if(0<ys.length){dn(ys[0],e);for(var r=1;r<ys.length;r++){var n=ys[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Lt!==null&&dn(Lt,e),Dt!==null&&dn(Dt,e),Ut!==null&&dn(Ut,e),Un.forEach(t),$n.forEach(t),r=0;r<At.length;r++)n=At[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<At.length&&(r=At[0],r.blockedOn===null);)Yc(r),r.blockedOn===null&&At.shift()}var qr=St.ReactCurrentBatchConfig,Xs=!0;function Gf(e,t,r,n){var s=V,i=qr.transition;qr.transition=null;try{V=1,Fa(e,t,r,n)}finally{V=s,qr.transition=i}}function Jf(e,t,r,n){var s=V,i=qr.transition;qr.transition=null;try{V=4,Fa(e,t,r,n)}finally{V=s,qr.transition=i}}function Fa(e,t,r,n){if(Xs){var s=Wo(e,t,r,n);if(s===null)so(e,t,n,Zs,r),$l(e,n);else if(Hf(s,e,t,r,n))n.stopPropagation();else if($l(e,n),t&4&&-1<qf.indexOf(e)){for(;s!==null;){var i=as(s);if(i!==null&&Hc(i),i=Wo(e,t,r,n),i===null&&so(e,t,n,Zs,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else so(e,t,n,null,r)}}var Zs=null;function Wo(e,t,r,n){if(Zs=null,e=$a(n),e=nr(e),e!==null)if(t=mr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=$c(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zs=e,null}function Qc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Df()){case Ma:return 1;case Fc:return 4;case Ys:case Uf:return 16;case Vc:return 536870912;default:return 16}default:return 16}}var Pt=null,Va=null,$s=null;function Xc(){if($s)return $s;var e,t=Va,r=t.length,n,s="value"in Pt?Pt.value:Pt.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return $s=s.slice(e,1<n?1-n:void 0)}function Ms(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ws(){return!0}function zl(){return!1}function We(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ws:zl,this.isPropagationStopped=zl,this}return Z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){},isPersistent:ws}),t}var nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wa=We(nn),os=Z({},nn,{view:0,detail:0}),Yf=We(os),Ji,Yi,hn,bi=Z({},os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&e.type==="mousemove"?(Ji=e.screenX-hn.screenX,Yi=e.screenY-hn.screenY):Yi=Ji=0,hn=e),Ji)},movementY:function(e){return"movementY"in e?e.movementY:Yi}}),Bl=We(bi),Qf=Z({},bi,{dataTransfer:0}),Xf=We(Qf),Zf=Z({},os,{relatedTarget:0}),Qi=We(Zf),ep=Z({},nn,{animationName:0,elapsedTime:0,pseudoElement:0}),tp=We(ep),rp=Z({},nn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),np=We(rp),sp=Z({},nn,{data:0}),Fl=We(sp),ip={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},op={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ap={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ap[e])?!!t[e]:!1}function qa(){return lp}var up=Z({},os,{key:function(e){if(e.key){var t=ip[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ms(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?op[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qa,charCode:function(e){return e.type==="keypress"?Ms(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ms(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cp=We(up),dp=Z({},bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vl=We(dp),hp=Z({},os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qa}),fp=We(hp),pp=Z({},nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),mp=We(pp),gp=Z({},bi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vp=We(gp),yp=[9,13,27,32],Ha=xt&&"CompositionEvent"in window,En=null;xt&&"documentMode"in document&&(En=document.documentMode);var wp=xt&&"TextEvent"in window&&!En,Zc=xt&&(!Ha||En&&8<En&&11>=En),Wl=" ",ql=!1;function ed(e,t){switch(e){case"keyup":return yp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function td(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Or=!1;function xp(e,t){switch(e){case"compositionend":return td(t);case"keypress":return t.which!==32?null:(ql=!0,Wl);case"textInput":return e=t.data,e===Wl&&ql?null:e;default:return null}}function _p(e,t){if(Or)return e==="compositionend"||!Ha&&ed(e,t)?(e=Xc(),$s=Va=Pt=null,Or=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zc&&t.locale!=="ko"?null:t.data;default:return null}}var bp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bp[e.type]:t==="textarea"}function rd(e,t,r,n){Pc(n),t=ei(t,"onChange"),0<t.length&&(r=new Wa("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var jn=null,zn=null;function kp(e){fd(e,0)}function ki(e){var t=Ir(e);if(jc(t))return e}function Sp(e,t){if(e==="change")return t}var nd=!1;if(xt){var Xi;if(xt){var Zi="oninput"in document;if(!Zi){var Kl=document.createElement("div");Kl.setAttribute("oninput","return;"),Zi=typeof Kl.oninput=="function"}Xi=Zi}else Xi=!1;nd=Xi&&(!document.documentMode||9<document.documentMode)}function Gl(){jn&&(jn.detachEvent("onpropertychange",sd),zn=jn=null)}function sd(e){if(e.propertyName==="value"&&ki(zn)){var t=[];rd(t,zn,e,$a(e)),Uc(kp,t)}}function Ep(e,t,r){e==="focusin"?(Gl(),jn=t,zn=r,jn.attachEvent("onpropertychange",sd)):e==="focusout"&&Gl()}function jp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ki(zn)}function Np(e,t){if(e==="click")return ki(t)}function Cp(e,t){if(e==="input"||e==="change")return ki(t)}function Tp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var at=typeof Object.is=="function"?Object.is:Tp;function Bn(e,t){if(at(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!jo.call(t,s)||!at(e[s],t[s]))return!1}return!0}function Jl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yl(e,t){var r=Jl(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jl(r)}}function id(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?id(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function od(){for(var e=window,t=Ks();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ks(e.document)}return t}function Ka(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ap(e){var t=od(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&id(r.ownerDocument.documentElement,r)){if(n!==null&&Ka(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Yl(r,i);var o=Yl(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Op=xt&&"documentMode"in document&&11>=document.documentMode,Rr=null,qo=null,Nn=null,Ho=!1;function Ql(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ho||Rr==null||Rr!==Ks(n)||(n=Rr,"selectionStart"in n&&Ka(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Nn&&Bn(Nn,n)||(Nn=n,n=ei(qo,"onSelect"),0<n.length&&(t=new Wa("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Rr)))}function xs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Pr={animationend:xs("Animation","AnimationEnd"),animationiteration:xs("Animation","AnimationIteration"),animationstart:xs("Animation","AnimationStart"),transitionend:xs("Transition","TransitionEnd")},eo={},ad={};xt&&(ad=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function Si(e){if(eo[e])return eo[e];if(!Pr[e])return e;var t=Pr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ad)return eo[e]=t[r];return e}var ld=Si("animationend"),ud=Si("animationiteration"),cd=Si("animationstart"),dd=Si("transitionend"),hd=new Map,Xl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qt(e,t){hd.set(e,t),pr(t,[e])}for(var to=0;to<Xl.length;to++){var ro=Xl[to],Rp=ro.toLowerCase(),Pp=ro[0].toUpperCase()+ro.slice(1);qt(Rp,"on"+Pp)}qt(ld,"onAnimationEnd");qt(ud,"onAnimationIteration");qt(cd,"onAnimationStart");qt("dblclick","onDoubleClick");qt("focusin","onFocus");qt("focusout","onBlur");qt(dd,"onTransitionEnd");Jr("onMouseEnter",["mouseout","mouseover"]);Jr("onMouseLeave",["mouseout","mouseover"]);Jr("onPointerEnter",["pointerout","pointerover"]);Jr("onPointerLeave",["pointerout","pointerover"]);pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _n="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ip=new Set("cancel close invalid load scroll toggle".split(" ").concat(_n));function Zl(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Rf(n,t,void 0,e),e.currentTarget=null}function fd(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Zl(s,l,c),i=u}else for(o=0;o<n.length;o++){if(l=n[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Zl(s,l,c),i=u}}}if(Js)throw e=Bo,Js=!1,Bo=null,e}function K(e,t){var r=t[Qo];r===void 0&&(r=t[Qo]=new Set);var n=e+"__bubble";r.has(n)||(pd(t,e,2,!1),r.add(n))}function no(e,t,r){var n=0;t&&(n|=4),pd(r,e,n,t)}var _s="_reactListening"+Math.random().toString(36).slice(2);function Fn(e){if(!e[_s]){e[_s]=!0,_c.forEach(function(r){r!=="selectionchange"&&(Ip.has(r)||no(r,!1,e),no(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_s]||(t[_s]=!0,no("selectionchange",!1,t))}}function pd(e,t,r,n){switch(Qc(t)){case 1:var s=Gf;break;case 4:s=Jf;break;default:s=Fa}r=s.bind(null,t,r,e),s=void 0,!zo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function so(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=nr(l),o===null)return;if(u=o.tag,u===5||u===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Uc(function(){var c=i,d=$a(r),p=[];e:{var h=hd.get(e);if(h!==void 0){var f=Wa,y=e;switch(e){case"keypress":if(Ms(r)===0)break e;case"keydown":case"keyup":f=cp;break;case"focusin":y="focus",f=Qi;break;case"focusout":y="blur",f=Qi;break;case"beforeblur":case"afterblur":f=Qi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Bl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Xf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=fp;break;case ld:case ud:case cd:f=tp;break;case dd:f=mp;break;case"scroll":f=Yf;break;case"wheel":f=vp;break;case"copy":case"cut":case"paste":f=np;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Vl}var w=(t&4)!==0,_=!w&&e==="scroll",v=w?h!==null?h+"Capture":null:h;w=[];for(var m=c,g;m!==null;){g=m;var x=g.stateNode;if(g.tag===5&&x!==null&&(g=x,v!==null&&(x=Dn(m,v),x!=null&&w.push(Vn(m,x,g)))),_)break;m=m.return}0<w.length&&(h=new f(h,y,null,r,d),p.push({event:h,listeners:w}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",h&&r!==$o&&(y=r.relatedTarget||r.fromElement)&&(nr(y)||y[_t]))break e;if((f||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,f?(y=r.relatedTarget||r.toElement,f=c,y=y?nr(y):null,y!==null&&(_=mr(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(f=null,y=c),f!==y)){if(w=Bl,x="onMouseLeave",v="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(w=Vl,x="onPointerLeave",v="onPointerEnter",m="pointer"),_=f==null?h:Ir(f),g=y==null?h:Ir(y),h=new w(x,m+"leave",f,r,d),h.target=_,h.relatedTarget=g,x=null,nr(d)===c&&(w=new w(v,m+"enter",y,r,d),w.target=g,w.relatedTarget=_,x=w),_=x,f&&y)t:{for(w=f,v=y,m=0,g=w;g;g=yr(g))m++;for(g=0,x=v;x;x=yr(x))g++;for(;0<m-g;)w=yr(w),m--;for(;0<g-m;)v=yr(v),g--;for(;m--;){if(w===v||v!==null&&w===v.alternate)break t;w=yr(w),v=yr(v)}w=null}else w=null;f!==null&&eu(p,h,f,w,!1),y!==null&&_!==null&&eu(p,_,y,w,!0)}}e:{if(h=c?Ir(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var S=Sp;else if(Hl(h))if(nd)S=Cp;else{S=jp;var E=Ep}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=Np);if(S&&(S=S(e,c))){rd(p,S,r,d);break e}E&&E(e,h,c),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Po(h,"number",h.value)}switch(E=c?Ir(c):window,e){case"focusin":(Hl(E)||E.contentEditable==="true")&&(Rr=E,qo=c,Nn=null);break;case"focusout":Nn=qo=Rr=null;break;case"mousedown":Ho=!0;break;case"contextmenu":case"mouseup":case"dragend":Ho=!1,Ql(p,r,d);break;case"selectionchange":if(Op)break;case"keydown":case"keyup":Ql(p,r,d)}var N;if(Ha)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Or?ed(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(Zc&&r.locale!=="ko"&&(Or||k!=="onCompositionStart"?k==="onCompositionEnd"&&Or&&(N=Xc()):(Pt=d,Va="value"in Pt?Pt.value:Pt.textContent,Or=!0)),E=ei(c,k),0<E.length&&(k=new Fl(k,e,null,r,d),p.push({event:k,listeners:E}),N?k.data=N:(N=td(r),N!==null&&(k.data=N)))),(N=wp?xp(e,r):_p(e,r))&&(c=ei(c,"onBeforeInput"),0<c.length&&(d=new Fl("onBeforeInput","beforeinput",null,r,d),p.push({event:d,listeners:c}),d.data=N))}fd(p,t)})}function Vn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ei(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Dn(e,r),i!=null&&n.unshift(Vn(e,i,s)),i=Dn(e,t),i!=null&&n.push(Vn(e,i,s))),e=e.return}return n}function yr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function eu(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===n)break;l.tag===5&&c!==null&&(l=c,s?(u=Dn(r,i),u!=null&&o.unshift(Vn(r,u,l))):s||(u=Dn(r,i),u!=null&&o.push(Vn(r,u,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Lp=/\r\n?/g,Dp=/\u0000|\uFFFD/g;function tu(e){return(typeof e=="string"?e:""+e).replace(Lp,`
`).replace(Dp,"")}function bs(e,t,r){if(t=tu(t),tu(e)!==t&&r)throw Error(j(425))}function ti(){}var Ko=null,Go=null;function Jo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yo=typeof setTimeout=="function"?setTimeout:void 0,Up=typeof clearTimeout=="function"?clearTimeout:void 0,ru=typeof Promise=="function"?Promise:void 0,$p=typeof queueMicrotask=="function"?queueMicrotask:typeof ru<"u"?function(e){return ru.resolve(null).then(e).catch(Mp)}:Yo;function Mp(e){setTimeout(function(){throw e})}function io(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Mn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Mn(t)}function $t(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function nu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var sn=Math.random().toString(36).slice(2),dt="__reactFiber$"+sn,Wn="__reactProps$"+sn,_t="__reactContainer$"+sn,Qo="__reactEvents$"+sn,zp="__reactListeners$"+sn,Bp="__reactHandles$"+sn;function nr(e){var t=e[dt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[_t]||r[dt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=nu(e);e!==null;){if(r=e[dt])return r;e=nu(e)}return t}e=r,r=e.parentNode}return null}function as(e){return e=e[dt]||e[_t],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ir(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(j(33))}function Ei(e){return e[Wn]||null}var Xo=[],Lr=-1;function Ht(e){return{current:e}}function G(e){0>Lr||(e.current=Xo[Lr],Xo[Lr]=null,Lr--)}function q(e,t){Lr++,Xo[Lr]=e.current,e.current=t}var Wt={},Se=Ht(Wt),Pe=Ht(!1),ur=Wt;function Yr(e,t){var r=e.type.contextTypes;if(!r)return Wt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ie(e){return e=e.childContextTypes,e!=null}function ri(){G(Pe),G(Se)}function su(e,t,r){if(Se.current!==Wt)throw Error(j(168));q(Se,t),q(Pe,r)}function md(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(j(108,Ef(e)||"Unknown",s));return Z({},r,n)}function ni(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wt,ur=Se.current,q(Se,e),q(Pe,Pe.current),!0}function iu(e,t,r){var n=e.stateNode;if(!n)throw Error(j(169));r?(e=md(e,t,ur),n.__reactInternalMemoizedMergedChildContext=e,G(Pe),G(Se),q(Se,e)):G(Pe),q(Pe,r)}var gt=null,ji=!1,oo=!1;function gd(e){gt===null?gt=[e]:gt.push(e)}function Fp(e){ji=!0,gd(e)}function Kt(){if(!oo&&gt!==null){oo=!0;var e=0,t=V;try{var r=gt;for(V=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}gt=null,ji=!1}catch(s){throw gt!==null&&(gt=gt.slice(e+1)),Bc(Ma,Kt),s}finally{V=t,oo=!1}}return null}var Dr=[],Ur=0,si=null,ii=0,Ke=[],Ge=0,cr=null,vt=1,yt="";function Xt(e,t){Dr[Ur++]=ii,Dr[Ur++]=si,si=e,ii=t}function vd(e,t,r){Ke[Ge++]=vt,Ke[Ge++]=yt,Ke[Ge++]=cr,cr=e;var n=vt;e=yt;var s=32-it(n)-1;n&=~(1<<s),r+=1;var i=32-it(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,vt=1<<32-it(t)+s|r<<s|n,yt=i+e}else vt=1<<i|r<<s|n,yt=e}function Ga(e){e.return!==null&&(Xt(e,1),vd(e,1,0))}function Ja(e){for(;e===si;)si=Dr[--Ur],Dr[Ur]=null,ii=Dr[--Ur],Dr[Ur]=null;for(;e===cr;)cr=Ke[--Ge],Ke[Ge]=null,yt=Ke[--Ge],Ke[Ge]=null,vt=Ke[--Ge],Ke[Ge]=null}var Be=null,ze=null,Y=!1,st=null;function yd(e,t){var r=Je(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function ou(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Be=e,ze=$t(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Be=e,ze=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=cr!==null?{id:vt,overflow:yt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Je(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Be=e,ze=null,!0):!1;default:return!1}}function Zo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ea(e){if(Y){var t=ze;if(t){var r=t;if(!ou(e,t)){if(Zo(e))throw Error(j(418));t=$t(r.nextSibling);var n=Be;t&&ou(e,t)?yd(n,r):(e.flags=e.flags&-4097|2,Y=!1,Be=e)}}else{if(Zo(e))throw Error(j(418));e.flags=e.flags&-4097|2,Y=!1,Be=e}}}function au(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Be=e}function ks(e){if(e!==Be)return!1;if(!Y)return au(e),Y=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Jo(e.type,e.memoizedProps)),t&&(t=ze)){if(Zo(e))throw wd(),Error(j(418));for(;t;)yd(e,t),t=$t(t.nextSibling)}if(au(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(j(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ze=$t(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ze=null}}else ze=Be?$t(e.stateNode.nextSibling):null;return!0}function wd(){for(var e=ze;e;)e=$t(e.nextSibling)}function Qr(){ze=Be=null,Y=!1}function Ya(e){st===null?st=[e]:st.push(e)}var Vp=St.ReactCurrentBatchConfig;function fn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(j(309));var n=r.stateNode}if(!n)throw Error(j(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(j(284));if(!r._owner)throw Error(j(290,e))}return e}function Ss(e,t){throw e=Object.prototype.toString.call(t),Error(j(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function lu(e){var t=e._init;return t(e._payload)}function xd(e){function t(v,m){if(e){var g=v.deletions;g===null?(v.deletions=[m],v.flags|=16):g.push(m)}}function r(v,m){if(!e)return null;for(;m!==null;)t(v,m),m=m.sibling;return null}function n(v,m){for(v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function s(v,m){return v=Ft(v,m),v.index=0,v.sibling=null,v}function i(v,m,g){return v.index=g,e?(g=v.alternate,g!==null?(g=g.index,g<m?(v.flags|=2,m):g):(v.flags|=2,m)):(v.flags|=1048576,m)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,m,g,x){return m===null||m.tag!==6?(m=po(g,v.mode,x),m.return=v,m):(m=s(m,g),m.return=v,m)}function u(v,m,g,x){var S=g.type;return S===Ar?d(v,m,g.props.children,x,g.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Nt&&lu(S)===m.type)?(x=s(m,g.props),x.ref=fn(v,m,g),x.return=v,x):(x=Hs(g.type,g.key,g.props,null,v.mode,x),x.ref=fn(v,m,g),x.return=v,x)}function c(v,m,g,x){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=mo(g,v.mode,x),m.return=v,m):(m=s(m,g.children||[]),m.return=v,m)}function d(v,m,g,x,S){return m===null||m.tag!==7?(m=lr(g,v.mode,x,S),m.return=v,m):(m=s(m,g),m.return=v,m)}function p(v,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=po(""+m,v.mode,g),m.return=v,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case fs:return g=Hs(m.type,m.key,m.props,null,v.mode,g),g.ref=fn(v,null,m),g.return=v,g;case Tr:return m=mo(m,v.mode,g),m.return=v,m;case Nt:var x=m._init;return p(v,x(m._payload),g)}if(wn(m)||ln(m))return m=lr(m,v.mode,g,null),m.return=v,m;Ss(v,m)}return null}function h(v,m,g,x){var S=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return S!==null?null:l(v,m,""+g,x);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case fs:return g.key===S?u(v,m,g,x):null;case Tr:return g.key===S?c(v,m,g,x):null;case Nt:return S=g._init,h(v,m,S(g._payload),x)}if(wn(g)||ln(g))return S!==null?null:d(v,m,g,x,null);Ss(v,g)}return null}function f(v,m,g,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return v=v.get(g)||null,l(m,v,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case fs:return v=v.get(x.key===null?g:x.key)||null,u(m,v,x,S);case Tr:return v=v.get(x.key===null?g:x.key)||null,c(m,v,x,S);case Nt:var E=x._init;return f(v,m,g,E(x._payload),S)}if(wn(x)||ln(x))return v=v.get(g)||null,d(m,v,x,S,null);Ss(m,x)}return null}function y(v,m,g,x){for(var S=null,E=null,N=m,k=m=0,L=null;N!==null&&k<g.length;k++){N.index>k?(L=N,N=null):L=N.sibling;var R=h(v,N,g[k],x);if(R===null){N===null&&(N=L);break}e&&N&&R.alternate===null&&t(v,N),m=i(R,m,k),E===null?S=R:E.sibling=R,E=R,N=L}if(k===g.length)return r(v,N),Y&&Xt(v,k),S;if(N===null){for(;k<g.length;k++)N=p(v,g[k],x),N!==null&&(m=i(N,m,k),E===null?S=N:E.sibling=N,E=N);return Y&&Xt(v,k),S}for(N=n(v,N);k<g.length;k++)L=f(N,v,k,g[k],x),L!==null&&(e&&L.alternate!==null&&N.delete(L.key===null?k:L.key),m=i(L,m,k),E===null?S=L:E.sibling=L,E=L);return e&&N.forEach(function(re){return t(v,re)}),Y&&Xt(v,k),S}function w(v,m,g,x){var S=ln(g);if(typeof S!="function")throw Error(j(150));if(g=S.call(g),g==null)throw Error(j(151));for(var E=S=null,N=m,k=m=0,L=null,R=g.next();N!==null&&!R.done;k++,R=g.next()){N.index>k?(L=N,N=null):L=N.sibling;var re=h(v,N,R.value,x);if(re===null){N===null&&(N=L);break}e&&N&&re.alternate===null&&t(v,N),m=i(re,m,k),E===null?S=re:E.sibling=re,E=re,N=L}if(R.done)return r(v,N),Y&&Xt(v,k),S;if(N===null){for(;!R.done;k++,R=g.next())R=p(v,R.value,x),R!==null&&(m=i(R,m,k),E===null?S=R:E.sibling=R,E=R);return Y&&Xt(v,k),S}for(N=n(v,N);!R.done;k++,R=g.next())R=f(N,v,k,R.value,x),R!==null&&(e&&R.alternate!==null&&N.delete(R.key===null?k:R.key),m=i(R,m,k),E===null?S=R:E.sibling=R,E=R);return e&&N.forEach(function(pe){return t(v,pe)}),Y&&Xt(v,k),S}function _(v,m,g,x){if(typeof g=="object"&&g!==null&&g.type===Ar&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case fs:e:{for(var S=g.key,E=m;E!==null;){if(E.key===S){if(S=g.type,S===Ar){if(E.tag===7){r(v,E.sibling),m=s(E,g.props.children),m.return=v,v=m;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Nt&&lu(S)===E.type){r(v,E.sibling),m=s(E,g.props),m.ref=fn(v,E,g),m.return=v,v=m;break e}r(v,E);break}else t(v,E);E=E.sibling}g.type===Ar?(m=lr(g.props.children,v.mode,x,g.key),m.return=v,v=m):(x=Hs(g.type,g.key,g.props,null,v.mode,x),x.ref=fn(v,m,g),x.return=v,v=x)}return o(v);case Tr:e:{for(E=g.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){r(v,m.sibling),m=s(m,g.children||[]),m.return=v,v=m;break e}else{r(v,m);break}else t(v,m);m=m.sibling}m=mo(g,v.mode,x),m.return=v,v=m}return o(v);case Nt:return E=g._init,_(v,m,E(g._payload),x)}if(wn(g))return y(v,m,g,x);if(ln(g))return w(v,m,g,x);Ss(v,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(r(v,m.sibling),m=s(m,g),m.return=v,v=m):(r(v,m),m=po(g,v.mode,x),m.return=v,v=m),o(v)):r(v,m)}return _}var Xr=xd(!0),_d=xd(!1),oi=Ht(null),ai=null,$r=null,Qa=null;function Xa(){Qa=$r=ai=null}function Za(e){var t=oi.current;G(oi),e._currentValue=t}function ta(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Hr(e,t){ai=e,Qa=$r=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Re=!0),e.firstContext=null)}function Qe(e){var t=e._currentValue;if(Qa!==e)if(e={context:e,memoizedValue:t,next:null},$r===null){if(ai===null)throw Error(j(308));$r=e,ai.dependencies={lanes:0,firstContext:e}}else $r=$r.next=e;return t}var sr=null;function el(e){sr===null?sr=[e]:sr.push(e)}function bd(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,el(t)):(r.next=s.next,s.next=r),t.interleaved=r,bt(e,n)}function bt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ct=!1;function tl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,F&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,bt(e,r)}return s=n.interleaved,s===null?(t.next=t,el(n)):(t.next=s.next,s.next=t),n.interleaved=t,bt(e,r)}function zs(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,za(e,r)}}function uu(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function li(e,t,r,n){var s=e.updateQueue;Ct=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,d=c=u=null,l=i;do{var h=l.lane,f=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,w=l;switch(h=t,f=r,w.tag){case 1:if(y=w.payload,typeof y=="function"){p=y.call(f,p,h);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,h=typeof y=="function"?y.call(f,p,h):y,h==null)break e;p=Z({},p,h);break e;case 2:Ct=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else f={eventTime:f,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=f,u=p):d=d.next=f,o|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(u=p),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);hr|=o,e.lanes=o,e.memoizedState=p}}function cu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(j(191,s));s.call(n)}}}var ls={},ft=Ht(ls),qn=Ht(ls),Hn=Ht(ls);function ir(e){if(e===ls)throw Error(j(174));return e}function rl(e,t){switch(q(Hn,t),q(qn,e),q(ft,ls),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Lo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Lo(t,e)}G(ft),q(ft,t)}function Zr(){G(ft),G(qn),G(Hn)}function Sd(e){ir(Hn.current);var t=ir(ft.current),r=Lo(t,e.type);t!==r&&(q(qn,e),q(ft,r))}function nl(e){qn.current===e&&(G(ft),G(qn))}var Q=Ht(0);function ui(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function sl(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var Bs=St.ReactCurrentDispatcher,lo=St.ReactCurrentBatchConfig,dr=0,X=null,ue=null,he=null,ci=!1,Cn=!1,Kn=0,Wp=0;function _e(){throw Error(j(321))}function il(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!at(e[r],t[r]))return!1;return!0}function ol(e,t,r,n,s,i){if(dr=i,X=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Bs.current=e===null||e.memoizedState===null?Gp:Jp,e=r(n,s),Cn){i=0;do{if(Cn=!1,Kn=0,25<=i)throw Error(j(301));i+=1,he=ue=null,t.updateQueue=null,Bs.current=Yp,e=r(n,s)}while(Cn)}if(Bs.current=di,t=ue!==null&&ue.next!==null,dr=0,he=ue=X=null,ci=!1,t)throw Error(j(300));return e}function al(){var e=Kn!==0;return Kn=0,e}function ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?X.memoizedState=he=e:he=he.next=e,he}function Xe(){if(ue===null){var e=X.alternate;e=e!==null?e.memoizedState:null}else e=ue.next;var t=he===null?X.memoizedState:he.next;if(t!==null)he=t,ue=e;else{if(e===null)throw Error(j(310));ue=e,e={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},he===null?X.memoizedState=he=e:he=he.next=e}return he}function Gn(e,t){return typeof t=="function"?t(e):t}function uo(e){var t=Xe(),r=t.queue;if(r===null)throw Error(j(311));r.lastRenderedReducer=e;var n=ue,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,u=null,c=i;do{var d=c.lane;if((dr&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=p,o=n):u=u.next=p,X.lanes|=d,hr|=d}c=c.next}while(c!==null&&c!==i);u===null?o=n:u.next=l,at(n,t.memoizedState)||(Re=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=u,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,X.lanes|=i,hr|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function co(e){var t=Xe(),r=t.queue;if(r===null)throw Error(j(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);at(i,t.memoizedState)||(Re=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Ed(){}function jd(e,t){var r=X,n=Xe(),s=t(),i=!at(n.memoizedState,s);if(i&&(n.memoizedState=s,Re=!0),n=n.queue,ll(Td.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||he!==null&&he.memoizedState.tag&1){if(r.flags|=2048,Jn(9,Cd.bind(null,r,n,s,t),void 0,null),fe===null)throw Error(j(349));dr&30||Nd(r,t,s)}return s}function Nd(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=X.updateQueue,t===null?(t={lastEffect:null,stores:null},X.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Cd(e,t,r,n){t.value=r,t.getSnapshot=n,Ad(t)&&Od(e)}function Td(e,t,r){return r(function(){Ad(t)&&Od(e)})}function Ad(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!at(e,r)}catch{return!0}}function Od(e){var t=bt(e,1);t!==null&&ot(t,e,1,-1)}function du(e){var t=ct();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:e},t.queue=e,e=e.dispatch=Kp.bind(null,X,e),[t.memoizedState,e]}function Jn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=X.updateQueue,t===null?(t={lastEffect:null,stores:null},X.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Rd(){return Xe().memoizedState}function Fs(e,t,r,n){var s=ct();X.flags|=e,s.memoizedState=Jn(1|t,r,void 0,n===void 0?null:n)}function Ni(e,t,r,n){var s=Xe();n=n===void 0?null:n;var i=void 0;if(ue!==null){var o=ue.memoizedState;if(i=o.destroy,n!==null&&il(n,o.deps)){s.memoizedState=Jn(t,r,i,n);return}}X.flags|=e,s.memoizedState=Jn(1|t,r,i,n)}function hu(e,t){return Fs(8390656,8,e,t)}function ll(e,t){return Ni(2048,8,e,t)}function Pd(e,t){return Ni(4,2,e,t)}function Id(e,t){return Ni(4,4,e,t)}function Ld(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dd(e,t,r){return r=r!=null?r.concat([e]):null,Ni(4,4,Ld.bind(null,t,e),r)}function ul(){}function Ud(e,t){var r=Xe();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&il(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function $d(e,t){var r=Xe();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&il(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Md(e,t,r){return dr&21?(at(r,t)||(r=Wc(),X.lanes|=r,hr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Re=!0),e.memoizedState=r)}function qp(e,t){var r=V;V=r!==0&&4>r?r:4,e(!0);var n=lo.transition;lo.transition={};try{e(!1),t()}finally{V=r,lo.transition=n}}function zd(){return Xe().memoizedState}function Hp(e,t,r){var n=Bt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Bd(e))Fd(t,r);else if(r=bd(e,t,r,n),r!==null){var s=je();ot(r,e,n,s),Vd(r,t,n)}}function Kp(e,t,r){var n=Bt(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Bd(e))Fd(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,at(l,o)){var u=t.interleaved;u===null?(s.next=s,el(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}r=bd(e,t,s,n),r!==null&&(s=je(),ot(r,e,n,s),Vd(r,t,n))}}function Bd(e){var t=e.alternate;return e===X||t!==null&&t===X}function Fd(e,t){Cn=ci=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Vd(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,za(e,r)}}var di={readContext:Qe,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},Gp={readContext:Qe,useCallback:function(e,t){return ct().memoizedState=[e,t===void 0?null:t],e},useContext:Qe,useEffect:hu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Fs(4194308,4,Ld.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Fs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fs(4,2,e,t)},useMemo:function(e,t){var r=ct();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ct();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Hp.bind(null,X,e),[n.memoizedState,e]},useRef:function(e){var t=ct();return e={current:e},t.memoizedState=e},useState:du,useDebugValue:ul,useDeferredValue:function(e){return ct().memoizedState=e},useTransition:function(){var e=du(!1),t=e[0];return e=qp.bind(null,e[1]),ct().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=X,s=ct();if(Y){if(r===void 0)throw Error(j(407));r=r()}else{if(r=t(),fe===null)throw Error(j(349));dr&30||Nd(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,hu(Td.bind(null,n,i,e),[e]),n.flags|=2048,Jn(9,Cd.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=ct(),t=fe.identifierPrefix;if(Y){var r=yt,n=vt;r=(n&~(1<<32-it(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Kn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Wp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Jp={readContext:Qe,useCallback:Ud,useContext:Qe,useEffect:ll,useImperativeHandle:Dd,useInsertionEffect:Pd,useLayoutEffect:Id,useMemo:$d,useReducer:uo,useRef:Rd,useState:function(){return uo(Gn)},useDebugValue:ul,useDeferredValue:function(e){var t=Xe();return Md(t,ue.memoizedState,e)},useTransition:function(){var e=uo(Gn)[0],t=Xe().memoizedState;return[e,t]},useMutableSource:Ed,useSyncExternalStore:jd,useId:zd,unstable_isNewReconciler:!1},Yp={readContext:Qe,useCallback:Ud,useContext:Qe,useEffect:ll,useImperativeHandle:Dd,useInsertionEffect:Pd,useLayoutEffect:Id,useMemo:$d,useReducer:co,useRef:Rd,useState:function(){return co(Gn)},useDebugValue:ul,useDeferredValue:function(e){var t=Xe();return ue===null?t.memoizedState=e:Md(t,ue.memoizedState,e)},useTransition:function(){var e=co(Gn)[0],t=Xe().memoizedState;return[e,t]},useMutableSource:Ed,useSyncExternalStore:jd,useId:zd,unstable_isNewReconciler:!1};function tt(e,t){if(e&&e.defaultProps){t=Z({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ra(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Z({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ci={isMounted:function(e){return(e=e._reactInternals)?mr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=je(),s=Bt(e),i=wt(n,s);i.payload=t,r!=null&&(i.callback=r),t=Mt(e,i,s),t!==null&&(ot(t,e,s,n),zs(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=je(),s=Bt(e),i=wt(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Mt(e,i,s),t!==null&&(ot(t,e,s,n),zs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=je(),n=Bt(e),s=wt(r,n);s.tag=2,t!=null&&(s.callback=t),t=Mt(e,s,n),t!==null&&(ot(t,e,n,r),zs(t,e,n))}};function fu(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Bn(r,n)||!Bn(s,i):!0}function Wd(e,t,r){var n=!1,s=Wt,i=t.contextType;return typeof i=="object"&&i!==null?i=Qe(i):(s=Ie(t)?ur:Se.current,n=t.contextTypes,i=(n=n!=null)?Yr(e,s):Wt),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ci,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function pu(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ci.enqueueReplaceState(t,t.state,null)}function na(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},tl(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Qe(i):(i=Ie(t)?ur:Se.current,s.context=Yr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ra(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ci.enqueueReplaceState(s,s.state,null),li(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function en(e,t){try{var r="",n=t;do r+=Sf(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function ho(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function sa(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Qp=typeof WeakMap=="function"?WeakMap:Map;function qd(e,t,r){r=wt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){fi||(fi=!0,pa=n),sa(e,t)},r}function Hd(e,t,r){r=wt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){sa(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){sa(e,t),typeof n!="function"&&(zt===null?zt=new Set([this]):zt.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function mu(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Qp;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=dm.bind(null,e,t,r),t.then(e,e))}function gu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function vu(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=wt(-1,1),t.tag=2,Mt(r,t,1))),r.lanes|=1),e)}var Xp=St.ReactCurrentOwner,Re=!1;function Ee(e,t,r,n){t.child=e===null?_d(t,null,r,n):Xr(t,e.child,r,n)}function yu(e,t,r,n,s){r=r.render;var i=t.ref;return Hr(t,s),n=ol(e,t,r,n,i,s),r=al(),e!==null&&!Re?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,kt(e,t,s)):(Y&&r&&Ga(t),t.flags|=1,Ee(e,t,n,s),t.child)}function wu(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!vl(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Kd(e,t,i,n,s)):(e=Hs(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Bn,r(o,n)&&e.ref===t.ref)return kt(e,t,s)}return t.flags|=1,e=Ft(i,n),e.ref=t.ref,e.return=t,t.child=e}function Kd(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Bn(i,n)&&e.ref===t.ref)if(Re=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Re=!0);else return t.lanes=e.lanes,kt(e,t,s)}return ia(e,t,r,n,s)}function Gd(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},q(zr,Me),Me|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,q(zr,Me),Me|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,q(zr,Me),Me|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,q(zr,Me),Me|=n;return Ee(e,t,s,r),t.child}function Jd(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ia(e,t,r,n,s){var i=Ie(r)?ur:Se.current;return i=Yr(t,i),Hr(t,s),r=ol(e,t,r,n,i,s),n=al(),e!==null&&!Re?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,kt(e,t,s)):(Y&&n&&Ga(t),t.flags|=1,Ee(e,t,r,s),t.child)}function xu(e,t,r,n,s){if(Ie(r)){var i=!0;ni(t)}else i=!1;if(Hr(t,s),t.stateNode===null)Vs(e,t),Wd(t,r,n),na(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Qe(c):(c=Ie(r)?ur:Se.current,c=Yr(t,c));var d=r.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||u!==c)&&pu(t,o,n,c),Ct=!1;var h=t.memoizedState;o.state=h,li(t,n,o,s),u=t.memoizedState,l!==n||h!==u||Pe.current||Ct?(typeof d=="function"&&(ra(t,r,d,n),u=t.memoizedState),(l=Ct||fu(t,r,l,n,h,u,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),o.props=n,o.state=u,o.context=c,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,kd(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:tt(t.type,l),o.props=c,p=t.pendingProps,h=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=Qe(u):(u=Ie(r)?ur:Se.current,u=Yr(t,u));var f=r.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||h!==u)&&pu(t,o,n,u),Ct=!1,h=t.memoizedState,o.state=h,li(t,n,o,s);var y=t.memoizedState;l!==p||h!==y||Pe.current||Ct?(typeof f=="function"&&(ra(t,r,f,n),y=t.memoizedState),(c=Ct||fu(t,r,c,n,h,y,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=u,n=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return oa(e,t,r,n,i,s)}function oa(e,t,r,n,s,i){Jd(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&iu(t,r,!1),kt(e,t,i);n=t.stateNode,Xp.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Xr(t,e.child,null,i),t.child=Xr(t,null,l,i)):Ee(e,t,l,i),t.memoizedState=n.state,s&&iu(t,r,!0),t.child}function Yd(e){var t=e.stateNode;t.pendingContext?su(e,t.pendingContext,t.pendingContext!==t.context):t.context&&su(e,t.context,!1),rl(e,t.containerInfo)}function _u(e,t,r,n,s){return Qr(),Ya(s),t.flags|=256,Ee(e,t,r,n),t.child}var aa={dehydrated:null,treeContext:null,retryLane:0};function la(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qd(e,t,r){var n=t.pendingProps,s=Q.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),q(Q,s&1),e===null)return ea(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Oi(o,n,0,null),e=lr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=la(r),t.memoizedState=aa,e):cl(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Zp(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=u,t.deletions=null):(n=Ft(s,u),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ft(l,i):(i=lr(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?la(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=aa,n}return i=e.child,e=i.sibling,n=Ft(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function cl(e,t){return t=Oi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Es(e,t,r,n){return n!==null&&Ya(n),Xr(t,e.child,null,r),e=cl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zp(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=ho(Error(j(422))),Es(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Oi({mode:"visible",children:n.children},s,0,null),i=lr(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Xr(t,e.child,null,o),t.child.memoizedState=la(o),t.memoizedState=aa,i);if(!(t.mode&1))return Es(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(j(419)),n=ho(i,n,void 0),Es(e,t,o,n)}if(l=(o&e.childLanes)!==0,Re||l){if(n=fe,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,bt(e,s),ot(n,e,s,-1))}return gl(),n=ho(Error(j(421))),Es(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=hm.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,ze=$t(s.nextSibling),Be=t,Y=!0,st=null,e!==null&&(Ke[Ge++]=vt,Ke[Ge++]=yt,Ke[Ge++]=cr,vt=e.id,yt=e.overflow,cr=t),t=cl(t,n.children),t.flags|=4096,t)}function bu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ta(e.return,t,r)}function fo(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Xd(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Ee(e,t,n.children,r),n=Q.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bu(e,r,t);else if(e.tag===19)bu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(q(Q,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&ui(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),fo(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ui(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}fo(t,!0,r,null,i);break;case"together":fo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function kt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),hr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(j(153));if(t.child!==null){for(e=t.child,r=Ft(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ft(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function em(e,t,r){switch(t.tag){case 3:Yd(t),Qr();break;case 5:Sd(t);break;case 1:Ie(t.type)&&ni(t);break;case 4:rl(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;q(oi,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(q(Q,Q.current&1),t.flags|=128,null):r&t.child.childLanes?Qd(e,t,r):(q(Q,Q.current&1),e=kt(e,t,r),e!==null?e.sibling:null);q(Q,Q.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Xd(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),q(Q,Q.current),n)break;return null;case 22:case 23:return t.lanes=0,Gd(e,t,r)}return kt(e,t,r)}var Zd,ua,eh,th;Zd=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ua=function(){};eh=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,ir(ft.current);var i=null;switch(r){case"input":s=Oo(e,s),n=Oo(e,n),i=[];break;case"select":s=Z({},s,{value:void 0}),n=Z({},n,{value:void 0}),i=[];break;case"textarea":s=Io(e,s),n=Io(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ti)}Do(r,n);var o;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(In.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var u=n[c];if(l=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(i||(i=[]),i.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(In.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&K("scroll",e),i||l===u||(i=[])):(i=i||[]).push(c,u))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};th=function(e,t,r,n){r!==n&&(t.flags|=4)};function pn(e,t){if(!Y)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function be(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function tm(e,t,r){var n=t.pendingProps;switch(Ja(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return be(t),null;case 1:return Ie(t.type)&&ri(),be(t),null;case 3:return n=t.stateNode,Zr(),G(Pe),G(Se),sl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ks(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,st!==null&&(va(st),st=null))),ua(e,t),be(t),null;case 5:nl(t);var s=ir(Hn.current);if(r=t.type,e!==null&&t.stateNode!=null)eh(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(j(166));return be(t),null}if(e=ir(ft.current),ks(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[dt]=t,n[Wn]=i,e=(t.mode&1)!==0,r){case"dialog":K("cancel",n),K("close",n);break;case"iframe":case"object":case"embed":K("load",n);break;case"video":case"audio":for(s=0;s<_n.length;s++)K(_n[s],n);break;case"source":K("error",n);break;case"img":case"image":case"link":K("error",n),K("load",n);break;case"details":K("toggle",n);break;case"input":Ol(n,i),K("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},K("invalid",n);break;case"textarea":Pl(n,i),K("invalid",n)}Do(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&bs(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&bs(n.textContent,l,e),s=["children",""+l]):In.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&K("scroll",n)}switch(r){case"input":ps(n),Rl(n,i,!0);break;case"textarea":ps(n),Il(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=ti)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Tc(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[dt]=t,e[Wn]=n,Zd(e,t,!1,!1),t.stateNode=e;e:{switch(o=Uo(r,n),r){case"dialog":K("cancel",e),K("close",e),s=n;break;case"iframe":case"object":case"embed":K("load",e),s=n;break;case"video":case"audio":for(s=0;s<_n.length;s++)K(_n[s],e);s=n;break;case"source":K("error",e),s=n;break;case"img":case"image":case"link":K("error",e),K("load",e),s=n;break;case"details":K("toggle",e),s=n;break;case"input":Ol(e,n),s=Oo(e,n),K("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Z({},n,{value:void 0}),K("invalid",e);break;case"textarea":Pl(e,n),s=Io(e,n),K("invalid",e);break;default:s=n}Do(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Rc(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ac(e,u)):i==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Ln(e,u):typeof u=="number"&&Ln(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(In.hasOwnProperty(i)?u!=null&&i==="onScroll"&&K("scroll",e):u!=null&&Ia(e,i,u,o))}switch(r){case"input":ps(e),Rl(e,n,!1);break;case"textarea":ps(e),Il(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Vt(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Fr(e,!!n.multiple,i,!1):n.defaultValue!=null&&Fr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ti)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return be(t),null;case 6:if(e&&t.stateNode!=null)th(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(j(166));if(r=ir(Hn.current),ir(ft.current),ks(t)){if(n=t.stateNode,r=t.memoizedProps,n[dt]=t,(i=n.nodeValue!==r)&&(e=Be,e!==null))switch(e.tag){case 3:bs(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bs(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[dt]=t,t.stateNode=n}return be(t),null;case 13:if(G(Q),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Y&&ze!==null&&t.mode&1&&!(t.flags&128))wd(),Qr(),t.flags|=98560,i=!1;else if(i=ks(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(j(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(j(317));i[dt]=t}else Qr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;be(t),i=!1}else st!==null&&(va(st),st=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Q.current&1?ce===0&&(ce=3):gl())),t.updateQueue!==null&&(t.flags|=4),be(t),null);case 4:return Zr(),ua(e,t),e===null&&Fn(t.stateNode.containerInfo),be(t),null;case 10:return Za(t.type._context),be(t),null;case 17:return Ie(t.type)&&ri(),be(t),null;case 19:if(G(Q),i=t.memoizedState,i===null)return be(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)pn(i,!1);else{if(ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ui(e),o!==null){for(t.flags|=128,pn(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return q(Q,Q.current&1|2),t.child}e=e.sibling}i.tail!==null&&se()>tn&&(t.flags|=128,n=!0,pn(i,!1),t.lanes=4194304)}else{if(!n)if(e=ui(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),pn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Y)return be(t),null}else 2*se()-i.renderingStartTime>tn&&r!==1073741824&&(t.flags|=128,n=!0,pn(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=se(),t.sibling=null,r=Q.current,q(Q,n?r&1|2:r&1),t):(be(t),null);case 22:case 23:return ml(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Me&1073741824&&(be(t),t.subtreeFlags&6&&(t.flags|=8192)):be(t),null;case 24:return null;case 25:return null}throw Error(j(156,t.tag))}function rm(e,t){switch(Ja(t),t.tag){case 1:return Ie(t.type)&&ri(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zr(),G(Pe),G(Se),sl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return nl(t),null;case 13:if(G(Q),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(j(340));Qr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return G(Q),null;case 4:return Zr(),null;case 10:return Za(t.type._context),null;case 22:case 23:return ml(),null;case 24:return null;default:return null}}var js=!1,ke=!1,nm=typeof WeakSet=="function"?WeakSet:Set,T=null;function Mr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){te(e,t,n)}else r.current=null}function ca(e,t,r){try{r()}catch(n){te(e,t,n)}}var ku=!1;function sm(e,t){if(Ko=Xs,e=od(),Ka(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,u=-1,c=0,d=0,p=e,h=null;t:for(;;){for(var f;p!==r||s!==0&&p.nodeType!==3||(l=o+s),p!==i||n!==0&&p.nodeType!==3||(u=o+n),p.nodeType===3&&(o+=p.nodeValue.length),(f=p.firstChild)!==null;)h=p,p=f;for(;;){if(p===e)break t;if(h===r&&++c===s&&(l=o),h===i&&++d===n&&(u=o),(f=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=f}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Go={focusedElem:e,selectionRange:r},Xs=!1,T=t;T!==null;)if(t=T,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,T=e;else for(;T!==null;){t=T;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,_=y.memoizedState,v=t.stateNode,m=v.getSnapshotBeforeUpdate(t.elementType===t.type?w:tt(t.type,w),_);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(x){te(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,T=e;break}T=t.return}return y=ku,ku=!1,y}function Tn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&ca(t,r,i)}s=s.next}while(s!==n)}}function Ti(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function da(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function rh(e){var t=e.alternate;t!==null&&(e.alternate=null,rh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[dt],delete t[Wn],delete t[Qo],delete t[zp],delete t[Bp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nh(e){return e.tag===5||e.tag===3||e.tag===4}function Su(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ha(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ti));else if(n!==4&&(e=e.child,e!==null))for(ha(e,t,r),e=e.sibling;e!==null;)ha(e,t,r),e=e.sibling}function fa(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(fa(e,t,r),e=e.sibling;e!==null;)fa(e,t,r),e=e.sibling}var ve=null,rt=!1;function jt(e,t,r){for(r=r.child;r!==null;)sh(e,t,r),r=r.sibling}function sh(e,t,r){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(_i,r)}catch{}switch(r.tag){case 5:ke||Mr(r,t);case 6:var n=ve,s=rt;ve=null,jt(e,t,r),ve=n,rt=s,ve!==null&&(rt?(e=ve,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ve.removeChild(r.stateNode));break;case 18:ve!==null&&(rt?(e=ve,r=r.stateNode,e.nodeType===8?io(e.parentNode,r):e.nodeType===1&&io(e,r),Mn(e)):io(ve,r.stateNode));break;case 4:n=ve,s=rt,ve=r.stateNode.containerInfo,rt=!0,jt(e,t,r),ve=n,rt=s;break;case 0:case 11:case 14:case 15:if(!ke&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ca(r,t,o),s=s.next}while(s!==n)}jt(e,t,r);break;case 1:if(!ke&&(Mr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){te(r,t,l)}jt(e,t,r);break;case 21:jt(e,t,r);break;case 22:r.mode&1?(ke=(n=ke)||r.memoizedState!==null,jt(e,t,r),ke=n):jt(e,t,r);break;default:jt(e,t,r)}}function Eu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new nm),t.forEach(function(n){var s=fm.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ze(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ve=l.stateNode,rt=!1;break e;case 3:ve=l.stateNode.containerInfo,rt=!0;break e;case 4:ve=l.stateNode.containerInfo,rt=!0;break e}l=l.return}if(ve===null)throw Error(j(160));sh(i,o,s),ve=null,rt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){te(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ih(t,e),t=t.sibling}function ih(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ze(t,e),ut(e),n&4){try{Tn(3,e,e.return),Ti(3,e)}catch(w){te(e,e.return,w)}try{Tn(5,e,e.return)}catch(w){te(e,e.return,w)}}break;case 1:Ze(t,e),ut(e),n&512&&r!==null&&Mr(r,r.return);break;case 5:if(Ze(t,e),ut(e),n&512&&r!==null&&Mr(r,r.return),e.flags&32){var s=e.stateNode;try{Ln(s,"")}catch(w){te(e,e.return,w)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Nc(s,i),Uo(l,o);var c=Uo(l,i);for(o=0;o<u.length;o+=2){var d=u[o],p=u[o+1];d==="style"?Rc(s,p):d==="dangerouslySetInnerHTML"?Ac(s,p):d==="children"?Ln(s,p):Ia(s,d,p,c)}switch(l){case"input":Ro(s,i);break;case"textarea":Cc(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Fr(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Fr(s,!!i.multiple,i.defaultValue,!0):Fr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Wn]=i}catch(w){te(e,e.return,w)}}break;case 6:if(Ze(t,e),ut(e),n&4){if(e.stateNode===null)throw Error(j(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){te(e,e.return,w)}}break;case 3:if(Ze(t,e),ut(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Mn(t.containerInfo)}catch(w){te(e,e.return,w)}break;case 4:Ze(t,e),ut(e);break;case 13:Ze(t,e),ut(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(fl=se())),n&4&&Eu(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(ke=(c=ke)||d,Ze(t,e),ke=c):Ze(t,e),ut(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(T=e,d=e.child;d!==null;){for(p=T=d;T!==null;){switch(h=T,f=h.child,h.tag){case 0:case 11:case 14:case 15:Tn(4,h,h.return);break;case 1:Mr(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(w){te(n,r,w)}}break;case 5:Mr(h,h.return);break;case 22:if(h.memoizedState!==null){Nu(p);continue}}f!==null?(f.return=h,T=f):Nu(p)}d=d.sibling}e:for(d=null,p=e;;){if(p.tag===5){if(d===null){d=p;try{s=p.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Oc("display",o))}catch(w){te(e,e.return,w)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(w){te(e,e.return,w)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ze(t,e),ut(e),n&4&&Eu(e);break;case 21:break;default:Ze(t,e),ut(e)}}function ut(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(nh(r)){var n=r;break e}r=r.return}throw Error(j(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Ln(s,""),n.flags&=-33);var i=Su(e);fa(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Su(e);ha(e,l,o);break;default:throw Error(j(161))}}catch(u){te(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function im(e,t,r){T=e,oh(e)}function oh(e,t,r){for(var n=(e.mode&1)!==0;T!==null;){var s=T,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||js;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ke;l=js;var c=ke;if(js=o,(ke=u)&&!c)for(T=s;T!==null;)o=T,u=o.child,o.tag===22&&o.memoizedState!==null?Cu(s):u!==null?(u.return=o,T=u):Cu(s);for(;i!==null;)T=i,oh(i),i=i.sibling;T=s,js=l,ke=c}ju(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,T=i):ju(e)}}function ju(e){for(;T!==null;){var t=T;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ke||Ti(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ke)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:tt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&cu(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}cu(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Mn(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}ke||t.flags&512&&da(t)}catch(h){te(t,t.return,h)}}if(t===e){T=null;break}if(r=t.sibling,r!==null){r.return=t.return,T=r;break}T=t.return}}function Nu(e){for(;T!==null;){var t=T;if(t===e){T=null;break}var r=t.sibling;if(r!==null){r.return=t.return,T=r;break}T=t.return}}function Cu(e){for(;T!==null;){var t=T;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ti(4,t)}catch(u){te(t,r,u)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(u){te(t,s,u)}}var i=t.return;try{da(t)}catch(u){te(t,i,u)}break;case 5:var o=t.return;try{da(t)}catch(u){te(t,o,u)}}}catch(u){te(t,t.return,u)}if(t===e){T=null;break}var l=t.sibling;if(l!==null){l.return=t.return,T=l;break}T=t.return}}var om=Math.ceil,hi=St.ReactCurrentDispatcher,dl=St.ReactCurrentOwner,Ye=St.ReactCurrentBatchConfig,F=0,fe=null,ae=null,ye=0,Me=0,zr=Ht(0),ce=0,Yn=null,hr=0,Ai=0,hl=0,An=null,Oe=null,fl=0,tn=1/0,pt=null,fi=!1,pa=null,zt=null,Ns=!1,It=null,pi=0,On=0,ma=null,Ws=-1,qs=0;function je(){return F&6?se():Ws!==-1?Ws:Ws=se()}function Bt(e){return e.mode&1?F&2&&ye!==0?ye&-ye:Vp.transition!==null?(qs===0&&(qs=Wc()),qs):(e=V,e!==0||(e=window.event,e=e===void 0?16:Qc(e.type)),e):1}function ot(e,t,r,n){if(50<On)throw On=0,ma=null,Error(j(185));is(e,r,n),(!(F&2)||e!==fe)&&(e===fe&&(!(F&2)&&(Ai|=r),ce===4&&Ot(e,ye)),Le(e,n),r===1&&F===0&&!(t.mode&1)&&(tn=se()+500,ji&&Kt()))}function Le(e,t){var r=e.callbackNode;Vf(e,t);var n=Qs(e,e===fe?ye:0);if(n===0)r!==null&&Ul(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Ul(r),t===1)e.tag===0?Fp(Tu.bind(null,e)):gd(Tu.bind(null,e)),$p(function(){!(F&6)&&Kt()}),r=null;else{switch(qc(n)){case 1:r=Ma;break;case 4:r=Fc;break;case 16:r=Ys;break;case 536870912:r=Vc;break;default:r=Ys}r=ph(r,ah.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ah(e,t){if(Ws=-1,qs=0,F&6)throw Error(j(327));var r=e.callbackNode;if(Kr()&&e.callbackNode!==r)return null;var n=Qs(e,e===fe?ye:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=mi(e,n);else{t=n;var s=F;F|=2;var i=uh();(fe!==e||ye!==t)&&(pt=null,tn=se()+500,ar(e,t));do try{um();break}catch(l){lh(e,l)}while(!0);Xa(),hi.current=i,F=s,ae!==null?t=0:(fe=null,ye=0,t=ce)}if(t!==0){if(t===2&&(s=Fo(e),s!==0&&(n=s,t=ga(e,s))),t===1)throw r=Yn,ar(e,0),Ot(e,n),Le(e,se()),r;if(t===6)Ot(e,n);else{if(s=e.current.alternate,!(n&30)&&!am(s)&&(t=mi(e,n),t===2&&(i=Fo(e),i!==0&&(n=i,t=ga(e,i))),t===1))throw r=Yn,ar(e,0),Ot(e,n),Le(e,se()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(j(345));case 2:Zt(e,Oe,pt);break;case 3:if(Ot(e,n),(n&130023424)===n&&(t=fl+500-se(),10<t)){if(Qs(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){je(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Yo(Zt.bind(null,e,Oe,pt),t);break}Zt(e,Oe,pt);break;case 4:if(Ot(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-it(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=se()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*om(n/1960))-n,10<n){e.timeoutHandle=Yo(Zt.bind(null,e,Oe,pt),n);break}Zt(e,Oe,pt);break;case 5:Zt(e,Oe,pt);break;default:throw Error(j(329))}}}return Le(e,se()),e.callbackNode===r?ah.bind(null,e):null}function ga(e,t){var r=An;return e.current.memoizedState.isDehydrated&&(ar(e,t).flags|=256),e=mi(e,t),e!==2&&(t=Oe,Oe=r,t!==null&&va(t)),e}function va(e){Oe===null?Oe=e:Oe.push.apply(Oe,e)}function am(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!at(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ot(e,t){for(t&=~hl,t&=~Ai,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-it(t),n=1<<r;e[r]=-1,t&=~n}}function Tu(e){if(F&6)throw Error(j(327));Kr();var t=Qs(e,0);if(!(t&1))return Le(e,se()),null;var r=mi(e,t);if(e.tag!==0&&r===2){var n=Fo(e);n!==0&&(t=n,r=ga(e,n))}if(r===1)throw r=Yn,ar(e,0),Ot(e,t),Le(e,se()),r;if(r===6)throw Error(j(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Zt(e,Oe,pt),Le(e,se()),null}function pl(e,t){var r=F;F|=1;try{return e(t)}finally{F=r,F===0&&(tn=se()+500,ji&&Kt())}}function fr(e){It!==null&&It.tag===0&&!(F&6)&&Kr();var t=F;F|=1;var r=Ye.transition,n=V;try{if(Ye.transition=null,V=1,e)return e()}finally{V=n,Ye.transition=r,F=t,!(F&6)&&Kt()}}function ml(){Me=zr.current,G(zr)}function ar(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Up(r)),ae!==null)for(r=ae.return;r!==null;){var n=r;switch(Ja(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ri();break;case 3:Zr(),G(Pe),G(Se),sl();break;case 5:nl(n);break;case 4:Zr();break;case 13:G(Q);break;case 19:G(Q);break;case 10:Za(n.type._context);break;case 22:case 23:ml()}r=r.return}if(fe=e,ae=e=Ft(e.current,null),ye=Me=t,ce=0,Yn=null,hl=Ai=hr=0,Oe=An=null,sr!==null){for(t=0;t<sr.length;t++)if(r=sr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}sr=null}return e}function lh(e,t){do{var r=ae;try{if(Xa(),Bs.current=di,ci){for(var n=X.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ci=!1}if(dr=0,he=ue=X=null,Cn=!1,Kn=0,dl.current=null,r===null||r.return===null){ce=1,Yn=t,ae=null;break}e:{var i=e,o=r.return,l=r,u=t;if(t=ye,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=gu(o);if(f!==null){f.flags&=-257,vu(f,o,l,i,t),f.mode&1&&mu(i,c,t),t=f,u=c;var y=t.updateQueue;if(y===null){var w=new Set;w.add(u),t.updateQueue=w}else y.add(u);break e}else{if(!(t&1)){mu(i,c,t),gl();break e}u=Error(j(426))}}else if(Y&&l.mode&1){var _=gu(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),vu(_,o,l,i,t),Ya(en(u,l));break e}}i=u=en(u,l),ce!==4&&(ce=2),An===null?An=[i]:An.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=qd(i,u,t);uu(i,v);break e;case 1:l=u;var m=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(zt===null||!zt.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=Hd(i,l,t);uu(i,x);break e}}i=i.return}while(i!==null)}dh(r)}catch(S){t=S,ae===r&&r!==null&&(ae=r=r.return);continue}break}while(!0)}function uh(){var e=hi.current;return hi.current=di,e===null?di:e}function gl(){(ce===0||ce===3||ce===2)&&(ce=4),fe===null||!(hr&268435455)&&!(Ai&268435455)||Ot(fe,ye)}function mi(e,t){var r=F;F|=2;var n=uh();(fe!==e||ye!==t)&&(pt=null,ar(e,t));do try{lm();break}catch(s){lh(e,s)}while(!0);if(Xa(),F=r,hi.current=n,ae!==null)throw Error(j(261));return fe=null,ye=0,ce}function lm(){for(;ae!==null;)ch(ae)}function um(){for(;ae!==null&&!If();)ch(ae)}function ch(e){var t=fh(e.alternate,e,Me);e.memoizedProps=e.pendingProps,t===null?dh(e):ae=t,dl.current=null}function dh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=rm(r,t),r!==null){r.flags&=32767,ae=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ce=6,ae=null;return}}else if(r=tm(r,t,Me),r!==null){ae=r;return}if(t=t.sibling,t!==null){ae=t;return}ae=t=e}while(t!==null);ce===0&&(ce=5)}function Zt(e,t,r){var n=V,s=Ye.transition;try{Ye.transition=null,V=1,cm(e,t,r,n)}finally{Ye.transition=s,V=n}return null}function cm(e,t,r,n){do Kr();while(It!==null);if(F&6)throw Error(j(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(j(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Wf(e,i),e===fe&&(ae=fe=null,ye=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ns||(Ns=!0,ph(Ys,function(){return Kr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ye.transition,Ye.transition=null;var o=V;V=1;var l=F;F|=4,dl.current=null,sm(e,r),ih(r,e),Ap(Go),Xs=!!Ko,Go=Ko=null,e.current=r,im(r),Lf(),F=l,V=o,Ye.transition=i}else e.current=r;if(Ns&&(Ns=!1,It=e,pi=s),i=e.pendingLanes,i===0&&(zt=null),$f(r.stateNode),Le(e,se()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(fi)throw fi=!1,e=pa,pa=null,e;return pi&1&&e.tag!==0&&Kr(),i=e.pendingLanes,i&1?e===ma?On++:(On=0,ma=e):On=0,Kt(),null}function Kr(){if(It!==null){var e=qc(pi),t=Ye.transition,r=V;try{if(Ye.transition=null,V=16>e?16:e,It===null)var n=!1;else{if(e=It,It=null,pi=0,F&6)throw Error(j(331));var s=F;for(F|=4,T=e.current;T!==null;){var i=T,o=i.child;if(T.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(T=c;T!==null;){var d=T;switch(d.tag){case 0:case 11:case 15:Tn(8,d,i)}var p=d.child;if(p!==null)p.return=d,T=p;else for(;T!==null;){d=T;var h=d.sibling,f=d.return;if(rh(d),d===c){T=null;break}if(h!==null){h.return=f,T=h;break}T=f}}}var y=i.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var _=w.sibling;w.sibling=null,w=_}while(w!==null)}}T=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,T=o;else e:for(;T!==null;){if(i=T,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Tn(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,T=v;break e}T=i.return}}var m=e.current;for(T=m;T!==null;){o=T;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,T=g;else e:for(o=m;T!==null;){if(l=T,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ti(9,l)}}catch(S){te(l,l.return,S)}if(l===o){T=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,T=x;break e}T=l.return}}if(F=s,Kt(),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(_i,e)}catch{}n=!0}return n}finally{V=r,Ye.transition=t}}return!1}function Au(e,t,r){t=en(r,t),t=qd(e,t,1),e=Mt(e,t,1),t=je(),e!==null&&(is(e,1,t),Le(e,t))}function te(e,t,r){if(e.tag===3)Au(e,e,r);else for(;t!==null;){if(t.tag===3){Au(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(zt===null||!zt.has(n))){e=en(r,e),e=Hd(t,e,1),t=Mt(t,e,1),e=je(),t!==null&&(is(t,1,e),Le(t,e));break}}t=t.return}}function dm(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=je(),e.pingedLanes|=e.suspendedLanes&r,fe===e&&(ye&r)===r&&(ce===4||ce===3&&(ye&130023424)===ye&&500>se()-fl?ar(e,0):hl|=r),Le(e,t)}function hh(e,t){t===0&&(e.mode&1?(t=vs,vs<<=1,!(vs&130023424)&&(vs=4194304)):t=1);var r=je();e=bt(e,t),e!==null&&(is(e,t,r),Le(e,r))}function hm(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),hh(e,r)}function fm(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(j(314))}n!==null&&n.delete(t),hh(e,r)}var fh;fh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pe.current)Re=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Re=!1,em(e,t,r);Re=!!(e.flags&131072)}else Re=!1,Y&&t.flags&1048576&&vd(t,ii,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Vs(e,t),e=t.pendingProps;var s=Yr(t,Se.current);Hr(t,r),s=ol(null,t,n,e,s,r);var i=al();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ie(n)?(i=!0,ni(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,tl(t),s.updater=Ci,t.stateNode=s,s._reactInternals=t,na(t,n,e,r),t=oa(null,t,n,!0,i,r)):(t.tag=0,Y&&i&&Ga(t),Ee(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=mm(n),e=tt(n,e),s){case 0:t=ia(null,t,n,e,r);break e;case 1:t=xu(null,t,n,e,r);break e;case 11:t=yu(null,t,n,e,r);break e;case 14:t=wu(null,t,n,tt(n.type,e),r);break e}throw Error(j(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),ia(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),xu(e,t,n,s,r);case 3:e:{if(Yd(t),e===null)throw Error(j(387));n=t.pendingProps,i=t.memoizedState,s=i.element,kd(e,t),li(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=en(Error(j(423)),t),t=_u(e,t,n,r,s);break e}else if(n!==s){s=en(Error(j(424)),t),t=_u(e,t,n,r,s);break e}else for(ze=$t(t.stateNode.containerInfo.firstChild),Be=t,Y=!0,st=null,r=_d(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Qr(),n===s){t=kt(e,t,r);break e}Ee(e,t,n,r)}t=t.child}return t;case 5:return Sd(t),e===null&&ea(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Jo(n,s)?o=null:i!==null&&Jo(n,i)&&(t.flags|=32),Jd(e,t),Ee(e,t,o,r),t.child;case 6:return e===null&&ea(t),null;case 13:return Qd(e,t,r);case 4:return rl(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Xr(t,null,n,r):Ee(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),yu(e,t,n,s,r);case 7:return Ee(e,t,t.pendingProps,r),t.child;case 8:return Ee(e,t,t.pendingProps.children,r),t.child;case 12:return Ee(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,q(oi,n._currentValue),n._currentValue=o,i!==null)if(at(i.value,o)){if(i.children===s.children&&!Pe.current){t=kt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===n){if(i.tag===1){u=wt(-1,r&-r),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),ta(i.return,r,t),l.lanes|=r;break}u=u.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(j(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),ta(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ee(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Hr(t,r),s=Qe(s),n=n(s),t.flags|=1,Ee(e,t,n,r),t.child;case 14:return n=t.type,s=tt(n,t.pendingProps),s=tt(n.type,s),wu(e,t,n,s,r);case 15:return Kd(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tt(n,s),Vs(e,t),t.tag=1,Ie(n)?(e=!0,ni(t)):e=!1,Hr(t,r),Wd(t,n,s),na(t,n,s,r),oa(null,t,n,!0,e,r);case 19:return Xd(e,t,r);case 22:return Gd(e,t,r)}throw Error(j(156,t.tag))};function ph(e,t){return Bc(e,t)}function pm(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(e,t,r,n){return new pm(e,t,r,n)}function vl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mm(e){if(typeof e=="function")return vl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da)return 11;if(e===Ua)return 14}return 2}function Ft(e,t){var r=e.alternate;return r===null?(r=Je(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Hs(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")vl(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ar:return lr(r.children,s,i,t);case La:o=8,s|=8;break;case No:return e=Je(12,r,t,s|2),e.elementType=No,e.lanes=i,e;case Co:return e=Je(13,r,t,s),e.elementType=Co,e.lanes=i,e;case To:return e=Je(19,r,t,s),e.elementType=To,e.lanes=i,e;case Sc:return Oi(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bc:o=10;break e;case kc:o=9;break e;case Da:o=11;break e;case Ua:o=14;break e;case Nt:o=16,n=null;break e}throw Error(j(130,e==null?e:typeof e,""))}return t=Je(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function lr(e,t,r,n){return e=Je(7,e,n,t),e.lanes=r,e}function Oi(e,t,r,n){return e=Je(22,e,n,t),e.elementType=Sc,e.lanes=r,e.stateNode={isHidden:!1},e}function po(e,t,r){return e=Je(6,e,null,t),e.lanes=r,e}function mo(e,t,r){return t=Je(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gm(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gi(0),this.expirationTimes=Gi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gi(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yl(e,t,r,n,s,i,o,l,u){return e=new gm(e,t,r,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Je(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},tl(i),e}function vm(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function mh(e){if(!e)return Wt;e=e._reactInternals;e:{if(mr(e)!==e||e.tag!==1)throw Error(j(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ie(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(j(171))}if(e.tag===1){var r=e.type;if(Ie(r))return md(e,r,t)}return t}function gh(e,t,r,n,s,i,o,l,u){return e=yl(r,n,!0,e,s,i,o,l,u),e.context=mh(null),r=e.current,n=je(),s=Bt(r),i=wt(n,s),i.callback=t??null,Mt(r,i,s),e.current.lanes=s,is(e,s,n),Le(e,n),e}function Ri(e,t,r,n){var s=t.current,i=je(),o=Bt(s);return r=mh(r),t.context===null?t.context=r:t.pendingContext=r,t=wt(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Mt(s,t,o),e!==null&&(ot(e,s,o,i),zs(e,s,o)),o}function gi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ou(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function wl(e,t){Ou(e,t),(e=e.alternate)&&Ou(e,t)}function ym(){return null}var vh=typeof reportError=="function"?reportError:function(e){console.error(e)};function xl(e){this._internalRoot=e}Pi.prototype.render=xl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(j(409));Ri(e,t,null,null)};Pi.prototype.unmount=xl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fr(function(){Ri(null,e,null,null)}),t[_t]=null}};function Pi(e){this._internalRoot=e}Pi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gc();e={blockedOn:null,target:e,priority:t};for(var r=0;r<At.length&&t!==0&&t<At[r].priority;r++);At.splice(r,0,e),r===0&&Yc(e)}};function _l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ii(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ru(){}function wm(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=gi(o);i.call(c)}}var o=gh(t,n,e,0,null,!1,!1,"",Ru);return e._reactRootContainer=o,e[_t]=o.current,Fn(e.nodeType===8?e.parentNode:e),fr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var c=gi(u);l.call(c)}}var u=yl(e,0,!1,null,null,!1,!1,"",Ru);return e._reactRootContainer=u,e[_t]=u.current,Fn(e.nodeType===8?e.parentNode:e),fr(function(){Ri(t,u,r,n)}),u}function Li(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=gi(o);l.call(u)}}Ri(t,o,e,s)}else o=wm(r,t,e,s,n);return gi(o)}Hc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=xn(t.pendingLanes);r!==0&&(za(t,r|1),Le(t,se()),!(F&6)&&(tn=se()+500,Kt()))}break;case 13:fr(function(){var n=bt(e,1);if(n!==null){var s=je();ot(n,e,1,s)}}),wl(e,1)}};Ba=function(e){if(e.tag===13){var t=bt(e,134217728);if(t!==null){var r=je();ot(t,e,134217728,r)}wl(e,134217728)}};Kc=function(e){if(e.tag===13){var t=Bt(e),r=bt(e,t);if(r!==null){var n=je();ot(r,e,t,n)}wl(e,t)}};Gc=function(){return V};Jc=function(e,t){var r=V;try{return V=e,t()}finally{V=r}};Mo=function(e,t,r){switch(t){case"input":if(Ro(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Ei(n);if(!s)throw Error(j(90));jc(n),Ro(n,s)}}}break;case"textarea":Cc(e,r);break;case"select":t=r.value,t!=null&&Fr(e,!!r.multiple,t,!1)}};Lc=pl;Dc=fr;var xm={usingClientEntryPoint:!1,Events:[as,Ir,Ei,Pc,Ic,pl]},mn={findFiberByHostInstance:nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_m={bundleType:mn.bundleType,version:mn.version,rendererPackageName:mn.rendererPackageName,rendererConfig:mn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:St.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Mc(e),e===null?null:e.stateNode},findFiberByHostInstance:mn.findFiberByHostInstance||ym,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cs.isDisabled&&Cs.supportsFiber)try{_i=Cs.inject(_m),ht=Cs}catch{}}Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xm;Ve.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_l(t))throw Error(j(200));return vm(e,t,null,r)};Ve.createRoot=function(e,t){if(!_l(e))throw Error(j(299));var r=!1,n="",s=vh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=yl(e,1,!1,null,null,r,!1,n,s),e[_t]=t.current,Fn(e.nodeType===8?e.parentNode:e),new xl(t)};Ve.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(j(188)):(e=Object.keys(e).join(","),Error(j(268,e)));return e=Mc(t),e=e===null?null:e.stateNode,e};Ve.flushSync=function(e){return fr(e)};Ve.hydrate=function(e,t,r){if(!Ii(t))throw Error(j(200));return Li(null,e,t,!0,r)};Ve.hydrateRoot=function(e,t,r){if(!_l(e))throw Error(j(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=vh;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=gh(t,null,e,1,r??null,s,!1,i,o),e[_t]=t.current,Fn(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Pi(t)};Ve.render=function(e,t,r){if(!Ii(t))throw Error(j(200));return Li(null,e,t,!1,r)};Ve.unmountComponentAtNode=function(e){if(!Ii(e))throw Error(j(40));return e._reactRootContainer?(fr(function(){Li(null,null,e,!1,function(){e._reactRootContainer=null,e[_t]=null})}),!0):!1};Ve.unstable_batchedUpdates=pl;Ve.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ii(r))throw Error(j(200));if(e==null||e._reactInternals===void 0)throw Error(j(38));return Li(e,t,r,!1,n)};Ve.version="18.3.1-next-f1338f8080-20240426";function yh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yh)}catch(e){console.error(e)}}yh(),yc.exports=Ve;var bm=yc.exports,Pu=bm;Eo.createRoot=Pu.createRoot,Eo.hydrateRoot=Pu.hydrateRoot;const wh=({className:e=""})=>a.jsxs("div",{className:`flex items-center gap-4 ${e}`,children:[a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute inset-0 bg-[#00d2ff] rounded-full blur-md opacity-20 group-hover:opacity-40 transition-opacity duration-500 animate-pulse"}),a.jsx("div",{className:"absolute -inset-1 border border-[#00d2ff]/30 rounded-full animate-ping opacity-20 pointer-events-none"}),a.jsx("div",{className:"relative w-12 h-12 flex items-center justify-center bg-black/60 backdrop-blur-sm rounded-full border border-white/10 shadow-[0_0_15px_rgba(0,210,255,0.3)] overflow-hidden animate-float-small",children:a.jsx("img",{src:"https://res.cloudinary.com/dv1yofc8f/image/upload/v1767857953/ap_dp_1_cnobg3.png",alt:"AP Logo",className:"w-full h-full object-contain p-1.5 transition-transform duration-500 group-hover:scale-110"})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-orbitron font-bold tracking-widest text-lg text-white leading-none mb-1",children:"ADAL PAREDES"}),a.jsx("span",{className:"text-[9px] tracking-[0.2em] text-[#00d2ff] font-bold uppercase opacity-80",children:"TECH ASSISTANT"})]}),a.jsx("style",{children:`
      @keyframes float-small {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-3px); }
      }
      .animate-float-small {
        animation: float-small 3s ease-in-out infinite;
      }
    `})]}),km=()=>a.jsxs("header",{className:"fixed top-0 left-0 w-full p-6 flex justify-between items-center z-40",children:[a.jsx(wh,{}),a.jsx("div",{className:"hidden md:flex items-center gap-6",children:a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("span",{className:"text-[10px] text-[#00d2ff] opacity-50 font-mono",children:"NODE_STATUS"}),a.jsxs("span",{className:"text-[10px] text-white font-mono flex items-center gap-1",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-[#00ff88] rounded-full animate-pulse"}),"ACTIVE"]})]})})]}),Sm=({duration:e=4200,onComplete:t})=>{const[r,n]=b.useState(0),[s,i]=b.useState(!1),[o,l]=b.useState(0),u=b.useMemo(()=>["ESTABLISHING_ENCRYPTED_TUNNEL...","SYNCING_BITCOIN_NODE_#B842189","LOADING_NEURAL_MODELS_V3.5","BYPASSING_LEGACY_PROTOCOLS","INJECTING_ADAL_CORE_KERNEL","SYSTEM_INTEGRITY_CHECK: OK","INITIALIZING_INTERFACE..."],[]);return b.useEffect(()=>{const c=Date.now(),d=()=>{const p=Date.now()-c,h=Math.min(p/e*100,100);n(h);const f=Math.floor(h/100*u.length);f<u.length&&l(f),h<100?requestAnimationFrame(d):(i(!0),setTimeout(t,800))};requestAnimationFrame(d)},[e,t,u]),a.jsxs("div",{className:`ap-loader-overlay fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-[#000000] text-[#00f5ff] font-mono select-none overflow-hidden transition-all duration-700 ${s?"opacity-0 scale-110":"opacity-100"}`,children:[a.jsxs("div",{className:"absolute inset-0 perspective-[1200px] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 origin-center rotate-x-[65deg] animate-ap-grid-travel opacity-[0.12]",style:{backgroundImage:"linear-gradient(to right, #00f5ff 1px, transparent 1px), linear-gradient(to bottom, #00f5ff 1px, transparent 1px)",backgroundSize:"80px 80px",width:"200%",height:"200%",left:"-50%",top:"-50%",maskImage:"radial-gradient(circle at center, transparent 20%, black 70%)",WebkitMaskImage:"radial-gradient(circle at center, transparent 20%, black 70%)"}}),a.jsx("div",{className:"absolute inset-0 bg-radial-vignette"})]}),a.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80 flex items-center justify-center mb-12 z-10",children:[a.jsx("div",{className:"absolute inset-0 border border-[#00f5ff]/20 rounded-full animate-ap-spin-slow-reverse shadow-[inset_0_0_30px_rgba(0,245,255,0.05)]"}),a.jsx("div",{className:"absolute inset-4 border-2 border-t-[#00f5ff] border-b-[#00f5ff] border-l-transparent border-r-transparent rounded-full animate-ap-spin-fast opacity-60"}),a.jsx("div",{className:"absolute inset-10 border border-dashed border-[#00f5ff]/40 rounded-full animate-ap-spin-slow"}),a.jsxs("div",{className:"relative flex items-center justify-center",children:[a.jsx("div",{className:"absolute w-20 h-20 bg-[#00f5ff]/10 rounded-full blur-2xl animate-ap-pulse-glow"}),a.jsx("div",{className:"w-5 h-5 bg-[#00f5ff] rounded-full shadow-[0_0_20px_#00f5ff] z-10"}),a.jsx("div",{className:"absolute top-[-50px] left-1/2 w-[1px] h-24 bg-gradient-to-b from-transparent via-white to-transparent opacity-40 animate-ap-scan-v"})]}),a.jsxs("div",{className:"absolute top-4 left-4 text-[8px] opacity-40 tracking-tighter uppercase",children:["COORD_X: 092",a.jsx("br",{}),"COORD_Y: 882"]}),a.jsxs("div",{className:"absolute bottom-4 right-4 text-[8px] opacity-40 tracking-tighter uppercase",children:["PORTAL_V3",a.jsx("br",{}),"STATUS: OK"]})]}),a.jsxs("div",{className:"w-full max-w-sm px-8 z-10",children:[a.jsxs("div",{className:"flex justify-between items-end mb-2",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"text-[10px] font-bold tracking-[0.3em] uppercase animate-pulse",children:"Sincronizando Protocolo"}),a.jsx("span",{className:"text-[9px] text-[#00f5ff]/50 h-3 font-mono",children:u[o]})]}),a.jsxs("span",{className:"text-xl font-bold tabular-nums tracking-tighter shadow-sm",children:[Math.floor(r),"%"]})]}),a.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden border border-white/5 p-[1px]",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-[#00d2ff] via-[#00f5ff] to-white transition-all duration-100 ease-out shadow-[0_0_10px_#00f5ff]",style:{width:`${r}%`}})}),a.jsxs("div",{className:"mt-8 flex justify-center gap-4 opacity-10 text-[7px] tracking-[0.5em] overflow-hidden whitespace-nowrap font-mono",children:[a.jsx("span",{children:"01100001 01100100 01100001 01101100"}),a.jsx("span",{className:"hidden md:inline",children:"01110000 01100001 01110010 01100101 01100100"})]})]}),a.jsx("style",{children:`
        .perspective-1200 { perspective: 1200px; }
        .rotate-x-65 { transform: rotateX(65deg); }
        .bg-radial-vignette {
          background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,1) 90%);
        }

        @keyframes ap-grid-travel {
          from { transform: rotateX(65deg) translateY(0); }
          to { transform: rotateX(65deg) translateY(80px); }
        }
        @keyframes ap-spin-slow {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        @keyframes ap-spin-slow-reverse {
          from { transform: rotate(360deg); }
          to { transform: rotate(0deg); }
        }
        @keyframes ap-spin-fast {
          from { transform: rotate(0deg); }
          to { transform: rotate(720deg); }
        }
        @keyframes ap-pulse-glow {
          0%, 100% { transform: scale(1); opacity: 0.2; }
          50% { transform: scale(1.4); opacity: 0.4; }
        }
        @keyframes ap-scan-v {
          0% { transform: translateY(-50px) translateX(-50%); opacity: 0; }
          20% { opacity: 0.6; }
          80% { opacity: 0.6; }
          100% { transform: translateY(140px) translateX(-50%); opacity: 0; }
        }

        .animate-ap-grid-travel { animation: ap-grid-travel 3s linear infinite; }
        .animate-ap-spin-slow { animation: ap-spin-slow 12s linear infinite; }
        .animate-ap-spin-slow-reverse { animation: ap-spin-slow-reverse 15s linear infinite; }
        .animate-ap-spin-fast { animation: ap-spin-fast 4s cubic-bezier(0.4, 0, 0.2, 1) infinite; }
        .animate-ap-pulse-glow { animation: ap-pulse-glow 3s ease-in-out infinite; }
        .animate-ap-scan-v { animation: ap-scan-v 2.5s ease-in-out infinite; }
      `})]})},Em=({onSolved:e})=>{const[t,r]=b.useState([]),[n,s]=b.useState(!1),[i,o]=b.useState(0),[l,u]=b.useState([]);b.useEffect(()=>{const d=Array.from({length:9}).map((p,h)=>{const f=Math.floor(Math.random()*4)*90;return{id:h,rotation:f,correctRotation:0}});r(d)},[]);const c=d=>{if(n)return;r(f=>f.map(y=>y.id===d?{...y,rotation:(y.rotation+90)%360}:y)),o(f=>f+1);const p=d+1,h=[...l,p].slice(-3);u(h),h[0]===4&&h[1]===5&&h[2]===6&&(r(f=>f.map(y=>({...y,rotation:0}))),s(!0),setTimeout(e,800))};return b.useEffect(()=>{if(t.length===0||n)return;t.every(p=>p.rotation===p.correctRotation)&&(s(!0),setTimeout(e,1500))},[t,e,n]),a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] w-full max-w-lg mx-auto p-4 animate-in fade-in zoom-in duration-1000",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-[#00d2ff] font-orbitron text-2xl font-bold mb-2 tracking-wider",children:"VERIFICACIN ANTI-SPAM"}),a.jsx("p",{className:"text-gray-400 text-sm font-mono px-4 uppercase opacity-60",children:"Alinea los segmentos del nodo Bitcoin para sincronizar el hash."})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 bg-[#111] p-4 rounded-lg border border-[#333] shadow-2xl relative",children:[t.map(d=>a.jsxs("button",{onClick:()=>c(d.id),className:`w-20 h-20 md:w-28 md:h-28 bg-[#0a0a0a] border border-[#222] flex flex-col items-center justify-center transition-all duration-300 hover:border-[#00d2ff] group relative overflow-hidden ${n?"pointer-events-none border-[#00ff88]":""}`,children:[a.jsx("span",{className:"absolute top-1 left-2 text-[8px] font-mono text-[#00d2ff] opacity-40 group-hover:opacity-100",children:d.id+1}),a.jsx("div",{className:`text-4xl md:text-5xl transition-all duration-300 ${n?"text-[#00ff88]":"text-[#00d2ff] group-hover:scale-110"}`,style:{transform:`rotate(${d.rotation}deg)`},children:""}),a.jsx("div",{className:"absolute top-1 left-1 w-1 h-1 bg-[#00d2ff] opacity-20"}),a.jsx("div",{className:"absolute bottom-1 right-1 w-1 h-1 bg-[#00d2ff] opacity-20"})]},d.id)),n&&a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center rounded-lg animate-in fade-in duration-300",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-[#00ff88] text-4xl mb-2 animate-bounce",children:""}),a.jsx("p",{className:"text-[#00ff88] font-orbitron font-bold tracking-widest uppercase text-lg shadow-[#00ff88]/20 drop-shadow-lg",children:"Acceso Concedido"}),a.jsx("p",{className:"text-xs text-white opacity-60 font-mono mt-1 uppercase tracking-tighter",children:"VIP / Hash Verificado"})]})})]}),a.jsxs("div",{className:"mt-8 grid grid-cols-3 gap-4 w-full px-2",children:[a.jsxs("div",{className:"flex flex-col items-center p-2 bg-white/[0.02] border border-white/5 rounded-xl",children:[a.jsx("span",{className:"text-[7px] text-gray-500 font-mono uppercase tracking-[0.2em] mb-1",children:"Ciclos"}),a.jsx("span",{className:"text-sm font-orbitron font-bold text-[#00ff88] drop-shadow-[0_0_8px_rgba(0,255,136,0.6)] animate-pulse",children:i})]}),a.jsxs("div",{className:"flex flex-col items-center p-2 bg-white/[0.02] border border-white/5 rounded-xl",children:[a.jsx("span",{className:"text-[7px] text-gray-500 font-mono uppercase tracking-[0.2em] mb-1",children:"Seguridad"}),a.jsx("span",{className:"text-[10px] font-orbitron font-bold text-[#00ff88] drop-shadow-[0_0_8px_rgba(0,255,136,0.6)] uppercase",children:"Alta"})]}),a.jsxs("div",{className:"flex flex-col items-center p-2 bg-white/[0.02] border border-white/5 rounded-xl relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-[#00ff88]/5 animate-pulse"}),a.jsx("span",{className:"text-[7px] text-gray-500 font-mono uppercase tracking-[0.2em] mb-1 relative z-10",children:"Nivel"}),a.jsxs("div",{className:"flex items-center gap-1.5 relative z-10",children:[a.jsx("span",{className:"w-1 h-1 bg-[#00ff88] rounded-full animate-ping"}),a.jsx("span",{className:"text-[9px] font-orbitron font-bold text-[#00ff88] drop-shadow-[0_0_8px_rgba(0,255,136,0.8)] uppercase",children:"VIP_ENABLED"})]})]})]}),!n&&i>12&&a.jsx("p",{className:"mt-8 text-[#00ff88] text-[11px] font-bold text-center animate-pulse leading-relaxed px-6 italic opacity-80",children:"chale ganas, campen! Acomoda los iconos de Bitcoin hasta que queden parejos. No hay que ser graduado de Harvard... o s? "})]})};function Di(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function jm(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(p){o(p)}}function u(d){try{c(n.throw(d))}catch(p){o(p)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})}const Nm=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class bl extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Cm extends bl{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Iu extends bl{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Lu extends bl{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ya;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(ya||(ya={}));class Tm{constructor(t,{headers:r={},customFetch:n,region:s=ya.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Nm(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return jm(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:l,method:u,body:c,signal:d,timeout:p}=n;let h={},{region:f}=n;f||(f=this.region);const y=new URL(`${this.url}/${r}`);f&&f!=="any"&&(h["x-region"]=f,y.searchParams.set("forceFunctionRegion",f));let w;c&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",w=c):typeof c=="string"?(h["Content-Type"]="text/plain",w=c):typeof FormData<"u"&&c instanceof FormData?w=c:(h["Content-Type"]="application/json",w=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?w=JSON.stringify(c):w=c;let _=d;p&&(o=new AbortController,i=setTimeout(()=>o.abort(),p),d?(_=o.signal,d.addEventListener("abort",()=>o.abort())):_=o.signal);const v=yield this.fetch(y.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:w,signal:_}).catch(S=>{throw new Cm(S)}),m=v.headers.get("x-relay-error");if(m&&m==="true")throw new Iu(v);if(!v.ok)throw new Lu(v);let g=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),x;return g==="application/json"?x=yield v.json():g==="application/octet-stream"||g==="application/pdf"?x=yield v.blob():g==="text/event-stream"?x=v:g==="multipart/form-data"?x=yield v.formData():x=yield v.text(),{data:x,error:null,response:v}}catch(l){return{data:null,error:l,response:l instanceof Lu||l instanceof Iu?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var Am=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Om=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,u=null,c=i.status,d=i.statusText;if(i.ok){var p,h;if(r.method!=="HEAD"){var f;const v=await i.text();v===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((f=r.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?l=v:l=JSON.parse(v))}const w=(p=r.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),_=(h=i.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&_&&_.length>1&&(u=parseInt(_[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,u=null,c=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var y;const w=await i.text();try{o=JSON.parse(w),Array.isArray(o)&&i.status===404&&(l=[],o=null,c=200,d="OK")}catch{i.status===404&&w===""?(c=204,d="No Content"):o={message:w}}if(o&&r.isMaybeSingle&&(!(o==null||(y=o.details)===null||y===void 0)&&y.includes("0 rows"))&&(o=null,c=200,d="OK"),o&&r.shouldThrowOnError)throw new Am(o)}return{error:o,data:l,count:u,status:c,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let l="";const u=i==null?void 0:i.cause;if(u){var c,d,p,h;const y=(c=u==null?void 0:u.message)!==null&&c!==void 0?c:"",w=(d=u==null?void 0:u.code)!==null&&d!==void 0?d:"";l=`${(p=i==null?void 0:i.name)!==null&&p!==void 0?p:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(h=u==null?void 0:u.name)!==null&&h!==void 0?h:"Error"}: ${y}`,w&&(l+=` (${w})`),u!=null&&u.stack&&(l+=`
${u.stack}`)}else{var f;l=(f=i==null?void 0:i.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},Rm=class extends Om{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${u}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Du=new RegExp("[,()]");var Er=class extends Rm{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Du.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Du.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},Pm=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join(""),{url:l,headers:u}=this.cloneRequestState();return l.searchParams.set("select",o),n&&u.append("Prefer",`count=${n}`),new Er({method:s,url:l,headers:u,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);i.searchParams.set("columns",u.join(","))}}return new Er({method:s,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST",{url:l,headers:u}=this.cloneRequestState();if(u.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&u.append("Prefer",`count=${n}`),s||u.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,p)=>d.concat(Object.keys(p)),[]);if(c.length>0){const d=[...new Set(c)].map(p=>`"${p}"`);l.searchParams.set("columns",d.join(","))}}return new Er({method:o,url:l,headers:u,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Er({method:n,url:s,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Er({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Im=class xh{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Pm(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new xh(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const u=new URL(`${this.url}/rpc/${t}`);let c;const d=f=>f!==null&&typeof f=="object"&&(!Array.isArray(f)||f.some(d)),p=n&&Object.values(r).some(d);p?(l="POST",c=r):n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([f,y])=>y!==void 0).map(([f,y])=>[f,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([f,y])=>{u.searchParams.append(f,y)})):(l="POST",c=r);const h=new Headers(this.headers);return p?h.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&h.set("Prefer",`count=${i}`),new Er({method:l,url:u,headers:h,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class Lm{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Dm="2.93.2",Um=`realtime-js/${Dm}`,$m="1.0.0",_h="2.0.0",Uu=_h,wa=1e4,Mm=1e3,zm=100;var Tt;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Tt||(Tt={}));var le;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(le||(le={}));var nt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(nt||(nt={}));var xa;(function(e){e.websocket="websocket"})(xa||(xa={}));var tr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(tr||(tr={}));class Bm{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,i;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",u=(i=t.join_ref)!==null&&i!==void 0?i:"",c=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},p=Object.keys(d).length===0?"":JSON.stringify(d);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+l.length+o.length+c.length+p.length,f=new ArrayBuffer(this.HEADER_LENGTH+h);let y=new DataView(f),w=0;y.setUint8(w++,this.KINDS.userBroadcastPush),y.setUint8(w++,u.length),y.setUint8(w++,l.length),y.setUint8(w++,o.length),y.setUint8(w++,c.length),y.setUint8(w++,p.length),y.setUint8(w++,r),Array.from(u,v=>y.setUint8(w++,v.charCodeAt(0))),Array.from(l,v=>y.setUint8(w++,v.charCodeAt(0))),Array.from(o,v=>y.setUint8(w++,v.charCodeAt(0))),Array.from(c,v=>y.setUint8(w++,v.charCodeAt(0))),Array.from(p,v=>y.setUint8(w++,v.charCodeAt(0)));var _=new Uint8Array(f.byteLength+n.byteLength);return _.set(new Uint8Array(f),0),_.set(new Uint8Array(n),f.byteLength),_.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,l,u]=n;return r({join_ref:s,ref:i,topic:o,event:l,payload:u})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let u=this.HEADER_LENGTH+4;const c=n.decode(t.slice(u,u+s));u=u+s;const d=n.decode(t.slice(u,u+i));u=u+i;const p=n.decode(t.slice(u,u+o));u=u+o;const h=t.slice(u,t.byteLength),f=l===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,y={type:this.BROADCAST_EVENT,event:d,payload:f};return o>0&&(y.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class bh{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var W;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(W||(W={}));const $u=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=Fm(o,e,t,s),i),{}):{}},Fm=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?kh(i,o):_a(o)},kh=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Hm(t,r)}switch(e){case W.bool:return Vm(t);case W.float4:case W.float8:case W.int2:case W.int4:case W.int8:case W.numeric:case W.oid:return Wm(t);case W.json:case W.jsonb:return qm(t);case W.timestamp:return Km(t);case W.abstime:case W.date:case W.daterange:case W.int4range:case W.int8range:case W.money:case W.reltime:case W.text:case W.time:case W.timestamptz:case W.timetz:case W.tsrange:case W.tstzrange:return _a(t);default:return _a(t)}},_a=e=>e,Vm=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Wm=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},qm=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Hm=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>kh(t,l))}return e},Km=e=>typeof e=="string"?e.replace(" ","T"):e,Sh=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class go{constructor(t,r,n={},s=wa){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Mu;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Mu||(Mu={}));class Rn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Rn.syncState(this.state,s,i,o),this.pendingDiffs.forEach(u=>{this.state=Rn.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Rn.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},u={};return this.map(i,(c,d)=>{o[c]||(u[c]=d)}),this.map(o,(c,d)=>{const p=i[c];if(p){const h=d.map(_=>_.presence_ref),f=p.map(_=>_.presence_ref),y=d.filter(_=>f.indexOf(_.presence_ref)<0),w=p.filter(_=>h.indexOf(_.presence_ref)<0);y.length>0&&(l[c]=y),w.length>0&&(u[c]=w)}else l[c]=d}),this.syncDiff(i,{joins:l,leaves:u},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,u)=>{var c;const d=(c=t[l])!==null&&c!==void 0?c:[];if(t[l]=this.cloneDeep(u),d.length>0){const p=t[l].map(f=>f.presence_ref),h=d.filter(f=>p.indexOf(f.presence_ref)<0);t[l].unshift(...h)}n(l,d,u)}),this.map(o,(l,u)=>{let c=t[l];if(!c)return;const d=u.map(p=>p.presence_ref);c=c.filter(p=>d.indexOf(p.presence_ref)<0),t[l]=c,s(l,c,u),c.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zu;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(zu||(zu={}));var Pn;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Pn||(Pn={}));var mt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(mt||(mt={}));class Br{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=le.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new go(this,nt.join,this.params,this.timeout),this.rejoinTimer=new bh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=le.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=le.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this._on(nt.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Rn(this),this.broadcastEndpointURL=Sh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==le.closed){const{config:{broadcast:o,presence:l,private:u}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Pn.PRESENCE]&&this.bindings[Pn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},h={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:c,private:u};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(mt.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(mt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){t==null||t(mt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,_=(y=w==null?void 0:w.length)!==null&&y!==void 0?y:0,v=[];for(let m=0;m<_;m++){const g=w[m],{filter:{event:x,schema:S,table:E,filter:N}}=g,k=f&&f[m];if(k&&k.event===x&&Br.isFilterValueEqual(k.schema,S)&&Br.isFilterValueEqual(k.table,E)&&Br.isFilterValueEqual(k.filter,N))v.push(Object.assign(Object.assign({},g),{id:k.id}));else{this.unsubscribe(),this.state=le.errored,t==null||t(mt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(mt.SUBSCRIBED);return}}).receive("error",f=>{this.state=le.errored,t==null||t(mt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(mt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===le.joined&&t===Pn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{const c=await l.json();u=c.error||c.message||u}catch{}return Promise.reject(new Error(u))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,u;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=le.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(nt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new go(this,nt.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=le.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new go(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>zm){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:u,leave:c,join:d}=nt;if(n&&[l,u,c,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var y,w,_;return((y=f.filter)===null||y===void 0?void 0:y.event)==="*"||((_=(w=f.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(f=>f.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var y,w,_,v,m,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const x=f.id,S=(y=f.filter)===null||y===void 0?void 0:y.event;return x&&((w=r.ids)===null||w===void 0?void 0:w.includes(x))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const x=(m=(v=f==null?void 0:f.filter)===null||v===void 0?void 0:v.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return x==="*"||x===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:w,table:_,commit_timestamp:v,type:m,errors:g}=y;h=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:v,eventType:m,new:{},old:{},errors:g}),this._getPayloadRecords(y))}f.callback(h,n)})}_isClosed(){return this.state===le.closed}_isJoined(){return this.state===le.joined}_isJoining(){return this.state===le.joining}_isLeaving(){return this.state===le.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Br.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(nt.close,{},t)}_onError(t){this._on(nt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=le.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=$u(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=$u(t.columns,t.old_record)),r}}const vo=()=>{},Ts={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Gm=[1e3,2e3,5e3,1e4],Jm=1e4,Ym=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Qm{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=wa,this.transport=null,this.heartbeatIntervalMs=Ts.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vo,this.ref=0,this.reconnectTimer=null,this.vsn=Uu,this.logger=vo,this.conn=null,this.sendBuffer=[],this.serializer=new Bm,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${xa.websocket}`,this.httpEndpoint=Sh(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Lm.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Tt.connecting:return tr.Connecting;case Tt.open:return tr.Open;case Tt.closing:return tr.Closing;default:return tr.Closed}}isConnected(){return this.connectionState()===tr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Br(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Mm,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ts.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",c)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",u=i.status||"";this.log("receive",`${u} ${n} ${s} ${l}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Tt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Tt.open||this.conn.readyState===Tt.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(nt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Ym],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:Um};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(nt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new bh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ts.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,u,c,d,p,h,f;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:wa,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Ts.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:vo,this.vsn=(u=t==null?void 0:t.vsn)!==null&&u!==void 0?u:Uu,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:y=>Gm[y-1]||Jm,this.vsn){case $m:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(y,w)=>w(JSON.stringify(y)),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:(y,w)=>w(JSON.parse(y));break;case _h:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Qn=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Xm(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function Zm(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function e0(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const l=Xm(e.baseUrl,n,s),u=await Zm(e.auth),c=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...u,...o},body:i?JSON.stringify(i):void 0}),d=await c.text(),p=(c.headers.get("content-type")||"").includes("application/json"),h=p&&d?JSON.parse(d):d;if(!c.ok){const f=p?h:void 0,y=f==null?void 0:f.error;throw new Qn((y==null?void 0:y.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:f})}return{status:c.status,headers:c.headers,data:h}}}}function As(e){return e.join("")}var t0=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:As(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${As(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${As(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${As(e.namespace)}`}),!0}catch(t){if(t instanceof Qn&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Qn&&r.status===409)return;throw r}}};function wr(e){return e.join("")}var r0=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${wr(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${wr(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${wr(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${wr(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${wr(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${wr(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Qn&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Qn&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},n0=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=e0({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new t0(this.client,t),this.tableOps=new r0(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Ui=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function $i(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Os=class extends Ui{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Eh=class extends Ui{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const s0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),i0=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ba=e=>{if(Array.isArray(e))return e.map(r=>ba(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=ba(n)}),t},o0=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Xn(e){"@babel/helpers - typeof";return Xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xn(e)}function a0(e,t){if(Xn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l0(e){var t=a0(e,"string");return Xn(t)=="symbol"?t:t+""}function u0(e,t,r){return(t=l0(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Bu(Object(r),!0).forEach(function(n){u0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Fu=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},c0=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e,i=s.status||500;if(typeof s.json=="function")s.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";t(new Os(Fu(o),i,l,n))}).catch(()=>{if(n==="vectors"){const o=i+"";t(new Os(s.statusText||`HTTP ${i} error`,i,o,n))}else{const o=i+"";t(new Os(s.statusText||`HTTP ${i} error`,i,o,n))}});else{const o=i+"";t(new Os(s.statusText||`HTTP ${i} error`,i,o,n))}}else t(new Eh(Fu(e),e,n))},d0=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?I(I({},s),r):(i0(n)?(s.headers=I({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),I(I({},s),r))};async function gn(e,t,r,n,s,i,o){return new Promise((l,u)=>{e(r,d0(t,n,s,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;if(o==="vectors"){const d=c.headers.get("content-type");if(!d||!d.includes("application/json"))return{}}return c.json()}).then(c=>l(c)).catch(c=>c0(c,u,n,o))})}function h0(e="storage"){return{get:async(t,r,n,s)=>gn(t,"GET",r,n,s,void 0,e),post:async(t,r,n,s,i)=>gn(t,"POST",r,s,i,n,e),put:async(t,r,n,s,i)=>gn(t,"PUT",r,s,i,n,e),head:async(t,r,n,s)=>gn(t,"HEAD",r,I(I({},n),{},{noResolveJson:!0}),s,void 0,e),remove:async(t,r,n,s,i)=>gn(t,"DELETE",r,s,i,n,e)}}const f0=h0("storage"),{get:Zn,post:J,put:ka,head:p0,remove:kl}=f0;var on=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=s0(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if($i(r))return{data:null,error:r};throw r}}},m0=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if($i(t))return{data:null,error:t};throw t}}};let jh;jh=Symbol.toStringTag;var g0=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[jh]="BlobDownloadBuilder",this.promise=null}asStream(){return new m0(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if($i(t))return{data:null,error:t};throw t}}};const v0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var y0=class extends on{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var s=this;return s.handleOperation(async()=>{let i;const o=I(I({},Vu),n);let l=I(I({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",s.encodeMetadata(u)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),u&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(u))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(u))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=I(I({},l),n.headers));const c=s._removeEmptyFolders(t),d=s._getFinalPath(c),p=await(e=="PUT"?ka:J)(s.fetch,`${s.url}/object/${d}`,i,I({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:c,id:p.Id,fullPath:p.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${o}`);return l.searchParams.set("token",t),s.handleOperation(async()=>{let u;const c=I({upsert:Vu.upsert},n),d=I(I({},s.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",c.cacheControl)):(u=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType),{path:i,fullPath:(await ka(s.fetch,l.toString(),u,{headers:d})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const s=I({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await J(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new Ui("No token returned by API");return{signedUrl:o.toString(),path:e,token:l}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await J(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await J(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let s=n._getFinalPath(e),i=await J(n.fetch,`${n.url}/object/sign/${s}`,I({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const s=await J(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s.map(o=>I(I({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null}))})}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>Zn(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new g0(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>ba(await Zn(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await p0(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if($i(n)&&n instanceof Eh){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await kl(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const s=I(I(I({},v0),t),{},{prefix:e||""});return await J(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=I({},e);return await J(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const w0="2.93.2",us={"X-Client-Info":`storage-js/${w0}`};var x0=class extends on{constructor(e,t={},r,n){const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const i=s.href.replace(/\/$/,""),o=I(I({},us),t);super(i,o,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await Zn(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Zn(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await J(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await ka(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await J(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await kl(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},_0=class extends on{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=I(I({},us),t);super(n,s,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await J(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await Zn(t.fetch,s,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await kl(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!o0(e))throw new Ui("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new n0({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(u){if(n)throw u;return{data:null,error:u}}}}})}},b0=class extends on{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=I(I({},us),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await J(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await J(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await J(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await J(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},k0=class extends on{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=I(I({},us),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await J(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await J(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await J(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await J(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await J(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},S0=class extends on{constructor(e,t={},r){const n=e.replace(/\/$/,""),s=I(I({},us),{},{"Content-Type":"application/json"},t);super(n,s,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await J(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await J(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await J(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await J(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},E0=class extends S0{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new j0(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},j0=class extends b0{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,I(I({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,I(I({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new N0(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},N0=class extends k0{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,I(I({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,I(I({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,I(I({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,I(I({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,I(I({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},C0=class extends x0{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new y0(this.url,this.headers,e,this.fetch)}get vectors(){return new E0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new _0(this.url+"/iceberg",this.headers,this.fetch)}};const Nh="2.93.2",jr=30*1e3,Sa=3,yo=Sa*jr,T0="http://localhost:9999",A0="supabase.auth.token",O0={"X-Client-Info":`gotrue-js/${Nh}`},Ea="X-Supabase-Api-Version",Ch={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},R0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,P0=10*60*1e3;class es extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function O(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class I0 extends es{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function L0(e){return O(e)&&e.name==="AuthApiError"}class rr extends es{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Et extends es{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class $e extends Et{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function wo(e){return O(e)&&e.name==="AuthSessionMissingError"}class xr extends Et{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Rs extends Et{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ps extends Et{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function D0(e){return O(e)&&e.name==="AuthImplicitGrantRedirectError"}class Wu extends Et{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class U0 extends Et{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ja extends Et{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function xo(e){return O(e)&&e.name==="AuthRetryableFetchError"}class qu extends Et{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Na extends Et{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const vi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hu=` 	
\r=`.split(""),$0=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Hu.length;t+=1)e[Hu[t].charCodeAt(0)]=-2;for(let t=0;t<vi.length;t+=1)e[vi[t].charCodeAt(0)]=t;return e})();function Ku(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(vi[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(vi[n]),t.queuedBits-=6}}function Th(e,t,r){const n=$0[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Gu(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{B0(o,n,r)};for(let o=0;o<e.length;o+=1)Th(e.charCodeAt(o),s,i);return t.join("")}function M0(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function z0(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}M0(n,t)}}function B0(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Gr(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Th(e.charCodeAt(s),r,n);return new Uint8Array(t)}function F0(e){const t=[];return z0(e,r=>t.push(r)),new Uint8Array(t)}function or(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Ku(s,r,n)),Ku(null,r,n),t.join("")}function V0(e){return Math.round(Date.now()/1e3)+e}function W0(){return Symbol("auth-callback")}const ge=()=>typeof window<"u"&&typeof document<"u",Yt={tested:!1,writable:!1},Ah=()=>{if(!ge())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yt.tested)return Yt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Yt.tested=!0,Yt.writable=!0}catch{Yt.tested=!0,Yt.writable=!1}return Yt.writable};function q0(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Oh=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),H0=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Nr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Qt=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},me=async(e,t)=>{await e.removeItem(t)};class Mi{constructor(){this.promise=new Mi.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Mi.promiseConstructor=Promise;function Is(e){const t=e.split(".");if(t.length!==3)throw new Na("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!R0.test(t[n]))throw new Na("JWT not in base64url format");return{header:JSON.parse(Gu(t[0])),payload:JSON.parse(Gu(t[1])),signature:Gr(t[2]),raw:{header:t[0],payload:t[1]}}}async function K0(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function G0(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function J0(e){return("0"+e.toString(16)).substr(-2)}function Y0(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,J0).join("")}async function Q0(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function X0(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Q0(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _r(e,t,r=!1){const n=Y0();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Nr(e,`${t}-code-verifier`,s);const i=await X0(n);return[i,n===i?"plain":"s256"]}const Z0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function eg(e){const t=e.headers.get(Ea);if(!t||!t.match(Z0))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function tg(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function rg(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ng=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function br(e){if(!ng.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _o(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sg(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function Ju(e){return JSON.parse(JSON.stringify(e))}const er=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ig=[502,503,504];async function Yu(e){var t;if(!H0(e))throw new ja(er(e),0);if(ig.includes(e.status))throw new ja(er(e),e.status);let r;try{r=await e.json()}catch(i){throw new rr(er(i),i)}let n;const s=eg(e);if(s&&s.getTime()>=Ch["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new qu(er(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new $e}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new qu(er(r),e.status,r.weak_password.reasons);throw new I0(er(r),e.status||500,n)}const og=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function P(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Ea]||(i[Ea]=Ch["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await ag(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(u):{data:Object.assign({},u),error:null}}async function ag(e,t,r,n,s,i){const o=og(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(u){throw console.error(u),new ja(er(u),0)}if(l.ok||await Yu(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(u){await Yu(u)}}function et(e){var t;let r=null;cg(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=V0(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Qu(e){const t=et(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Rt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function lg(e){return{data:e,error:null}}function ug(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=Di(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function Xu(e){return e}function cg(e){return e.access_token&&e.refresh_token&&e.expires_in}const bo=["global","local","others"];class dg{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Oh(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=bo[0]){if(bo.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bo.join(", ")}`);try{return await P(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(O(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await P(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Rt})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Di(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await P(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:ug,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(O(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await P(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Rt})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=await P(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Xu});if(d.error)throw d.error;const p=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(u=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return f.length>0&&(f.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(y.split(";")[1].split("=")[1]);c[`${_}Page`]=w}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(O(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){br(t);try{return await P(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Rt})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){br(t);try{return await P(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Rt})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){br(t);try{return await P(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Rt})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){br(t.userId);try{const{data:r,error:n}=await P(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(O(r))return{data:null,error:r};throw r}}async _deleteFactor(t){br(t.userId),br(t.id);try{return{data:await P(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=await P(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Xu});if(d.error)throw d.error;const p=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(u=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return f.length>0&&(f.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(y.split(";")[1].split("=")[1]);c[`${_}Page`]=w}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(O(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await P(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await P(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await P(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(O(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await P(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await P(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}}function Zu(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const kr={debug:!!(globalThis&&Ah()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Rh extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class hg extends Rh{}async function fg(e,t,r){kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),kr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new hg(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(kr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function pg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ph(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function mg(e){return parseInt(e,16)}function gg(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function vg(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:u,resources:c,scheme:d,uri:p,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const f=Ph(e.address),y=d?`${d}://${n}`:n,w=e.statement?`${e.statement}
`:"",_=`${y} wants you to sign in with your Ethereum account:
${f}

${w}`;let v=`URI: ${p}
Version: ${h}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(v+=`
Expiration Time: ${s.toISOString()}`),l&&(v+=`
Not Before: ${l.toISOString()}`),u&&(v+=`
Request ID: ${u}`),c){let m=`
Resources:`;for(const g of c){if(!g||typeof g!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${g}`);m+=`
- ${g}`}v+=m}return`${_}
${v}`}class oe extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class yi extends oe{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function yg({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new oe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new oe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new oe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new oe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new oe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new oe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new oe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new oe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(Ih(o)){if(i.rp.id!==o)return new oe({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new oe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new oe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new oe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new oe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function wg({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new oe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new oe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(Ih(n)){if(r.rpId!==n)return new oe({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new oe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new oe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new oe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class xg{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const _g=new xg;function bg(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=Di(e,["challenge","user","excludeCredentials"]),i=Gr(t).buffer,o=Object.assign(Object.assign({},r),{id:Gr(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const c=n[u];l.excludeCredentials[u]=Object.assign(Object.assign({},c),{id:Gr(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return l}function kg(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Di(e,["challenge","allowCredentials"]),s=Gr(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Gr(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Sg(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:or(new Uint8Array(e.response.attestationObject)),clientDataJSON:or(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Eg(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:or(new Uint8Array(s.authenticatorData)),clientDataJSON:or(new Uint8Array(s.clientDataJSON)),signature:or(new Uint8Array(s.signature)),userHandle:s.userHandle?or(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Ih(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function ec(){var e,t;return!!(ge()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function jg(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new yi("Browser returned unexpected credential type",t)}:{data:null,error:new yi("Empty credential response",t)}}catch(t){return{data:null,error:yg({error:t,options:e})}}}async function Ng(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new yi("Browser returned unexpected credential type",t)}:{data:null,error:new yi("Empty credential response",t)}}catch(t){return{data:null,error:wg({error:t,options:e})}}}const Cg={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Tg={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function wi(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=wi(l,o):n[i]=wi(o)}else n[i]=o}return n}function Ag(e,t){return wi(Cg,e,t||{})}function Og(e,t){return wi(Tg,e,t||{})}class Rg{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const u=s??_g.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=Ag(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:p}=await jg({publicKey:c,signal:u});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}case"request":{const c=Og(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:p}=await Ng(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:u}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}}}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new rr("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new es("rpId is required for WebAuthn authentication")};try{if(!ec())return{data:null,error:new rr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:u}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:u.type,rpId:r,rpOrigins:n,credential_response:u.credential_response}})}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new rr("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new es("rpId is required for WebAuthn registration")};try{if(!ec())return{data:null,error:new rr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var p;return(p=d.data)===null||p===void 0?void 0:p.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:u,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return u?this._verify({factorId:o.id,challengeId:u.challengeId,webauthn:{rpId:r,rpOrigins:n,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:c}}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new rr("Unexpected error in register",o)}}}}pg();const Pg={url:T0,storageKey:A0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:O0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function tc(e,t,r){return await r()}const Sr={};class ts{get jwks(){var t,r;return(r=(t=Sr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Sr[this.storageKey]=Object.assign(Object.assign({},Sr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Sr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Sr[this.storageKey]=Object.assign(Object.assign({},Sr[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Pg),t);if(this.storageKey=i.storageKey,this.instanceID=(r=ts.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,ts.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&ge()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new dg({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Oh(i.fetch),this.lock=i.lock||tc,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&ge()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=fg:this.lock=tc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Rg(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Ah()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Zu(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Zu(this.memoryStorage)),ge()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Nh}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(ge()&&(r=q0(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),ge()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),D0(i)){const u=(t=i.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return O(r)?this._returnResult({error:r}):this._returnResult({error:new rr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:et}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:c,session:u},error:null})}catch(i){if(O(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:p,options:h}=t;let f=null,y=null;this.flowType==="pkce"&&([f,y]=await _r(this.storage,this.storageKey)),i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:p,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:y},xform:et})}else if("phone"in t){const{phone:d,password:p,options:h}=t;i=await P(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:et})}else throw new Rs("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await me(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:c,session:u},error:null})}catch(i){if(await me(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qu})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await P(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qu})}else throw new Rs("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new xr;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,l,u,c,d,p,h;let f,y;if("message"in t)f=t.message,y=t.signature;else{const{chain:w,wallet:_,statement:v,options:m}=t;let g;if(ge())if(typeof _=="object")g=_;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")g=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=_}const x=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href),S=await g.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=Ph(S[0]);let N=(n=m==null?void 0:m.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!N){const L=await g.request({method:"eth_chainId"});N=mg(L)}const k={domain:x.host,address:E,statement:v,uri:x.href,version:"1",chainId:N,nonce:(s=m==null?void 0:m.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=m==null?void 0:m.signInWithEthereum)===null||d===void 0?void 0:d.resources};f=vg(k),y=await g.request({method:"personal_sign",params:[gg(f),E]})}try{const{data:w,error:_}=await P(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:y},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:et});if(_)throw _;if(!w||!w.session||!w.user){const v=new xr;return this._returnResult({data:{user:null,session:null},error:v})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:_})}catch(w){if(O(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var r,n,s,i,o,l,u,c,d,p,h,f;let y,w;if("message"in t)y=t.message,w=t.signature;else{const{chain:_,wallet:v,statement:m,options:g}=t;let x;if(ge())if(typeof v=="object")x=v;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))x=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=v}const S=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in x&&x.signIn){const E=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),m?{statement:m}:null));let N;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")N=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)N=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)y=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),w=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${S.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((p=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...g.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const E=await x.signMessage(new TextEncoder().encode(y),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=E}}try{const{data:_,error:v}=await P(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:or(w)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:et});if(v)throw v;if(!_||!_.session||!_.user){const m=new xr;return this._returnResult({data:{user:null,session:null},error:m})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:v})}catch(_){if(O(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(t){const r=await Qt(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new U0;const{data:i,error:o}=await P(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:et});if(await me(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new xr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await me(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:et}),{data:u,error:c}=l;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!u||!u.session||!u.user){const d=new xr;return this._returnResult({data:{user:null,session:null},error:d})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:c})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:u}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await _r(this.storage,this.storageKey));const{error:p}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},create_user:(n=u==null?void 0:u.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:l,options:u}=t,{data:c,error:d}=await P(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(o=u==null?void 0:u.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new Rs("You must provide either an email or phone number.")}catch(l){if(await me(this.storage,`${this.storageKey}-code-verifier`),O(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await P(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:et});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,c=o.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:c,session:u},error:null})}catch(s){if(O(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let l=null,u=null;this.flowType==="pkce"&&([l,u]=await _r(this.storage,this.storageKey));const c=await P(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:lg});return!((i=c.data)===null||i===void 0)&&i.url&&ge()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(l){if(await me(this.storage,`${this.storageKey}-code-verifier`),O(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new $e;const{error:s}=await P(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(O(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await P(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await P(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Rs("You must provide either an email or phone number and a type")}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Qt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<yo:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Qt(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=_o()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=sg(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Rt}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $e}:await P(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Rt})})}catch(r){if(O(r))return wo(r)&&(await this._removeSession(),await me(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new $e;const o=s.session;let l=null,u=null;this.flowType==="pkce"&&t.email!=null&&([l,u]=await _r(this.storage,this.storageKey));const{data:c,error:d}=await P(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:Rt});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await me(this.storage,`${this.storageKey}-code-verifier`),O(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new $e;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Is(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:u}=await this._getUser(t.access_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(O(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new $e;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!ge())throw new Ps("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ps(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Wu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ps("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Wu("No code detected.");const{data:m,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:u,token_type:c}=t;if(!i||!l||!o||!c)throw new Ps("No session defined in URL");const d=Math.round(Date.now()/1e3),p=parseInt(l);let h=d+p;u&&(h=parseInt(u));const f=h-d;f*1e3<=jr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${p}s`);const y=h-p;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,d);const{data:w,error:_}=await this._getUser(i);if(_)throw _;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:h,refresh_token:o,token_type:c,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:t.type},error:null})}catch(n){if(O(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Qt(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i&&!wo(i))return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(L0(l)&&(l.status===404||l.status===401||l.status===403)||wo(l)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await me(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=W0(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await _r(this.storage,this.storageKey,!0));try{return await P(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await me(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,u,c,d;const{data:p,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await P(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(c=p.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return ge()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(O(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:l,token:u,access_token:c,nonce:d}=t,p=await P(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:u,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:et}),{data:h,error:f}=p;return f?this._returnResult({data:{user:null,session:null},error:f}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new xr}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:f}))}catch(s){if(await me(this.storage,`${this.storageKey}-code-verifier`),O(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await P(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await G0(async s=>(s>0&&await K0(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await P(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:et})),(s,i)=>{const o=200*Math.pow(2,s);return i&&xo(i)&&Date.now()+o-n<jr})}catch(n){if(this._debug(r,"error",n),O(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ge()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Qt(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Qt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Nr(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:_o()}else if(s&&!s.user&&!s.user){const o=await Qt(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await me(this.storage,this.storageKey+"-user"),await Nr(this.storage,this.storageKey,s)):s.user=_o()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<yo;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${yo}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),xo(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new $e;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Mi;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new $e;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),O(i)){const o={data:null,error:i};return xo(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(u){i.push(u)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await me(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Nr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Ju(s);await Nr(this.storage,this.storageKey,i)}else{const s=Ju(r);await Nr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await me(this.storage,this.storageKey),await me(this.storage,this.storageKey+"-code-verifier"),await me(this.storage,this.storageKey+"-user"),this.userStorage&&await me(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ge()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),jr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/jr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${jr}ms, refresh threshold is ${Sa} ticks`),s<=Sa&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Rh)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ge()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await _r(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await P(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:c}=await P(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&u.type==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Sg(t.webauthn.credential_response):Eg(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:u}=await P(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:u}))})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await P(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:bg(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:kg(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,s,i;if(t)try{const{payload:f}=Is(t);let y=null;f.aal&&(y=f.aal);let w=y;const{data:{user:_},error:v}=await this.getUser(t);if(v)return this._returnResult({data:null,error:v});((n=(r=_==null?void 0:_.factors)===null||r===void 0?void 0:r.filter(x=>x.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(w="aal2");const g=f.amr||[];return{data:{currentLevel:y,nextLevel:w,currentAuthenticationMethods:g},error:null}}catch(f){if(O(f))return this._returnResult({data:null,error:f});throw f}const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Is(o.access_token);let c=null;u.aal&&(c=u.aal);let d=c;((i=(s=o.user.factors)===null||s===void 0?void 0:s.filter(f=>f.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(d="aal2");const h=u.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await P(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new $e})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new $e});const o=await P(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ge()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new $e});const o=await P(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ge()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await P(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new $e})})}catch(t){if(O(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await P(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new $e})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+P0>s)return n;const{data:i,error:o}=await P(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:f,error:y}=await this.getSession();if(y||!f.session)return this._returnResult({data:null,error:y});n=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:u}}=Is(n);r!=null&&r.allowExpired||tg(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const d=rg(s.alg),p=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,p,o,F0(`${l}.${u}`)))throw new Na("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}}ts.nextInstanceID={};const Ig=ts,Lg="2.93.2";let bn="";typeof Deno<"u"?bn="deno":typeof document<"u"?bn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bn="react-native":bn="node";const Dg={"X-Client-Info":`supabase-js-${bn}/${Lg}`},Ug={headers:Dg},$g={schema:"public"},Mg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zg={};function rs(e){"@babel/helpers - typeof";return rs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rs(e)}function Bg(e,t){if(rs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fg(e){var t=Bg(e,"string");return rs(t)=="symbol"?t:t+""}function Vg(e,t,r){return(t=Fg(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rc(Object(r),!0).forEach(function(n){Vg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rc(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Wg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),qg=()=>Headers,Hg=(e,t,r)=>{const n=Wg(r),s=qg();return async(i,o)=>{var l;const u=(l=await t())!==null&&l!==void 0?l:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),n(i,ee(ee({},o),{},{headers:c}))}};function Kg(e){return e.endsWith("/")?e:e+"/"}function Gg(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:u,auth:c,realtime:d,global:p}=t,h={db:ee(ee({},u),s),auth:ee(ee({},c),i),realtime:ee(ee({},d),o),storage:{},global:ee(ee(ee({},p),l),{},{headers:ee(ee({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function Jg(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Kg(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Yg=class extends Ig{constructor(e){super(e)}},Qg=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=Jg(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:$g,realtime:zg,auth:ee(ee({},Mg),{},{storageKey:o}),global:Ug},u=Gg(r??{},l);if(this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=u.auth)!==null&&c!==void 0?c:{},this.headers,u.global.fetch)}this.fetch=Hg(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(ee({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new Im(new URL("rest/v1",i).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new C0(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Tm(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:l,debug:u,throwOnError:c},d,p){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Yg({url:this.authUrl.href,headers:ee(ee({},h),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:l,debug:u,throwOnError:c,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Qm(this.realtimeUrl.href,ee(ee({},e),{},{params:ee(ee({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Xg=(e,t,r)=>new Qg(e,t,r);function Zg(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Zg()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ko={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SITE_URL:"http://localhost:5173",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV6aWtsbmRxbmR6dGpzeGJvemZjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4NTY5MjUsImV4cCI6MjA4MzQzMjkyNX0.5hIdEdaNOCHIfUhRX2Fx8cyS68bKzTrt3wYw9M1cioc",VITE_SUPABASE_URL:"https://eziklndqndztjsxbozfc.supabase.co"},ev=e=>typeof e!="string"?"":e.trim().replace(/['"]/g,""),So=(e,t="")=>{try{const r=ko==null?void 0:ko[e];return r!==void 0?ev(r):t}catch{return t}},ns={SUPABASE_URL:So("VITE_SUPABASE_URL","https://eziklndqndztjsxbozfc.supabase.co"),SUPABASE_ANON_KEY:So("VITE_SUPABASE_ANON_KEY","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV6aWtsbmRxbmR6dGpzeGJvemZjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4NTY5MjUsImV4cCI6MjA4MzQzMjkyNX0.5hIdEdaNOCHIfUhRX2Fx8cyS68bKzTrt3wYw9M1cioc"),SITE_URL:So("VITE_SITE_URL","https://webapp-adalparedes.vercel.app")},tv=()=>!!ns.SUPABASE_URL&&!!ns.SUPABASE_ANON_KEY,rv=ns.SUPABASE_URL,nv=ns.SUPABASE_ANON_KEY,ne=Xg(rv,nv,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:"ap_core_session_v6"},global:{headers:{"x-application-name":"adal-paredes-ai-core"}}}),Lh=b.createContext(void 0),sv=({children:e})=>{const[t,r]=b.useState(null),[n,s]=b.useState(null),[i,o]=b.useState(!1),[l,u]=b.useState(!0),[c,d]=b.useState(null),p=()=>d(null),h=b.useCallback(async(w,_)=>{if(tv())try{const{data:v,error:m}=await ne.from("profiles").select("*").eq("id",w).single();if(m)throw m;if(v){const g=v,x=_.toLowerCase()==="ap@adalparedes.com",S=!!g.is_admin||x;o(S);const E={id:g.id,fullName:g.full_name||"",email:_,username:g.username,gender:g.gender||"other",ageRange:g.age_range||"18-29",membership:S?"ADMIN":(g.plan||"free").toUpperCase(),balance:S?9999:g.credits||0};return s(E),E}}catch{console.warn("[Auth] Error fetching remote profile.")}},[]),f=b.useCallback(async()=>{try{const{data:{session:w}}=await ne.auth.getSession();w!=null&&w.user&&await h(w.user.id,w.user.email||"")}catch{console.warn("[Auth] Error en refreshProfile.")}},[h]);b.useEffect(()=>{let w=!0;(async()=>{try{const{data:{session:m},error:g}=await ne.auth.getSession();if(g)throw g;w&&(m&&(r(m),h(m.user.id,m.user.email||"")),u(!1))}catch{w&&u(!1)}})();const{data:{subscription:v}}=ne.auth.onAuthStateChange(async(m,g)=>{w&&(r(g),g?(h(g.user.id,g.user.email||""),u(!1)):(s(null),o(!1)))});return()=>{w=!1,v.unsubscribe()}},[h]);const y=b.useMemo(()=>({user:n,session:t,isLoading:l,isAdmin:i,isGuest:!t,error:c,clearError:p,signUp:async(w,_,v)=>{const{error:m}=await ne.auth.signUp({email:w,password:_,options:{data:{...v,plan:"free",credits:3},emailRedirectTo:ns.SITE_URL}});if(m)throw d(m.message),m},signIn:async(w,_)=>{const{error:v}=await ne.auth.signInWithPassword({email:w,password:_});if(v)throw d(v.message),v},signOut:async()=>{try{await ne.auth.signOut()}finally{r(null),s(null),o(!1)}},refreshProfile:f,resetPassword:async w=>{const{error:_}=await ne.auth.resetPasswordForEmail(w);if(_)throw d(_.message),_}}),[n,t,l,i,f,c]);return a.jsx(Lh.Provider,{value:y,children:e})},an=()=>{const e=b.useContext(Lh);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},iv=({onEnter:e})=>{const{user:t}=an();return a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center p-6 animate-in zoom-in slide-in-from-bottom duration-1000",children:[a.jsxs("div",{className:"relative mb-8 group",children:[a.jsx("div",{className:"absolute inset-0 bg-[#00ff88] rounded-full blur-2xl opacity-20 group-hover:opacity-40 transition-opacity duration-500 animate-pulse"}),a.jsx("div",{className:"absolute -inset-4 border-2 border-[#00ff88]/30 rounded-full animate-ping opacity-20"}),a.jsx("div",{className:"relative w-32 h-32 md:w-40 md:h-40 flex items-center justify-center bg-black/40 backdrop-blur-sm rounded-full border border-white/10 shadow-[0_0_30px_rgba(0,255,136,0.2)] overflow-hidden animate-float",children:a.jsx("img",{src:"https://res.cloudinary.com/dv1yofc8f/image/upload/v1767857953/ap_dp_1_cnobg3.png",alt:"Adal Paredes Logo",className:"w-full h-full object-contain scale-90 group-hover:scale-100 transition-transform duration-700"})})]}),a.jsx("h1",{className:"text-2xl md:text-4xl font-orbitron font-bold text-white mb-3 tracking-tight uppercase",children:t?`HOLA DE NUEVO, ${t.username}!`:"PUM! ERES HUMANO "}),a.jsxs("div",{className:"max-w-2xl mb-12",children:[a.jsx("p",{className:"text-[#00ff88] font-orbitron text-base md:text-lg font-bold mb-6 uppercase drop-shadow-[0_0_8px_rgba(0,255,136,0.3)] tracking-widest",children:t?"TU NODO SIGUE ACTIVO Y SINCRONIZADO.":"TU NUEVO COPILOTO IT DE CONFIANZA."}),a.jsxs("div",{className:"relative p-6 md:p-8 bg-white/[0.03] backdrop-blur-xl border border-white/10 rounded-3xl shadow-2xl overflow-hidden group/box",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-[#00ff88] to-transparent opacity-50"}),a.jsx("p",{className:"text-gray-100 font-mono text-sm md:text-base leading-relaxed uppercase tracking-wide",children:t?a.jsxs(a.Fragment,{children:["Haz clic abajo para ",a.jsx("span",{className:"text-[#00ff88] font-bold",children:"reanudar tus operaciones"})," de inmediato sin volver a registrar tus credenciales."]}):a.jsxs(a.Fragment,{children:["Migramos de un simple blog a ser el ",a.jsx("span",{className:"text-[#00ff88] font-bold underline decoration-2 underline-offset-4",children:"copiloto de tu da a da"}),".",a.jsx("br",{className:"hidden md:block"}),"Dudas ",a.jsx("span",{className:"text-[#00d2ff] font-bold",children:"#tech"}),", cdigo que ",a.jsx("span",{className:"text-red-400 font-bold",children:"no compila"})," o cualquier otro",a.jsx("span",{className:"text-white font-bold px-2 bg-white/10 rounded mx-1 italic",children:"drama digital"}),"... aqu te ayudo."]})}),a.jsx("div",{className:"absolute bottom-2 right-4 text-[10px] text-[#00ff88] opacity-20 font-mono hidden md:block tracking-widest",children:"ADAL_CORE_V3_ONLINE"})]})]}),a.jsxs("button",{onClick:e,className:"group relative px-12 py-5 font-orbitron font-bold text-base tracking-widest overflow-hidden transition-all duration-300 active:scale-95 shadow-[0_0_30px_rgba(0,255,136,0.4)] bg-[#00ff88] text-black hover:bg-white hover:shadow-[0_0_50px_rgba(0,255,136,0.6)] rounded-sm",children:[a.jsx("span",{className:"relative z-10 uppercase",children:t?"Reanudar Sesin":"Entrar al Portal"}),a.jsx("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-20 transform -skew-x-12 translate-x-full group-hover:translate-x-0 transition-transform duration-500"}),a.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse opacity-0 group-hover:opacity-100 transition-opacity"})]}),a.jsxs("div",{className:"mt-16 grid grid-cols-2 md:grid-cols-4 gap-8 opacity-90",children:[a.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[a.jsx("span",{className:"text-[10px] text-[#00ff88] font-mono font-bold tracking-[0.2em] mb-1",children:"BLOCKS"}),a.jsx("span",{className:"text-xs font-bold font-mono text-white",children:"#842,109"})]}),a.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[a.jsx("span",{className:"text-[10px] text-[#00ff88] font-mono font-bold tracking-[0.2em] mb-1",children:"SESSION"}),a.jsx("span",{className:"text-xs font-bold font-mono text-white uppercase",children:t?"RESTORED":"NEW"})]}),a.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[a.jsx("span",{className:"text-[10px] text-[#00ff88] font-mono font-bold tracking-[0.2em] mb-1",children:"CORE_REV"}),a.jsx("span",{className:"text-xs font-bold font-mono text-white uppercase",children:"V3.1.2"})]}),a.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[a.jsx("span",{className:"text-[10px] text-[#00ff88] font-mono font-bold tracking-[0.2em] mb-1",children:"AUTH_MODE"}),a.jsx("span",{className:"text-xs font-bold font-mono text-white uppercase",children:t?"BYPASS_ON":"NORMAL"})]})]}),a.jsx("style",{children:`
        @keyframes float {
          0%, 100% { transform: translateY(0px); }
          50% { transform: translateY(-10px); }
        }
        .animate-float {
          animation: float 4s ease-in-out infinite;
        }
      `})]})},ov=({onAuthSuccess:e})=>{const{signIn:t,signUp:r,resetPassword:n,clearError:s}=an(),[i,o]=b.useState(!0),[l,u]=b.useState(!1),[c,d]=b.useState(!1),[p,h]=b.useState(null),[f,y]=b.useState(null),[w,_]=b.useState(!1),v=b.useRef(0),m=5e3,[g,x]=b.useState({fullName:"",email:"",username:"",password:""}),S=k=>k.trim().replace(/<[^>]*>?/gm,""),E=async k=>{k.preventDefault();const L=Date.now();if(L-v.current<m){h("DEMASIADOS INTENTOS. Espera un momento antes de reintentar.");return}v.current=L,d(!0),h(null),y(null),s();try{if(l)await n(g.email),y("LINK DE RECUPERACIN ENVIADO.");else if(i)await t(g.email,g.password),e({});else{const R=S(g.username).toLowerCase(),re=S(g.fullName);if(R.length<3){h("EL USERNAME DEBE TENER AL MENOS 3 CARACTERES."),d(!1);return}await r(g.email,g.password,{username:R,fullName:re}),y("CUENTA CREADA. VERIFICA TU EMAIL."),o(!0)}}catch(R){R.status===429?h("LMITE DE INTENTOS SUPERADO. Por seguridad, tu acceso ha sido bloqueado temporalmente."):h((R==null?void 0:R.message)||"ERROR DE CONEXIN.")}finally{d(!1)}},N=()=>l?"#a855f7":i?"#00d2ff":"#00ff88";return a.jsx("div",{className:"w-full max-w-md mx-auto p-4 animate-in fade-in duration-500",children:a.jsxs("div",{className:"relative overflow-hidden bg-black/90 backdrop-blur-2xl border border-white/10 rounded-3xl p-8 shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-current to-transparent",style:{color:N()}}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-2xl font-orbitron font-bold tracking-widest uppercase text-white",children:l?"Reset Access":i?"INICIAR SESIN":"CREAR CUENTA"}),p&&a.jsx("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/30 text-red-400 text-[10px] uppercase rounded-xl",children:p}),f&&a.jsx("div",{className:"mt-4 p-3 bg-[#00ff88]/10 border border-[#00ff88]/20 text-[#00ff88] text-[10px] uppercase rounded-xl",children:f})]}),a.jsxs("form",{onSubmit:E,className:"space-y-4",children:[!i&&!l&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("input",{required:!0,name:"fullName",placeholder:"NOMBRE COMPLETO",value:g.fullName,onChange:k=>x({...g,fullName:k.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl p-3 text-xs text-white focus:border-[#00ff88] outline-none"}),a.jsx("input",{required:!0,name:"username",placeholder:"USERNAME",value:g.username,onChange:k=>x({...g,username:k.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl p-3 text-xs text-white focus:border-[#00ff88] outline-none"})]}),a.jsx("input",{required:!0,type:"email",name:"email",placeholder:"EMAIL",value:g.email,onChange:k=>x({...g,email:k.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl p-3 text-xs text-white outline-none focus:border-current",style:{color:N()}}),!l&&a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{required:!0,type:w?"text":"password",name:"password",placeholder:"CONTRASEA",value:g.password,onChange:k=>x({...g,password:k.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl p-3 pr-10 text-xs text-white outline-none focus:border-current",style:{borderColor:N()+"44"}}),a.jsx("button",{type:"button",onClick:()=>_(!w),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-white transition-colors","aria-label":w?"Ocultar contrasea":"Mostrar contrasea",children:w?a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})}),a.jsx("button",{disabled:c,className:"w-full py-4 rounded-xl font-orbitron font-bold text-[11px] uppercase tracking-widest transition-all shadow-lg active:scale-95 flex items-center justify-center gap-3",style:{backgroundColor:N(),color:"#000"},children:c?"SINCRONIZANDO...":l?"ENVIAR LINK":i?"INICIAR SESIN":"CREAR CUENTA"})]}),a.jsxs("div",{className:"mt-8 pt-4 border-t border-white/5 flex flex-col items-center gap-5",children:[a.jsx("button",{onClick:()=>{o(!i),u(!1)},className:"text-[10px] font-orbitron font-bold uppercase text-[#00ff88] transition-all hover:scale-105",children:i?a.jsx("span",{className:"flex items-center gap-2",children:"NUEVO AQU? REGSTRATE "}):"YA ERES MIEMBRO? LOGUATE"}),i&&a.jsxs("button",{onClick:()=>{u(!0),o(!1)},className:"text-[12px] font-bold text-[#a855f7] hover:text-white uppercase flex items-center gap-2 transition-colors",children:[a.jsx("span",{children:""})," Olvidaste tu contrasea?"]})]})]})})},av="modulepreload",lv=function(e){return"/"+e},nc={},qe=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=lv(u),u in nc)return;nc[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":av,c||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),c)return new Promise((h,f)=>{p.addEventListener("load",h),p.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function Dh(){const{session:e}=an(),[t,r]=b.useState([]),[n,s]=b.useState(!0),[i,o]=b.useState(null),l=b.useCallback(async()=>{var d;if((d=e==null?void 0:e.user)!=null&&d.id){s(!0),o(null);try{const{data:p,error:h}=await ne.from("notifications").select("*").eq("user_id",e.user.id).order("created_at",{ascending:!1}).limit(20);if(h)throw h;r(p||[])}catch(p){const h=(p==null?void 0:p.message)||"Error de conexin con el nodo de alertas.";console.warn("[Notifications] Fetch fail:",h),o(h)}finally{s(!1)}}},[e]),u=b.useCallback(async d=>{var p;if((p=e==null?void 0:e.user)!=null&&p.id)try{let h=ne.from("notifications").update({is_read:!0}).eq("user_id",e.user.id);d?h=h.eq("id",d):h=h.eq("is_read",!1);const{error:f}=await h;if(f)throw f;r(y=>y.map(w=>(d?w.id===d:!w.is_read)?{...w,is_read:!0}:w))}catch(h){console.error("[Notifications] Mark read error:",(h==null?void 0:h.message)||h)}},[e]);b.useEffect(()=>{var d;if((d=e==null?void 0:e.user)!=null&&d.id){l();const p=ne.channel(`notifications_realtime_${e.user.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${e.user.id}`},h=>{r(f=>[h.new,...f].slice(0,20))}).subscribe();return()=>{ne.removeChannel(p)}}},[e,l]);const c=b.useMemo(()=>t.filter(d=>!d.is_read).length,[t]);return{notifications:t,unreadCount:c,loading:n,error:i,reload:l,markAsRead:u}}const vn=async()=>{const{data:{session:e},error:t}=await ne.auth.getSession();if(t||!e)throw new Error("SESIN_EXPIRADA: Reautenticacin requerida.");return e},Uh=(e,t)=>{if(t)return null;switch((e||"free").toLowerCase()){case"free":case"piojoso":return 5;case"bronze":case"novato":case"novata":return 20;case"silver":case"jefe":case"patrona":return 50;case"gold":case"rey":case"reina":case"premium":return 100;default:return 5}},Cr={async fetchConversations(e,t){await vn();let r=ne.from("conversations").select("*").eq("user_id",e).eq("archived",!1).order("created_at",{ascending:!1});t!==null&&(r=r.limit(t));const{data:n,error:s}=await r;if(s)throw s;return n},async fetchMessages(e){await vn();const{data:t,error:r}=await ne.from("messages").select("*").eq("conversation_id",e).order("created_at",{ascending:!0});if(r)throw r.code==="PGRST116"?new Error("CONVERSACIN_INEXISTENTE"):r;return t.map(n=>({id:n.id.toString(),role:n.sender,content:n.content,timestamp:new Date(n.created_at).getTime(),model:n.model}))},async createConversation(e,t,r,n){if((await vn()).user.id!==e)throw new Error("DETECCIN_DE_SUPLANTACIN");const i=(t||"Nuevo Comando").replace(/<[^>]*>?/gm,"").replace(/[^\x20-\x7E\u00C0-\u00FF]/g,"").substring(0,40).trim(),o=Uh(r,n);if(o!==null){const{count:c,error:d}=await ne.from("conversations").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("archived",!1);if(d)throw d;if(c!==null&&c>=o){const{data:p,error:h}=await ne.from("conversations").select("id").eq("user_id",e).eq("archived",!1).order("created_at",{ascending:!0}).limit(1);if(h)throw new Error("LMITE_ALCANZADO: Error al verificar el historial antiguo.");if(p&&p.length>0){const f=p[0].id;console.log(`[CONV_LIMIT] Lmite (${o}) alcanzado. Archivando la conversacin ms antigua: ${f}`);const{error:y}=await ne.from("conversations").update({archived:!0}).eq("id",f);if(y)throw new Error("LMITE_ALCANZADO: Fallo al archivar el historial antiguo.")}}}const{data:l,error:u}=await ne.from("conversations").insert({user_id:e,title:i,is_favorite:!1,archived:!1}).select().single();if(u)throw u.message.includes("RLS")||u.code==="42501"?new Error("OPERACIN_BLOQUEADA_POR_SEGURIDAD"):u;return l},async saveMessage(e,t,r){if((await vn()).user.id!==e)throw new Error("FALLO_INTEGRIDAD_USUARIO");const{error:s}=await ne.from("messages").insert({conversation_id:t,sender:r.role,content:r.content,model:r.model||"GEMINI"});if(s)throw s.message.includes("credits")||s.code==="42501"?new Error("SALDO_INSUFICIENTE_O_ERROR_DE_PERMISOS"):new Error("ERROR_REGISTRO_DATOS")},async deleteConversation(e,t){if((await vn()).user.id!==e)throw new Error("OPERACIN_NO_AUTORIZADA");const{error:n}=await ne.from("conversations").delete().eq("id",t).eq("user_id",e);if(n)throw new Error("FALLO_PURGA_MEMORIA");return!0}},uv=({user:e,conversations:t,activeId:r,onSelectConv:n,onOpenModal:s,onSignOutRequest:i,isOpen:o=!1,onClose:l,onConversationDeleted:u})=>{var E,N;const[c,d]=b.useState(!1),[p,h]=b.useState(null),{session:f,isAdmin:y}=an(),{unreadCount:w}=Dh(),_=b.useRef(0),v=3e3,g=["JEFE","PATRONA","REY","REINA","ADMIN"].includes((E=e.membership)==null?void 0:E.toUpperCase())||["NOVATO","NOVATA","PREMIUM"].includes((N=e.membership)==null?void 0:N.toUpperCase()),x=k=>{s(k),window.innerWidth<1024&&(l==null||l())},S=async(k,L)=>{var re;k.stopPropagation();const R=Date.now();if(R-_.current<v){alert("Comandos de purga demasiado rpidos.");return}if(!(!((re=f==null?void 0:f.user)!=null&&re.id)||p)&&window.confirm("Confirmas la purga permanente de este historial?")){_.current=R,h(L);try{await Cr.deleteConversation(f.user.id,L),u==null||u(L)}catch{alert("Fallo en la purga del nodo.")}finally{h(null)}}};return a.jsxs(a.Fragment,{children:[o&&a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] lg:hidden",onClick:l}),a.jsxs("div",{className:`fixed lg:relative inset-y-0 left-0 z-[110] lg:z-50 w-72 bg-[#050505] border-r border-white/5 flex flex-col transition-transform duration-300 ${o?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:[a.jsxs("div",{className:"p-6 border-b border-white/5 flex items-center justify-between bg-black/40",children:[a.jsx(wh,{className:"scale-90"}),a.jsx("button",{onClick:l,className:"lg:hidden p-2 text-gray-500 hover:text-white transition-colors",children:a.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar flex flex-col p-4 space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:()=>x("notifications"),className:"w-full flex items-center justify-between p-3.5 bg-white/5 border border-white/10 rounded-xl group hover:border-[#00d2ff]/40 transition-all",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-lg group-hover:scale-110 transition-transform",children:""}),a.jsx("span",{className:"text-[10px] font-orbitron font-bold text-white tracking-widest uppercase",children:"Alertas"})]}),w>0&&a.jsx("span",{className:"bg-[#ff3131] text-white text-[8px] font-bold px-1.5 py-0.5 rounded-md animate-pulse",children:w})]}),a.jsxs("button",{onClick:()=>x("balance"),className:"w-full flex items-center justify-between p-3 bg-[#00d2ff]/10 border border-[#00d2ff]/20 rounded-xl group hover:bg-[#00d2ff]/20 transition-all",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsx("span",{className:"text-[10px] font-orbitron font-bold text-[#00d2ff] tracking-widest uppercase",children:"Crditos"})]}),a.jsx("span",{className:"text-[10px] text-white font-mono opacity-50",children:e.balance.toFixed(0)})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"px-2 text-[8px] font-mono text-gray-600 uppercase tracking-[0.2em] mb-2",children:"Intel & Core"}),["news","crypto","tutorials","humor"].map(k=>a.jsxs("button",{onClick:()=>x(k),className:"w-full flex items-center gap-3 p-2.5 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-all text-left group",children:[a.jsx("span",{className:"group-hover:rotate-12 transition-transform",children:k==="news"?"":k==="crypto"?"":k==="tutorials"?"":""}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:k==="news"?"Noticias Tech":k==="crypto"?"Cripto Intel":k==="tutorials"?"Tutoriales":"Humor"})]},k))]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"px-2 text-[8px] font-mono text-gray-600 uppercase tracking-[0.2em] mb-2",children:"Ecosistema A P"}),a.jsxs("button",{onClick:()=>x("store"),className:"w-full flex items-center gap-3 p-2.5 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-all text-left group",children:[a.jsx("span",{children:""}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Tienda Online"})]}),a.jsxs("button",{onClick:()=>x("services"),className:"w-full flex items-center gap-3 p-2.5 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-all text-left group",children:[a.jsx("span",{children:""}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Servicios Pro"})]}),a.jsxs("button",{onClick:()=>x("tools"),disabled:!g,className:`w-full flex items-center justify-between p-2.5 rounded-lg transition-all text-left group ${g?"text-gray-400 hover:text-white hover:bg-white/5":"text-gray-700 cursor-not-allowed opacity-40"}`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{children:""}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Cyber Tools"})]}),!g&&a.jsx("span",{className:"text-[7px] border border-red-500/30 text-red-500 px-1 rounded",children:"VIP"})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col min-h-[200px]",children:[a.jsx("p",{className:"px-2 text-[8px] font-mono text-gray-600 uppercase tracking-[0.2em] mb-2",children:"Memoria de Comandos"}),a.jsx("div",{className:"space-y-1 overflow-y-auto custom-scrollbar flex-1 pr-1",children:t.map(k=>a.jsxs("div",{className:"group/item relative",children:[a.jsxs("button",{onClick:()=>{n(k.id),window.innerWidth<1024&&(l==null||l())},className:`w-full text-left p-2.5 pr-10 rounded-lg flex items-center gap-3 transition-all ${r===k.id?"bg-[#00d2ff]/10 text-[#00d2ff]":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,children:[a.jsx("div",{className:`w-1 h-1 rounded-full ${r===k.id?"bg-[#00d2ff]":"bg-gray-700"}`}),a.jsx("span",{className:"text-[10px] font-bold truncate uppercase",children:k.title||"Comando AI"})]}),a.jsx("button",{onClick:L=>S(L,k.id),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 opacity-0 group-hover/item:opacity-100 text-gray-600 hover:text-red-500 transition-all",children:a.jsx("svg",{width:"12",height:"12",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},k.id))})]})]}),a.jsxs("div",{className:"p-4 border-t border-white/5 bg-black/60 backdrop-blur-xl",children:[a.jsxs("button",{onClick:()=>d(!c),className:"w-full flex items-center gap-3 p-2 rounded-xl hover:bg-white/5 transition-all",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-[#00d2ff] to-[#005f73] flex items-center justify-center text-[11px] font-bold text-black font-orbitron shadow-[0_0_15px_rgba(0,210,255,0.2)]",children:e.username.substring(0,2).toUpperCase()}),a.jsxs("div",{className:"flex-1 text-left min-w-0",children:[a.jsx("span",{className:"text-xs font-bold text-white block truncate",children:e.username}),a.jsx("span",{className:`text-[8px] uppercase font-mono tracking-tighter ${y?"text-red-500 font-black":"text-gray-500"}`,children:y?"GOD_MODE":`${e.membership} Node`})]}),a.jsx("svg",{width:"12",height:"12",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",className:c?"rotate-180":"",children:a.jsx("path",{d:"M5 15l7-7 7 7"})})]}),c&&a.jsxs("div",{className:"absolute bottom-full left-4 right-4 mb-2 bg-[#0a0a0a] border border-white/10 rounded-2xl p-2 shadow-2xl animate-in slide-in-from-bottom-4 duration-300",children:[a.jsxs("button",{onClick:()=>x("profile"),className:"w-full flex items-center gap-3 p-2.5 hover:bg-white/5 rounded-xl transition-all text-left",children:[a.jsx("span",{children:""}),a.jsx("span",{className:"text-[10px] font-bold uppercase text-gray-300",children:"Perfil de Nodo"})]}),a.jsxs("button",{onClick:()=>x("personalization"),className:"w-full flex items-center gap-3 p-2.5 hover:bg-white/5 rounded-xl transition-all text-left",children:[a.jsx("span",{children:""}),a.jsx("span",{className:"text-[10px] font-bold uppercase text-gray-300",children:"Personalizar"})]}),a.jsxs("button",{onClick:()=>x("membership"),className:"w-full flex items-center gap-3 p-2.5 hover:bg-[#00ff88]/10 rounded-xl transition-all text-left group",children:[a.jsx("span",{className:"group-hover:animate-bounce",children:""}),a.jsx("span",{className:"text-[10px] font-bold uppercase text-[#00ff88]",children:"Membresa"})]}),a.jsx("div",{className:"h-[1px] bg-white/5 my-1"}),a.jsxs("button",{onClick:i,className:"w-full flex items-center gap-3 p-2.5 hover:bg-red-500/10 rounded-xl transition-all text-left text-red-500",children:[a.jsx("span",{children:""}),a.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Desconectar"})]})]})]})]})]})},cv=b.memo(uv),dv=e=>{const t=(e==null?void 0:e.toLowerCase())||"";return t.includes("gemini")?{color:"#00d2ff",shadow:"rgba(0, 210, 255, 0.5)"}:t.includes("openai")?{color:"#10a37f",shadow:"rgba(16, 163, 127, 0.5)"}:t.includes("deepseek")?{color:"#a855f7",shadow:"rgba(168, 85, 247, 0.5)"}:{color:"#ffffff",shadow:"rgba(255, 255, 255, 0.2)"}},hv=({msg:e,isLastMessage:t,isTyping:r,onSpeakToggle:n,playingMessageId:s})=>{const i=e.role==="user",o=e.isError===!0,l=dv(e.model),u=s===e.id;return a.jsx("div",{className:`flex ${i?"justify-end":"justify-start"} animate-in fade-in slide-in-from-bottom-4 duration-500`,children:a.jsxs("div",{className:`max-w-[90%] md:max-w-[80%] p-4 md:p-6 rounded-[1.5rem] transition-all relative group ${i?"bg-[#00d2ff] text-black font-bold shadow-2xl rounded-tr-none":o?"bg-red-950/50 border border-red-500/30 text-white rounded-tl-none":"bg-black border border-white/10 text-white rounded-tl-none"}`,style:!i&&!o?{boxShadow:`0 0 30px ${l.shadow}`,borderColor:`${l.color}44`}:{},children:[o&&a.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-3 border-b border-red-500/20",children:[a.jsx("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",className:"text-red-400 shrink-0",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),a.jsx("h4",{className:"text-[10px] font-orbitron font-bold text-red-400 uppercase tracking-widest",children:"Fallo de Sincronizacin"})]}),a.jsxs("div",{className:`text-sm md:text-base whitespace-pre-wrap leading-relaxed ${o?"text-red-300 font-mono":""}`,children:[e.content||"Sincronizando...",r&&t&&e.role==="assistant"&&a.jsx("span",{className:"inline-block w-2 h-5 ml-1 animate-pulse align-middle",style:{backgroundColor:l.color}})]}),!i&&!o&&e.content&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-white/5 flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"text-[8px] font-mono tracking-widest uppercase font-black opacity-60",style:{color:l.color},children:[" NODO_",e.model||"GEMINI"]}),a.jsxs("div",{className:"flex gap-2 opacity-60 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>n(e.content,e.id),className:`p-1.5 rounded-lg transition-all active:scale-90 flex items-center gap-1.5 ${u?"bg-[#00ff88]/20 text-[#00ff88]":"bg-white/5 text-gray-500 hover:text-white hover:bg-white/10"}`,title:u?"Detener lectura":"Leer respuesta",children:u?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"relative flex h-2 w-2",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#00ff88] opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-[#00ff88]"})]}),a.jsx("span",{className:"text-[9px] font-bold",children:"STOP"})]}):a.jsx("svg",{width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})})}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(e.content),alert("Copiado al portapapeles")},className:"p-1.5 rounded-lg bg-white/5 text-gray-500 hover:text-white hover:bg-white/10 transition-all active:scale-90",title:"Copiar texto",children:a.jsx("svg",{width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]})]})})},fv=b.memo(hv),pv=e=>e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;"):"",mv={gemini:"Modelo balanceado y rpido, ideal para tareas generales y creativas.",openai:"Modelo avanzado y potente, excelente para razonamiento complejo y anlisis.",deepseek:"Modelo especializado en cdigo, perfecto para programacin y tareas tcnicas."},gv=({user:e,conversation:t,onSendMessage:r,isTyping:n,enabledModels:s,isLoadingHistory:i,selectedModel:o,onSelectModel:l,preferredLanguage:u="es-MX"})=>{const c=b.useRef(null),d=b.useRef(null),p=b.useRef(null),[h,f]=b.useState(""),[y,w]=b.useState(null),[_,v]=b.useState(!1),[m,g]=b.useState(null),[x,S]=b.useState(""),E="escribe aqui... (Shift+Enter para saltar linea)";b.useEffect(()=>{let D=0;const B=setInterval(()=>{S(E.slice(0,D)),D++,D>E.length&&(D=0)},120);return()=>clearInterval(B)},[]),b.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[t==null?void 0:t.messages,n]),b.useEffect(()=>{p.current&&(p.current.style.height="auto",p.current.style.height=`${Math.min(p.current.scrollHeight,120)}px`)},[h]);const N=()=>{const D=window.SpeechRecognition||window.webkitSpeechRecognition;if(!D){alert("Tu navegador no soporta dictado por voz.");return}if(_){v(!1);return}const B=new D;B.lang=u,B.continuous=!1,B.interimResults=!1,B.onstart=()=>v(!0),B.onend=()=>v(!1),B.onerror=()=>v(!1),B.onresult=ie=>{const Te=ie.results[0][0].transcript;f(z=>(z+" "+Te).trim())},B.start()},k=b.useCallback((D,B)=>{if(m===B){window.speechSynthesis.cancel(),g(null);return}window.speechSynthesis.cancel();const ie=new SpeechSynthesisUtterance(D);ie.lang=u;const Te=window.speechSynthesis.getVoices(),z=Te.find(C=>C.lang===u)||Te[0];z&&(ie.voice=z),ie.onend=()=>g(null),ie.onerror=()=>g(null),g(B),window.speechSynthesis.speak(ie)},[m,u]);b.useEffect(()=>()=>window.speechSynthesis.cancel(),[]);const L=()=>{!h.trim()&&!y||n||(r(h,o,y||void 0),f(""),w(null),p.current&&(p.current.style.height="auto"),_&&v(!1))},R=D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),L())},re=D=>{const B=(D==null?void 0:D.toLowerCase())||"";return B.includes("gemini")?{color:"#00d2ff",shadow:"rgba(0, 210, 255, 0.5)"}:B.includes("openai")?{color:"#10a37f",shadow:"rgba(16, 163, 127, 0.5)"}:B.includes("deepseek")?{color:"#a855f7",shadow:"rgba(168, 85, 247, 0.5)"}:{color:"#ffffff",shadow:"rgba(255, 255, 255, 0.2)"}},pe=re(o);return a.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-[#050505] h-full relative",children:[a.jsx("div",{ref:c,className:"flex-1 overflow-y-auto p-4 md:p-8 space-y-8 custom-scrollbar scroll-smooth pb-32 md:pb-8",children:i?a.jsxs("div",{className:"h-full flex flex-col items-center justify-center space-y-4",children:[a.jsxs("div",{className:"relative w-16 h-16",children:[a.jsx("div",{className:"absolute inset-0 border-4 border-[#00d2ff]/20 rounded-full"}),a.jsx("div",{className:"absolute inset-0 border-4 border-[#00d2ff] border-t-transparent rounded-full animate-spin"}),a.jsx("div",{className:"absolute inset-4 bg-[#00d2ff]/10 rounded-full animate-pulse"})]}),a.jsx("p",{className:"text-[10px] font-orbitron font-bold text-[#00d2ff] uppercase tracking-[0.3em] animate-pulse",children:"Cargando Memoria..."})]}):a.jsx(a.Fragment,{children:t?t.messages.map((D,B)=>{const ie=B===t.messages.length-1;return a.jsx(fv,{msg:D,isLastMessage:ie,isTyping:n,onSpeakToggle:k,playingMessageId:m},D.id)}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center relative group",children:[a.jsx("div",{className:"absolute inset-0 opacity-5 pointer-events-none overflow-hidden",children:a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[400px] h-[400px] bg-gradient-to-r from-[#00d2ff] via-[#a855f7] to-[#00ff88] rounded-full blur-[100px]"})}),a.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6 text-center",children:[a.jsx("div",{className:"w-24 h-24 bg-black/50 border border-white/10 rounded-full flex items-center justify-center text-5xl shadow-[0_0_50px_rgba(0,210,255,0.1)]",children:""}),a.jsx("p",{className:"font-orbitron text-[12px] md:text-sm tracking-[0.6em] uppercase text-white/40 font-bold",children:"NODOS AI ONLINE"})]})]})})}),a.jsx("div",{className:"absolute bottom-0 left-0 w-full p-4 md:p-6 bg-[#050505] z-40 border-t border-white/5 md:relative pb-[120px] md:pb-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-2",children:[a.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:s.map(D=>{const B=re(D),ie=o===D;return a.jsxs("button",{onClick:()=>l(D),title:mv[D]||`Seleccionar modelo ${D}`,className:`px-3 py-1.5 rounded-full border text-[8px] font-orbitron font-bold uppercase transition-all flex items-center gap-1.5 shrink-0 ${ie?"bg-black text-white":"bg-black/40 border-white/10 text-gray-500 opacity-80 hover:opacity-100 hover:border-white/30"}`,style:ie?{color:B.color,boxShadow:`0 0 10px ${B.shadow}`,borderColor:B.color}:{},children:[a.jsx("span",{children:D==="gemini"?"":D==="openai"?"":""})," ",D]},D)})}),y&&a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-[#00d2ff]/10 border border-[#00d2ff]/30 rounded-full animate-in fade-in slide-in-from-bottom-2",children:[a.jsx("span",{className:"text-[10px] text-[#00d2ff]",children:""}),a.jsx("span",{className:"text-[9px] font-mono text-white truncate max-w-[100px]",children:pv(y.name)||"Archivo"}),a.jsx("button",{onClick:()=>w(null),className:"text-[10px] text-red-400 hover:text-white ml-1",children:""})]})]}),a.jsxs("div",{className:"relative bg-[#111111] border rounded-[1.5rem] p-2 flex items-end gap-2 shadow-lg transition-all duration-300 focus-within:shadow-[0_0_20px_rgba(0,210,255,0.1)]",style:{borderColor:`${pe.color}44`},children:[a.jsx("button",{onClick:()=>{var D;return(D=d.current)==null?void 0:D.click()},className:"p-3 mb-0.5 text-gray-500 hover:text-[#00d2ff] hover:bg-white/5 rounded-xl transition-all active:scale-90",title:"Adjuntar Imagen/Archivo",children:a.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.414a4 4 0 00-5.656-5.656l-6.415 6.414a6 6 0 108.486 8.486L20.5 13"})})}),a.jsx("input",{type:"file",ref:d,className:"hidden",accept:"image/*,application/pdf,text/plain",onChange:D=>{var ie;const B=(ie=D.target.files)==null?void 0:ie[0];if(B){const Te=new FileReader;Te.onload=z=>{var A;const C=((A=z.target)==null?void 0:A.result).split(",")[1];w({data:C,mimeType:B.type,name:B.name})},Te.readAsDataURL(B)}d.current&&(d.current.value="")}}),a.jsx("textarea",{ref:p,value:h,onChange:D=>f(D.target.value),onKeyDown:R,placeholder:x,rows:1,className:"flex-1 bg-transparent border-none outline-none text-white text-sm py-3 px-1 placeholder:text-gray-600 font-medium resize-none max-h-[120px] custom-scrollbar",style:{minHeight:"44px"}}),!h.trim()&&!y?a.jsx("button",{onClick:N,className:`p-3 mb-0.5 rounded-xl transition-all active:scale-90 ${_?"bg-red-500/20 text-red-500 animate-pulse":"text-gray-500 hover:text-white hover:bg-white/5"}`,title:"Dictado por Voz",children:a.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})}):null,(h.trim()||y)&&a.jsx("button",{onClick:L,disabled:n,className:"p-3 mb-0.5 rounded-xl transition-all active:scale-90 bg-white text-black hover:bg-[#00d2ff] hover:scale-105 shadow-lg",children:a.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})})]})]})})]})},vv=b.memo(gv),$h=b.createContext(void 0),yv=({children:e})=>{const[t,r]=b.useState([]),n=u=>{r(c=>c.find(p=>p.id===u.id)?c.map(p=>p.id===u.id?{...p,quantity:p.quantity+1}:p):[...c,u])},s=u=>{r(c=>c.filter(d=>d.id!==u))},i=()=>r([]),o=t.reduce((u,c)=>u+c.price*c.quantity,0),l=t.reduce((u,c)=>u+c.quantity,0);return a.jsx($h.Provider,{value:{items:t,addItem:n,removeItem:s,clearCart:i,total:o,itemCount:l},children:e})},wv=()=>{const e=b.useContext($h);if(!e)throw new Error("useCart must be used within CartProvider");return e},xv=({user:e,onOpenProfile:t,onOpenBalance:r,onOpenProductPayment:n,onToggleSidebar:s,timezone:i="America/Mexico_City"})=>{const{itemCount:o}=wv(),[l,u]=b.useState(""),[c,d]=b.useState("");return b.useEffect(()=>{const p=()=>{try{const f=new Date,y=new Intl.DateTimeFormat("en-GB",{timeZone:i,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),w=new Intl.DateTimeFormat("es-MX",{timeZone:i,day:"2-digit",month:"short"});u(y.format(f)),d(w.format(f).toUpperCase())}catch{u(new Date().toLocaleTimeString()),d(new Date().toLocaleDateString())}};p();const h=setInterval(p,1e3);return()=>clearInterval(h)},[i]),a.jsx("div",{className:"flex flex-col z-[60] sticky top-0",children:a.jsxs("div",{className:"h-20 md:h-24 border-b border-white/10 bg-black/90 backdrop-blur-3xl px-3 md:px-8 flex items-center justify-between relative overflow-hidden",children:[a.jsx("div",{className:"flex items-center z-10 min-w-[40px] gap-4",children:a.jsx("button",{onClick:s,className:"p-2.5 md:p-3 text-[#00d2ff] bg-white/5 border border-white/10 rounded-xl md:rounded-2xl hover:bg-[#00d2ff]/10 transition-all active:scale-90 shadow-lg lg:hidden",children:a.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",className:"md:w-6 md:h-6",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h12M4 18h16"})})})}),a.jsxs("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center text-center pointer-events-none select-none max-w-[120px] md:max-w-none transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 mb-0.5",children:[a.jsx("span",{className:"w-1 h-1 md:w-1.5 md:h-1.5 bg-[#00ff88] rounded-full animate-pulse shadow-[0_0_8px_#00ff88]"}),a.jsx("span",{className:"text-[13px] md:text-lg font-orbitron font-bold text-white tracking-tighter tabular-nums",children:l})]}),a.jsxs("div",{className:"hidden md:flex items-center gap-1.5",children:[a.jsx("span",{className:"text-[7px] md:text-[8px] text-[#00d2ff] font-mono font-bold uppercase tracking-[0.15em] opacity-80",children:c}),a.jsxs("span",{className:"text-[7px] text-gray-600 font-mono uppercase tracking-tighter",children:["[",i.split("/").pop(),"]"]})]}),a.jsx("div",{className:"md:hidden text-[7px] text-[#00d2ff] font-mono font-bold tracking-widest opacity-60",children:c})]}),a.jsxs("div",{className:"flex items-center gap-1.5 md:gap-3 z-10",children:[a.jsxs("button",{onClick:r,className:"flex items-center gap-1 md:gap-1.5 px-2 md:px-3 py-1.5 md:py-2 bg-black/40 border border-[#00d2ff]/30 rounded-lg md:rounded-xl hover:bg-[#00d2ff]/10 transition-all group active:scale-95 shadow-[0_0_15px_rgba(0,210,255,0.05)]",children:[a.jsx("span",{className:"text-[10px] md:text-base",children:""}),a.jsxs("div",{className:"flex flex-col items-start leading-none",children:[a.jsx("span",{className:"hidden md:block text-[6px] text-[#00d2ff] font-mono font-bold uppercase tracking-widest opacity-60",children:"Balance"}),a.jsxs("span",{className:"text-[9px] md:text-[10px] font-orbitron font-bold text-white tracking-tight",children:[e.balance.toFixed(0),a.jsx("span",{className:"md:hidden ml-0.5 opacity-40 text-[7px]",children:"c"}),a.jsx("span",{className:"hidden md:inline ml-0.5 opacity-40",children:"CR"})]})]})]}),a.jsxs("button",{onClick:n,className:`relative p-2 md:p-3 rounded-lg md:rounded-2xl transition-all border ${o>0?"border-[#00ff88]/50 bg-[#00ff88]/10 text-[#00ff88]":"border-white/10 bg-white/5 text-gray-500 hover:text-white"}`,children:[a.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",className:"md:w-5 md:h-5",children:a.jsx("path",{d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),o>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-[#ff3131] text-white text-[8px] w-4 h-4 rounded-full flex items-center justify-center border border-black animate-bounce",children:o})]}),a.jsx("button",{onClick:t,className:"w-8 h-8 md:w-12 md:h-12 rounded-lg md:rounded-xl bg-gradient-to-br from-[#00d2ff] to-[#005f73] border border-white/20 p-0.5 shadow-[0_0_20px_rgba(0,210,255,0.2)] hover:scale-105 active:scale-95 transition-all",children:a.jsx("div",{className:"w-full h-full bg-black/40 rounded-[6px] md:rounded-[10px] flex items-center justify-center text-[8px] md:text-xs font-bold text-white font-orbitron",children:e.username.substring(0,2).toUpperCase()})})]})]})})},_v=b.memo(xv),bv=()=>{const[e,t]=b.useState(!1),{notifications:r,unreadCount:n,loading:s,error:i,markAsRead:o,reload:l}=Dh(),u=b.useRef(null);b.useEffect(()=>{const f=y=>{y.key==="Escape"&&t(!1)};return e?(window.addEventListener("keydown",f),document.body.style.overflow="hidden"):document.body.style.overflow="auto",()=>{window.removeEventListener("keydown",f),document.body.style.overflow="auto"}},[e]);const c=()=>{const f=!e;t(f),f&&n>0&&setTimeout(()=>o(),3e3)},d=f=>{switch(f){case"payment":return"";case"membership":return"";case"promo":return"";default:return""}},p=f=>{switch(f){case"payment":return"text-[#00ff88]";case"membership":return"text-[#00d2ff]";case"promo":return"text-[#ff3131]";default:return"text-gray-400"}},h=[{name:"YouTube",url:"https://www.youtube.com/@adalparedes1",icon:"",color:"#ff0000"},{name:"X",url:"https://x.com/AdalParedes1",icon:"",color:"#ffffff"},{name:"TikTok",url:"https://www.tiktok.com/@adalparedes1",icon:"",color:"#00f2ea"}];return a.jsxs("div",{className:"relative inline-block",children:[a.jsxs("button",{onClick:c,className:`relative p-2.5 rounded-full transition-all border group active:scale-90 ${e?"bg-[#00d2ff]/20 border-[#00d2ff] text-[#00d2ff] shadow-[0_0_20px_rgba(0,210,255,0.4)]":"bg-white/5 border-white/10 text-gray-400 hover:text-[#00d2ff] hover:border-[#00d2ff]/30"}`,"aria-label":"Abrir notificaciones",children:[a.jsx("svg",{width:"22",height:"22",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),n>0&&a.jsxs("span",{className:"absolute -top-0.5 -right-0.5 flex h-5 w-5",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#ff3131] opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-5 w-5 bg-[#ff3131] border-2 border-black text-[9px] font-bold text-white items-center justify-center",children:n})]})]}),e&&a.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 animate-in fade-in duration-300",children:[a.jsx("div",{className:"absolute inset-0 bg-black/85 backdrop-blur-xl",onClick:()=>t(!1)}),a.jsxs("div",{ref:u,className:"relative w-full max-w-[360px] bg-[#0a0a0a] border border-white/10 rounded-[2.5rem] shadow-[0_50px_100px_rgba(0,0,0,1)] overflow-hidden flex flex-col animate-in zoom-in-95 duration-400",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[#00d2ff] via-[#00ff88] to-[#ff3131] animate-gradient-x"}),a.jsxs("div",{className:"p-6 border-b border-white/5 bg-white/5 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-2.5 h-2.5 bg-[#00ff88] rounded-full animate-pulse shadow-[0_0_10px_#00ff88]"}),a.jsx("h3",{className:"text-[11px] font-orbitron font-bold text-white tracking-[0.2em] uppercase",children:"Bfer de Alertas"})]}),a.jsx("button",{onClick:()=>t(!1),className:"p-2.5 bg-white/5 rounded-2xl text-gray-500 hover:text-white hover:bg-red-500/20 transition-all active:scale-90",children:a.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"3",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"max-h-[320px] overflow-y-auto custom-scrollbar bg-black/40",children:s?a.jsxs("div",{className:"py-20 flex flex-col items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 border-4 border-[#00d2ff]/20 border-t-[#00d2ff] rounded-full animate-spin"}),a.jsx("span",{className:"text-[10px] font-mono text-gray-600 uppercase tracking-widest",children:"Sincronizando..."})]}):i?a.jsxs("div",{className:"py-20 px-8 text-center space-y-4",children:[a.jsx("span",{className:"text-4xl block",children:""}),a.jsx("p",{className:"text-[10px] font-mono text-red-400 uppercase tracking-widest leading-relaxed",children:i}),a.jsx("button",{onClick:l,className:"px-6 py-2 bg-white/5 border border-white/10 rounded-lg text-[9px] font-bold uppercase hover:bg-white/10 transition-all",children:"Reintentar Enlace"})]}):r.length===0?a.jsxs("div",{className:"py-32 text-center space-y-4 opacity-30",children:[a.jsx("span",{className:"text-6xl block",children:""}),a.jsx("p",{className:"text-[10px] font-mono uppercase tracking-[0.4em]",children:"Sin transmisiones activas"})]}):a.jsx("div",{className:"divide-y divide-white/5",children:r.map(f=>a.jsxs("div",{className:`p-6 transition-all hover:bg-white/5 relative group/item ${f.is_read?"":"bg-[#00d2ff]/5"}`,children:[!f.is_read&&a.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-[#00d2ff] shadow-[0_0_15px_#00d2ff]"}),a.jsxs("div",{className:"flex gap-5",children:[a.jsx("span",{className:"text-4xl shrink-0 transition-transform group-hover/item:scale-110",children:d(f.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-start mb-1 gap-3",children:[a.jsx("h4",{className:`text-[11px] font-bold uppercase tracking-tight truncate ${p(f.type)}`,children:f.title}),a.jsx("span",{className:"text-[9px] font-mono text-gray-600 shrink-0",children:new Date(f.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),a.jsx("p",{className:"text-[11px] text-gray-400 leading-relaxed font-sans line-clamp-2",children:f.body||f.title})]})]})]},f.id))})}),a.jsx("div",{className:"p-8 bg-black/80 border-t border-white/5",children:a.jsxs("div",{className:"flex flex-col items-center gap-6",children:[a.jsx("span",{className:"text-[9px] font-orbitron font-bold text-gray-500 uppercase tracking-[0.4em]",children:"Conexin Core Social"}),a.jsx("div",{className:"flex justify-center gap-5",children:h.map(f=>a.jsx("a",{href:f.url,target:"_blank",rel:"noopener noreferrer",className:"w-12 h-12 bg-white/5 border border-white/10 rounded-2xl flex items-center justify-center text-2xl transition-all hover:scale-125 hover:border-current group/social active:scale-90 shadow-lg",style:{color:f.color},title:f.name,children:a.jsx("span",{className:"group-hover/social:drop-shadow-[0_0_15px_currentColor] transition-all filter grayscale hover:grayscale-0",children:f.icon})},f.name))}),a.jsx("button",{onClick:()=>t(!1),className:"w-full py-4 mt-2 bg-white/5 border border-white/10 rounded-2xl text-[10px] font-orbitron font-bold text-white hover:bg-white hover:text-black transition-all uppercase tracking-[0.3em]",children:"Cerrar Panel"})]})})]})]}),a.jsx("style",{children:`
        @keyframes gradient-x { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .animate-gradient-x { background-size: 200% 200%; animation: gradient-x 5s ease infinite; }
      `})]})},kv=({user:e,onOpenHistory:t,onOpenModal:r})=>a.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 w-full z-[90] flex flex-col bg-black/90 backdrop-blur-xl border-t border-white/10 shadow-[0_-10px_40px_rgba(0,0,0,0.8)] pb-safe transition-all duration-300",children:[a.jsxs("nav",{className:"flex justify-between items-center px-6 py-3",children:[a.jsxs("button",{onClick:t,className:"flex flex-col items-center gap-1.5 min-w-[50px] group active:scale-95 transition-all",children:[a.jsx("div",{className:"text-gray-500 group-active:text-[#00d2ff] transition-colors",children:a.jsx("svg",{width:"22",height:"22",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("span",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest group-active:text-[#00d2ff]",children:"Historial"})]}),a.jsxs("div",{className:"flex flex-col items-center min-w-[50px]",children:[a.jsx(bv,{}),a.jsx("span",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mt-1",children:"Alertas"})]}),a.jsx("div",{className:"relative -mt-10",children:a.jsxs("button",{onClick:()=>r("core_hub"),className:"bg-[#00ff88] text-black p-4 rounded-full shadow-[0_0_25px_rgba(0,255,136,0.5)] active:scale-90 transition-all border-[6px] border-[#050505] relative group z-10",children:[a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"group-hover:scale-110 transition-transform",children:a.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),a.jsx("div",{className:"absolute inset-0 bg-white/30 rounded-full animate-ping opacity-20 pointer-events-none"})]})}),a.jsxs("button",{onClick:()=>r("store"),className:"flex flex-col items-center gap-1.5 min-w-[50px] group active:scale-95 transition-all",children:[a.jsx("div",{className:"text-gray-500 group-active:text-[#00d2ff] transition-colors",children:a.jsx("svg",{width:"22",height:"22",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),a.jsx("span",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest group-active:text-[#00d2ff]",children:"Tienda"})]}),a.jsxs("button",{onClick:()=>r("profile"),className:"flex flex-col items-center gap-1.5 min-w-[50px] group active:scale-95 transition-all",children:[a.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-[#00d2ff] to-[#005f73] flex items-center justify-center text-[8px] font-bold text-black font-orbitron shadow-lg group-active:shadow-[#00d2ff]/50",children:e.username.substring(0,2).toUpperCase()}),a.jsx("span",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest group-active:text-[#00d2ff]",children:"Perfil"})]})]}),a.jsx("style",{children:`
        .pb-safe { padding-bottom: env(safe-area-inset-bottom, 20px); }
      `})]}),Sv=b.memo(kv),Ev=()=>{const[e,t]=b.useState({cpu:42,ram:18,ping:24});return b.useEffect(()=>{const r=setInterval(()=>{t({cpu:Math.floor(Math.random()*30+35),ram:Math.floor(Math.random()*7+15),ping:Math.floor(Math.random()*25+20)})},3e3);return()=>clearInterval(r)},[]),a.jsxs("div",{className:"hidden lg:flex flex-col gap-2 p-4 bg-black/40 border border-white/5 rounded-2xl backdrop-blur-md fixed right-6 bottom-32 z-20 animate-in fade-in slide-in-from-right duration-1000",children:[a.jsxs("div",{className:"flex items-center justify-between gap-8",children:[a.jsx("span",{className:"text-[8px] font-mono text-gray-500 uppercase tracking-widest",children:"Core_Load"}),a.jsx("div",{className:"w-20 h-1 bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-[#00d2ff] transition-all duration-1000",style:{width:`${e.cpu}%`}})})]}),a.jsxs("div",{className:"flex items-center justify-between gap-8",children:[a.jsx("span",{className:"text-[8px] font-mono text-gray-500 uppercase tracking-widest",children:"Neural_Buffer"}),a.jsx("div",{className:"w-20 h-1 bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-[#00ff88] transition-all duration-1000",style:{width:`${e.ram}%`}})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[8px] font-mono text-gray-500 uppercase tracking-widest",children:"Signal_Latency"}),a.jsxs("span",{className:"text-[9px] font-mono text-[#00d2ff] font-bold",children:[e.ping,"ms"]})]})]})},jv=b.memo(Ev),Nv=b.lazy(()=>qe(()=>import("./LoadBalance-DF-CULrL.js"),__vite__mapDeps([0,1,2]))),Cv=b.lazy(()=>qe(()=>import("./OnlineStore-DWQ9-Jbo.js"),__vite__mapDeps([3,1,2,0]))),Tv=b.lazy(()=>qe(()=>import("./OtherServices-B8lSGOZm.js"),__vite__mapDeps([4,1,2]))),Av=b.lazy(()=>qe(()=>import("./UserProfile-BhZUwApu.js"),__vite__mapDeps([5,1]))),Ov=b.lazy(()=>qe(()=>import("./PersonalizationModal-BwRxt1Hn.js"),__vite__mapDeps([6,1]))),Rv=b.lazy(()=>qe(()=>import("./SettingsModal-DYBcxWUL.js"),__vite__mapDeps([7,1]))),Pv=b.lazy(()=>qe(()=>import("./ContentModal-juAMqHcp.js"),__vite__mapDeps([8,1]))),Iv=b.lazy(()=>qe(()=>import("./MembershipModal-DFygydKZ.js"),__vite__mapDeps([9,1,2]))),Lv=b.lazy(()=>qe(()=>import("./ToolsModal-CpCZeWAF.js"),__vite__mapDeps([10,1]))),Dv=b.lazy(()=>qe(()=>import("./VipVaultModal-BAIz223g.js"),__vite__mapDeps([11,1]))),Uv=b.lazy(()=>qe(()=>import("./CoreHubModal-C0dKdI5V.js"),__vite__mapDeps([12,1]))),$v=b.lazy(()=>qe(()=>import("./NotificationsModal-CW2A1oam.js"),__vite__mapDeps([13,1]))),Mv=b.lazy(()=>qe(()=>import("./LogoutConfirm-CoL1vCBR.js"),[])),zv=["gemini","openai","deepseek"],Bv=e=>zv.includes(e),Fv=()=>a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:a.jsx("div",{className:"w-8 h-8 border-2 border-white border-t-transparent rounded-full animate-spin"})}),sc=e=>e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;"):"",Vv=(e,t)=>{const r=`El nodo ${t.toUpperCase()} no responde. Verifica tu conexin o intenta ms tarde.`;if(!e)return r;const n=e.toLowerCase();return n.includes("server_config_error")?`[FALLA DE INTEGRIDAD DEL SISTEMA]
El ncleo no puede comunicarse con los servicios de autenticacin. Las credenciales del servidor parecen estar desconfiguradas. El administrador ha sido notificado para una recalibracin inmediata.`:n.includes("failed to fetch")?`[ERROR DE RED]
No se pudo establecer conexin con el nodo ${t.toUpperCase()}. Tu conexin a internet parece inestable o el servidor no est accesible. Por favor, verifica tu red e intntalo de nuevo.`:n.includes("sesin_expirada")?`[FALLA DE SEGURIDAD]
Tu sesin ha expirado. Por favor, refresca la pgina para volver a iniciar sesin.`:n.includes("fallo_integridad_usuario")||n.includes("operacin_no_autorizada")?`[FALLA DE SEGURIDAD]
Tu sesin parece ser invlida. Intenta refrescar la pgina o volver a iniciar sesin.`:n.includes("api_key_missing")?`[ERROR DE ENLACE SEGURO]
La clave de API para el nodo ${t.toUpperCase()} no est configurada en el servidor. El administrador del sistema ha sido notificado.`:e.includes("429")||n.includes("lmite")?`[LMITE DE TASA EXCEDIDO]
Se han enviado demasiadas solicitudes al nodo ${t.toUpperCase()}. Por favor, espera unos momentos antes de volver a intentarlo.`:e.includes("500")||e.includes("502")||e.includes("503")?`[ERROR DEL NODO REMOTO]
El servidor de ${t.toUpperCase()} est experimentando problemas o est en mantenimiento. Intenta de nuevo ms tarde.`:e.includes("400")?`[SOLICITUD INVLIDA]
El comando enviado contiene un formato no vlido o no pudo ser procesado por el modelo. Intenta reformular tu pregunta.`:e.includes("401")||e.includes("403")?`[ERROR DE AUTENTICACIN]
Fallo de seguridad en la conexin con el servidor de ${t.toUpperCase()}. El administrador ha sido notificado.`:`[ERROR INESPERADO]
${e.replace(/ERROR_NODO_[A-Z]+:/,"").trim()||r}`},Wv=e=>({"Espaol (Mxico)":"es-MX","English (US)":"en-US",French:"fr-FR",German:"de-DE",Italian:"it-IT",Portuguese:"pt-BR",Japanese:"ja-JP",Korean:"ko-KR","Chinese (Simplified)":"zh-CN",Russian:"ru-RU",Arabic:"ar-SA",Hindi:"hi-IN"})[e]||"es-MX",qv=e=>{switch(e){case"gemini":return"/api/gemini";case"openai":return"/api/openai";case"deepseek":return"/api/deepseek";default:return console.warn(`Unsupported model selected: ${e}. Defaulting to Gemini.`),"/api/gemini"}},Hv=({user:e,onLogout:t})=>{var B,ie,Te;const{session:r,isAdmin:n,signOut:s,refreshProfile:i}=an(),[o,l]=b.useState([]),[u,c]=b.useState(null),[d,p]=b.useState(!1),[h,f]=b.useState(null),[y,w]=b.useState(!1),[_,v]=b.useState(!1),m=`ai_config_${((B=r==null?void 0:r.user)==null?void 0:B.id)||"guest"}`,g={role:"Estilo Original del Modelo",emojis:!0,nickname:e.username,timezone:"America/Mexico_City",enabledModels:["gemini","openai","deepseek"],language:"Espaol (Mxico)",selectedModel:"gemini"},[x,S]=b.useState(()=>{try{const z=localStorage.getItem(m);if(z){const C=JSON.parse(z);return{...g,...C,nickname:e.username}}}catch{console.warn("Could not parse stored AI config.")}return g});b.useEffect(()=>{x.nickname!==e.username&&S(z=>({...z,nickname:e.username}))},[e.username]),b.useEffect(()=>{try{localStorage.setItem(m,JSON.stringify(x))}catch{console.warn("Could not save AI config to storage.")}},[x,m]);const E=b.useRef(0),N=2500,k=b.useCallback(async()=>{var z,C;if((z=r==null?void 0:r.user)!=null&&z.id)try{const A=Uh(e.membership,n),$=(await Cr.fetchConversations(r.user.id,A)).map(H=>({id:H.id,title:H.title,messages:[]}));l($)}catch(A){(C=A.message)!=null&&C.includes("SESIN_EXPIRADA")&&s()}},[(ie=r==null?void 0:r.user)==null?void 0:ie.id,e.membership,n,s]),L=b.useCallback(async z=>{c(z);const C=o.find(A=>A.id===z);if(C&&C.messages.length===0){w(!0);try{const A=await Cr.fetchMessages(z);l(U=>U.map($=>$.id===z?{...$,messages:A}:$))}catch(A){console.error("Failed to fetch messages:",A)}finally{w(!1)}}},[o]);b.useEffect(()=>{k()},[k]);const R=async(z,C,A)=>{var lt,gr;if(!((lt=r==null?void 0:r.user)!=null&&lt.id)||d)return;const U=Date.now();if(U-E.current<N){const xe={id:`e_ratelimit_${Date.now()}`,role:"assistant",content:`[NCLEO SOBRECARGADO]
Has enviado comandos demasiado rpido. Por favor, espera un momento para permitir que el sistema se estabilice.`,timestamp:Date.now(),model:"SYSTEM",isError:!0},He=u||`conv_error_${Date.now()}`;if(!u){const Jt={id:He,title:"Error de Sistema",messages:[]};l(De=>[Jt,...De]),c(He)}l(Jt=>Jt.map(De=>De.id===He?{...De,messages:[...De.messages,xe]}:De));return}E.current=U;let $=u,H=z;!H.trim()&&A&&(H="Analiza el archivo adjunto y describe su contenido en detalle, siguiendo todas las dems instrucciones del sistema.");const Gt={id:`u_${Date.now()}`,role:"user",content:sc(z)+(A?" [ARCHIVO_ADJUNTO]":""),timestamp:Date.now()};try{if(!(r!=null&&r.access_token))throw new Error("SESIN_EXPIRADA: Tu sesin no es vlida. Refresca la pgina.");if(!$){const Ae=await Cr.createConversation(r.user.id,z||"Nuevo Comando",e.membership,n);$=Ae.id,l(Ue=>[{id:Ae.id,title:Ae.title,messages:[]},...Ue]),c($)}if(!$)throw new Error("Fallo al crear o identificar la conversacin.");await Cr.saveMessage(r.user.id,$,{...Gt,content:z}),l(Ae=>Ae.map(Ue=>Ue.id===$?{...Ue,messages:[...Ue.messages,Gt]}:Ue)),p(!0);const xe=`a_${Date.now()}`,He={id:xe,role:"assistant",content:"",timestamp:Date.now(),model:C.toUpperCase()};l(Ae=>Ae.map(Ue=>Ue.id===$?{...Ue,messages:[...Ue.messages,He]}:Ue));const Jt=`Tu identidad principal: Eres un experto en tecnologa de Mxico. Tu lenguaje OBLIGATORIO Y NICO es Espaol de Mxico. TODAS tus respuestas deben ser en este idioma, sin excepciones. Si un usuario te habla en otro idioma, responde en Espaol de Mxico que es tu nico canal de comunicacin. Mantn un tono profesional pero amigable. Ayuda al usuario '${x.nickname}'.`;let De="";switch(x.role){case"Hacker de lite":De=`Acta como un hacker de lite. Tu estilo es cyber-punk, directo, conciso y tcnico. Usa jerga de hacking. ${x.emojis?"Usa emojis temticos sutiles (, , ).":"No uses emojis."}`;break;case"Compaero creativo":De=`Acta como un compaero creativo. Tu enfoque es el brainstorming y las ideas innovadoras. S inspirador. ${x.emojis?"Usa emojis para expresar creatividad (, , ).":"No uses emojis."}`;break;default:De=`Mantn tu estilo original, pero s amigable y servicial. ${x.emojis?"Puedes usar emojis de forma sutil.":"No uses emojis."}`;break}const vr=`${Jt} ${De}`;let zi="";const zh=qv(C),Bh=`(RESPUESTA OBLIGATORIA EN ESPAOL DE MXICO) ${H}`,cs=await fetch(zh,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.access_token}`},body:JSON.stringify({model:C,system:vr,userContent:Bh,attachment:A,language:x.language})});if(!cs.ok||!cs.body){let Ae=await cs.text();try{Ae=JSON.parse(Ae).message||Ae}catch{}throw new Error(`ERROR_NODO_${C.toUpperCase()}: ${Ae}`)}const Fh=cs.body.getReader(),Vh=new TextDecoder;for(;;){const{done:Ae,value:Ue}=await Fh.read();if(Ae)break;const qh=Vh.decode(Ue,{stream:!0});zi+=sc(qh),l(Hh=>Hh.map(ds=>{if(ds.id===$){const Bi=[...ds.messages],Fi=Bi[Bi.length-1];return Fi&&Fi.id===xe&&(Fi.content=zi),{...ds,messages:Bi}}return ds}))}const Wh={id:xe,role:"assistant",content:zi||"Error de recepcin en el ncleo.",timestamp:Date.now(),model:C.toUpperCase()};await Cr.saveMessage(r.user.id,$,Wh),i()}catch(xe){if((gr=xe.message)!=null&&gr.includes("SESIN_EXPIRADA")){s(),window.location.reload();return}const He=Vv(xe.message,C),Jt={id:`e_${Date.now()}`,role:"assistant",content:He,timestamp:Date.now(),model:C.toUpperCase(),isError:!0};$&&l(De=>De.map(vr=>vr.id===$?{...vr,messages:[...vr.messages,Jt]}:vr))}finally{p(!1)}},re=z=>{const C=Bv(z)?z:"gemini";S(A=>A.selectedModel===C?A:{...A,selectedModel:C})},pe=o.find(z=>z.id===u),D=(Te=pe==null?void 0:pe.messages[pe.messages.length-1])==null?void 0:Te.content;return a.jsxs("div",{className:"flex h-screen w-full bg-[#050505] overflow-hidden relative",children:[a.jsx(cv,{user:e,conversations:o,activeId:u,onSelectConv:L,onOpenModal:f,onSignOutRequest:()=>f("logout"),isOpen:_,onClose:()=>v(!1),onConversationDeleted:z=>{l(C=>C.filter(A=>A.id!==z)),u===z&&c(null)}}),a.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[a.jsx(_v,{user:e,onOpenProfile:()=>f("profile"),onOpenBalance:()=>f("balance"),onOpenProductPayment:()=>f("store"),onToggleSidebar:()=>v(!_),timezone:x.timezone}),a.jsx(vv,{user:e,conversation:pe,onSendMessage:R,isTyping:d,enabledModels:x.enabledModels,isLoadingHistory:y&&!!u&&(pe==null?void 0:pe.messages.length)===0,selectedModel:x.selectedModel,onSelectModel:re,preferredLanguage:Wv(x.language)}),a.jsx(jv,{}),a.jsx(Sv,{user:e,onOpenHistory:()=>v(!0),onOpenModal:f})]}),a.jsxs(b.Suspense,{fallback:a.jsx(Fv,{}),children:[h==="logout"&&a.jsx(Mv,{onConfirm:t,onCancel:()=>f(null)}),h==="balance"&&a.jsx(Nv,{onClose:()=>f(null)}),h==="store"&&a.jsx(Cv,{onClose:()=>f(null)}),h==="services"&&a.jsx(Tv,{onClose:()=>f(null)}),h==="profile"&&a.jsx(Av,{user:e,onClose:()=>f(null)}),h==="personalization"&&a.jsx(Ov,{config:x,onClose:()=>f(null),onSave:S}),h==="settings"&&a.jsx(Rv,{config:x,onClose:()=>f(null),onSave:S}),h==="membership"&&a.jsx(Iv,{currentBalance:e.balance,onClose:()=>f(null)}),h==="tools"&&a.jsx(Lv,{user:e,onClose:()=>f(null),onUpgrade:()=>f("membership")}),h==="vip_vault"&&a.jsx(Dv,{user:e,onClose:()=>f(null),onUpgrade:()=>f("membership")}),h==="core_hub"&&a.jsx(Uv,{user:e,onClose:()=>f(null),onOpenModal:f,lastMessage:D}),h==="notifications"&&a.jsx($v,{onClose:()=>f(null)}),["news","crypto","tutorials","humor"].includes(h||"")&&a.jsx(Pv,{type:h,onClose:()=>f(null)})]})]})},Kv=()=>{const e=b.useRef(null);return b.useEffect(()=>{const t=e.current;if(!t)return;const r=t.getContext("2d");if(!r)return;let n=t.width=window.innerWidth,s=t.height=window.innerHeight;const i="01ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",o=14,l=n/o,u=Array.from({length:Math.ceil(l)}).map(()=>1),c=()=>{r.fillStyle="rgba(5, 5, 5, 0.05)",r.fillRect(0,0,n,s),r.fillStyle="#00d2ff",r.font=`${o}px monospace`;for(let h=0;h<u.length;h++){const f=i.charAt(Math.floor(Math.random()*i.length));r.fillText(f,h*o,u[h]*o),u[h]*o>s&&Math.random()>.975&&(u[h]=0),u[h]++}},d=()=>{n=t.width=window.innerWidth,s=t.height=window.innerHeight};window.addEventListener("resize",d);const p=setInterval(c,33);return()=>{clearInterval(p),window.removeEventListener("resize",d)}},[]),a.jsx("canvas",{ref:e,className:"fixed inset-0 pointer-events-none opacity-20 z-0"})},ic=()=>{const[e,t]=b.useState(null),r=(n,s)=>{navigator.clipboard.writeText(n),t(s),setTimeout(()=>t(null),2e3)};return a.jsx("div",{className:"w-full max-w-5xl mx-auto my-8 animate-in fade-in slide-in-from-bottom duration-1000 delay-300",children:a.jsxs("div",{className:"relative group overflow-hidden bg-gray-900/40 backdrop-blur-xl border border-white/10 rounded-2xl p-6 md:p-8 shadow-2xl mx-4 md:mx-0",children:[a.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[#00d2ff]/20 to-transparent opacity-30 group-hover:opacity-50 transition duration-1000"}),a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-6 md:gap-8",children:[a.jsx("div",{className:"flex-shrink-0 flex items-center justify-center w-full md:w-40",children:a.jsx("img",{src:"https://res.cloudinary.com/dv1yofc8f/image/upload/v1767856891/fox_bum_djceqz.png",alt:"Fox Bum",className:"w-24 h-auto max-h-24 md:w-36 md:max-h-36 object-contain drop-shadow-[0_0_15px_rgba(0,210,255,0.3)] hover:scale-110 transition-transform duration-500"})}),a.jsxs("div",{className:"flex-grow text-center",children:[a.jsx("h3",{className:"font-orbitron text-base md:text-2xl font-bold text-white mb-4 tracking-wider uppercase px-2",children:'"POR FAVOR DONA Y APOYA A UN TAZO DORADO"'}),a.jsx("button",{onClick:()=>window.open("https://donorbox.org/apoyo-a-creacion-de-proyectos-web","_blank"),className:"px-6 md:px-8 py-3 bg-[#00ff88] text-black font-orbitron font-bold text-xs md:text-sm tracking-[0.2em] rounded-sm hover:bg-white transition-all hover:shadow-[0_0_20px_rgba(0,255,136,0.5)] active:scale-95 uppercase",children:"APOYO VIA DONORBOX"})]}),a.jsxs("div",{className:"flex flex-col gap-3 w-full md:min-w-[300px] md:w-auto",children:[a.jsxs("div",{onClick:()=>r("33yi7TtyuGBe9PYFEhJnppuuDd8yYEVWKN","BTC"),className:"cursor-pointer bg-black/40 border border-white/5 p-3 rounded-lg hover:border-[#00d2ff]/50 transition-colors group/item active:bg-white/5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-[#f7931a] text-lg",children:""}),a.jsx("span",{className:"text-[9px] md:text-[10px] text-gray-400 font-mono font-bold uppercase tracking-widest",children:"Donar Bitcoin"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("code",{className:"text-[10px] md:text-xs text-white/70 font-mono truncate max-w-[180px] md:max-w-[200px]",children:"33yi7TtyuGBe...YEVWKN"}),a.jsx("span",{className:"text-[9px] text-[#00d2ff] ml-2 opacity-100 md:opacity-0 md:group-hover/item:opacity-100 transition-opacity whitespace-nowrap",children:e==="BTC"?"COPIADO!":"COPY"})]})]}),a.jsxs("div",{onClick:()=>r("0x196A45E803Ad6376C24c26dF8D64F08986298a31","ETH"),className:"cursor-pointer bg-black/40 border border-white/5 p-3 rounded-lg hover:border-[#00d2ff]/50 transition-colors group/item active:bg-white/5",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-[#627eea] text-lg",children:""}),a.jsx("span",{className:"text-[9px] md:text-[10px] text-gray-400 font-mono font-bold uppercase tracking-widest",children:"Donar Ethereum"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("code",{className:"text-[10px] md:text-xs text-white/70 font-mono truncate max-w-[180px] md:max-w-[200px]",children:"0x196A45E8...298a31"}),a.jsx("span",{className:"text-[9px] text-[#00d2ff] ml-2 opacity-100 md:opacity-0 md:group-hover/item:opacity-100 transition-opacity whitespace-nowrap",children:e==="ETH"?"COPIED!":"COPY"})]})]})]})]}),a.jsx("div",{className:"mt-6 md:mt-8 pt-4 border-t border-white/5 text-center",children:a.jsx("p",{className:"text-white text-[10px] md:text-[11px] font-mono tracking-tight opacity-80 px-2 leading-relaxed",children:"AMLO fue el peor presidente que ha tenido mxico / Viva la Libertad! "})})]})})},Gv=({onClose:e})=>{const[t,r]=b.useState({nombre:"",apellido:"",email:"",whatsapp:"",servicio:"asesoria_ia"}),[n,s]=b.useState("idle"),[i,o]=b.useState(!1),[l,u]=b.useState(""),c=b.useMemo(()=>{const y=Math.floor(Math.random()*9)+1,w=Math.floor(Math.random()*9)+1;return{question:`Cunto es ${y} + ${w}?`,answer:(y+w).toString()}},[]),d=l===c.answer,p=i&&d&&t.nombre&&t.email,h=async y=>{if(y.preventDefault(),!!p){s("sending");try{(await fetch("https://formspree.io/f/mykkgzgq",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({...t,_subject:`Nueva Solicitud de Servicio: ${t.servicio.toUpperCase()}`,consent:"Acept compartir datos para ser contactado por Adal Paredes",message:`El usuario ${t.nombre} ${t.apellido} ha solicitado el servicio de ${t.servicio}. Contacto: ${t.email} | WhatsApp: ${t.whatsapp||"No proporcionado"}`})})).ok?s("success"):(s("error"),setTimeout(()=>s("idle"),4e3))}catch(w){console.error("Formspree Error:",w),s("error"),setTimeout(()=>s("idle"),4e3)}}};if(n==="success")return a.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-gray-900 border border-[#00ff88] p-8 rounded-2xl max-w-sm w-full text-center shadow-[0_0_50px_rgba(0,255,136,0.2)]",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("h3",{className:"text-xl font-orbitron font-bold text-[#00ff88] mb-2 uppercase tracking-tighter",children:"Sincronizacin Exitosa!"}),a.jsx("p",{className:"text-gray-400 font-mono text-[10px] mb-6 uppercase leading-relaxed",children:"Tu solicitud ha sido inyectada en el ncleo de Adal Paredes. Responder a tu seal en menos de 24 ciclos."}),a.jsx("button",{onClick:e,className:"w-full py-4 bg-[#00ff88] text-black font-bold font-orbitron text-xs rounded-xl hover:bg-white transition-all uppercase tracking-widest",children:"VOLVER AL PORTAL"})]})});const f=[{name:"X",url:"https://x.com/AdalParedes1",icon:""},{name:"YouTube",url:"https://www.youtube.com/@adalparedes1",icon:""},{name:"TikTok",url:"https://www.tiktok.com/@adalparedes1",icon:""},{name:"Instagram",url:"#",icon:""}];return a.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-300 overflow-y-auto",children:a.jsxs("div",{className:"relative w-full max-w-2xl bg-[#0a0a0a] border border-[#00d2ff]/30 rounded-2xl shadow-[0_0_80px_rgba(0,210,255,0.15)] overflow-hidden animate-in zoom-in slide-in-from-bottom-4 duration-500",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[#00ff88] via-[#00d2ff] to-[#00ff88]"}),a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#00d2ff]/10 rounded-lg flex items-center justify-center border border-[#00d2ff]/30",children:a.jsx("span",{className:"text-xl",children:""})}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-orbitron font-bold text-white tracking-widest text-sm uppercase",children:"Canal de Contacto Directo"}),a.jsx("p",{className:"text-[11px] text-[#00ff88] font-mono font-bold uppercase tracking-tight drop-shadow-[0_0_5px_rgba(0,255,136,0.3)]",children:"Portal v3.0 // Anti-Spam Active"})]})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-white transition-colors",children:a.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"p-6 md:p-8 grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("form",{onSubmit:h,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[9px] font-mono text-gray-500 uppercase",children:"Nombre"}),a.jsx("input",{required:!0,value:t.nombre,onChange:y=>r({...t,nombre:y.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-xs focus:border-[#00ff88] outline-none text-white transition-all"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[9px] font-mono text-gray-500 uppercase",children:"Apellido"}),a.jsx("input",{required:!0,value:t.apellido,onChange:y=>r({...t,apellido:y.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-xs focus:border-[#00ff88] outline-none text-white transition-all"})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[9px] font-mono text-gray-500 uppercase",children:"Email de Contacto"}),a.jsx("input",{type:"email",required:!0,value:t.email,onChange:y=>r({...t,email:y.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-xs focus:border-[#00ff88] outline-none text-white transition-all"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[9px] font-mono text-gray-500 uppercase",children:"WhatsApp (Opcional)"}),a.jsx("input",{value:t.whatsapp,onChange:y=>r({...t,whatsapp:y.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-xs focus:border-[#00ff88] outline-none text-white transition-all",placeholder:"+52 ..."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[9px] font-mono text-gray-500 uppercase",children:"Servicio de Inters"}),a.jsxs("select",{value:t.servicio,onChange:y=>r({...t,servicio:y.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-xs focus:border-[#00ff88] outline-none text-white appearance-none cursor-pointer",children:[a.jsx("option",{value:"asesoria_ia",className:"bg-black text-white",children:"Asesora de IA"}),a.jsx("option",{value:"asesoria_cyber",className:"bg-black text-white",children:"Asesora Ciberseguridad"}),a.jsx("option",{value:"marketing",className:"bg-black text-white",children:"Marketing y Social Media"}),a.jsx("option",{value:"dev_web",className:"bg-black text-white",children:"Desarrollo Web / App"}),a.jsx("option",{value:"it_soporte",className:"bg-black text-white",children:"Soporte Cloud e IT"})]})]}),a.jsxs("div",{className:"p-3 bg-[#00d2ff]/5 border border-[#00d2ff]/20 rounded-xl flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-[8px] font-mono text-[#00d2ff] uppercase block mb-1",children:"Human Verification"}),a.jsx("p",{className:"text-[10px] text-white font-bold",children:c.question})]}),a.jsx("input",{type:"number",value:l,onChange:y=>u(y.target.value),className:`w-16 bg-black border ${d?"border-[#00ff88]":"border-white/20"} rounded-lg p-2 text-center text-xs text-white outline-none`,placeholder:"?"})]}),a.jsxs("div",{className:"flex items-start gap-3 cursor-pointer group",onClick:()=>o(!i),children:[a.jsx("div",{className:`mt-1 w-4 h-4 rounded border flex items-center justify-center transition-all ${i?"bg-[#00ff88] border-[#00ff88]":"bg-black border-white/20 group-hover:border-[#00ff88]/50"}`,children:i&&a.jsx("span",{className:"text-black text-[10px] font-bold",children:""})}),a.jsxs("p",{className:"text-[8px] text-gray-500 font-mono leading-tight uppercase select-none",children:["Confirmo que he ledo las ",a.jsx("span",{className:"text-[#00ff88]",children:"polticas de privacidad"})," y acepto compartir mis datos con la intencin expresa de ser contactado por ",a.jsx("span",{className:"text-white",children:"Adal Paredes"})," o su equipo tcnico."]})]}),n==="error"&&a.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 text-red-500 text-[9px] font-mono uppercase rounded animate-pulse",children:"Error de conexin. Reintenta en unos segundos."}),a.jsx("button",{type:"submit",disabled:n==="sending"||!p,className:`w-full py-4 font-orbitron font-bold text-[10px] tracking-widest uppercase rounded-xl transition-all shadow-[0_0_20px_rgba(0,210,255,0.2)] ${p?"bg-[#00d2ff] text-black hover:bg-[#00ff88]":"bg-gray-800 text-gray-500 cursor-not-allowed opacity-50"}`,children:n==="sending"?"TRANSMITIENDO...":"ENVIAR SOLICITUD"}),!p&&a.jsx("p",{className:"text-[7px] font-mono text-gray-600 text-center uppercase tracking-tighter",children:"Resuelve el reto matemtico y acepta trminos para habilitar envo"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-[10px] font-mono text-[#00ff88] uppercase mb-4 tracking-widest border-b border-white/5 pb-2",children:"Canales Alternativos"}),a.jsxs("div",{className:"grid grid-cols-1 gap-2.5",children:[a.jsxs("a",{href:"https://wa.me/521234567890",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 p-3 bg-[#00ff88]/5 border border-[#00ff88]/20 rounded-xl hover:bg-[#00ff88]/10 transition-all group",children:[a.jsx("span",{className:"text-xl",children:""}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs font-bold text-white group-hover:text-[#00ff88]",children:"WhatsApp Business"}),a.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:"Respuesta Directa"})]})]}),a.jsxs("a",{href:"https://t.me/adalparedes",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 p-3 bg-[#00d2ff]/5 border border-[#00d2ff]/20 rounded-xl hover:bg-[#00d2ff]/10 transition-all group",children:[a.jsx("span",{className:"text-xl",children:""}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs font-bold text-white group-hover:text-[#00d2ff]",children:"Telegram Channel"}),a.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:"Broadcast & Alerts"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-[10px] font-mono text-gray-500 uppercase mb-4 tracking-widest border-b border-white/5 pb-2",children:"Comunidad @adalparedes1"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:f.map(y=>a.jsxs("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-[9px] font-mono text-gray-400 hover:text-white hover:border-[#00d2ff] hover:bg-[#00d2ff]/5 transition-all uppercase tracking-tight",children:[a.jsx("span",{className:"text-xs",children:y.icon}),y.name]},y.name))})]}),a.jsxs("div",{className:"relative group overflow-hidden rounded-2xl",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#00d2ff]/20 via-[#00ff88]/10 to-transparent opacity-100 group-hover:scale-110 transition-transform duration-700"}),a.jsxs("div",{className:"relative p-5 border border-[#00d2ff]/40 bg-black/60 backdrop-blur-md",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-[#00ff88] rounded-full animate-pulse"}),a.jsx("span",{className:"text-[8px] font-orbitron font-bold text-[#00ff88] uppercase tracking-[0.2em]",children:"Core Mission"})]}),a.jsxs("p",{className:"text-[10px] font-orbitron font-bold text-white leading-relaxed italic uppercase tracking-tighter",children:['"Construyendo el futuro digital con ',a.jsx("span",{className:"text-[#00d2ff]",children:"inteligencia"}),", ",a.jsx("span",{className:"text-[#00ff88]",children:"seguridad"}),' y una arquitectura de vanguardia."']})]})]})]})]})]})})},Jv=({onClose:e})=>a.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-black/90 backdrop-blur-xl animate-in fade-in duration-300",children:a.jsxs("div",{className:"relative w-full max-w-2xl bg-[#0a0a0a] border border-[#00d2ff]/30 rounded-3xl shadow-[0_0_80px_rgba(0,210,255,0.2)] overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in duration-300",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[#00d2ff] via-white to-[#00d2ff]"}),a.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-white/5",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-sm font-orbitron font-bold text-white tracking-widest uppercase",children:"Trminos y Condiciones"}),a.jsx("p",{className:"text-[9px] font-mono text-[#00d2ff] uppercase tracking-tighter mt-1",children:"adalparedes.com  Enero 2026"})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-white transition-colors",children:a.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 font-sans text-sm text-gray-300 space-y-6 custom-scrollbar leading-relaxed",children:[a.jsx("p",{className:"font-mono text-[11px] text-[#00ff88] uppercase tracking-wide bg-[#00ff88]/5 p-3 border border-[#00ff88]/20 rounded-lg",children:"Contacto oficial: contacto@adalparedes.com"}),a.jsxs("p",{children:["Bienvenido a ",a.jsx("strong",{children:"adalparedes.com"}),", una plataforma digital interactiva que permite a los usuarios utilizar diferentes modelos de inteligencia artificial, comparar resultados, adquirir crditos, membresas y/o productos digitales o fsicos."]}),a.jsx("p",{children:"Al acceder o utilizar este sitio web y la web-app, usted acepta los presentes Trminos y Condiciones. Si no est de acuerdo, le recomendamos no utilizar el servicio."}),a.jsxs("section",{className:"space-y-3",children:[a.jsx("h3",{className:"text-[#00d2ff] font-orbitron font-bold text-xs uppercase tracking-widest",children:"1. Naturaleza del Servicio"}),a.jsx("p",{children:"adalparedes.com es una plataforma tecnolgica que permite: consultar, probar y comparar resultados de distintos modelos de IA; comprar crditos digitales para usar herramientas especficas; adquirir membresas con beneficios adicionales; y comprar mercanca fsica (merch)."}),a.jsx("p",{className:"italic text-[12px]",children:"El sitio no ofrece asesora profesional, financiera, mdica o legal. El uso es nicamente informativo y recreativo."})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsx("h3",{className:"text-[#00d2ff] font-orbitron font-bold text-xs uppercase tracking-widest",children:"2. Cuentas de Usuario"}),a.jsx("p",{children:"Nos reservamos el derecho de suspender, bloquear o eliminar cuentas que violen estos trminos. Los motivos incluyen abuso del sistema, manipulacin de la IA, solicitudes ilegales u obscenas, o intentos de mal uso para entrenar modelos externos."}),a.jsx("p",{className:"text-red-400 font-bold uppercase text-[10px]",children:"Si una cuenta es baneada por abuso, no estamos obligados a reembolsar crditos o membresas."})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsx("h3",{className:"text-[#00d2ff] font-orbitron font-bold text-xs uppercase tracking-widest",children:"3. Crditos y Saldo"}),a.jsx("p",{children:"Tiempo de procesamiento: de 1 a 30 das para que el saldo se refleje. Los crditos no tienen valor monetario fuera del sitio, no son transferibles y no garantizan resultados especficos."})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsx("h3",{className:"text-[#00d2ff] font-orbitron font-bold text-xs uppercase tracking-widest",children:"4. Membresas"}),a.jsx("p",{children:"Los precios pueden cambiar en cualquier momento, pero no afectar a quienes ya hayan comprado un plan previo. Cambios futuros aplicarn nicamente a nuevas compras."})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsx("h3",{className:"text-[#00d2ff] font-orbitron font-bold text-xs uppercase tracking-widest",children:"5. Procesamiento de Pagos"}),a.jsx("p",{children:"Aceptamos tarjetas, transferencias (USA/MX) y Criptomonedas. Los pagos por transferencia pueden tardar 1 a 24 horas; pagos va crypto o tarjeta usualmente son instantneos."})]}),a.jsxs("section",{className:"space-y-3 border-l-2 border-red-500/50 pl-4 bg-red-500/5 py-2",children:[a.jsx("h3",{className:"text-red-500 font-orbitron font-bold text-xs uppercase tracking-widest",children:"6. Reembolsos"}),a.jsx("p",{children:"Los reembolsos NO estn garantizados. En caso de solicitarlo, la respuesta puede tardar 50 a 90 das y se evala internamente. No se otorgan reembolsos por uso indebido, baneo de cuenta o resultados de IA no deseados."})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsx("h3",{className:"text-[#00d2ff] font-orbitron font-bold text-xs uppercase tracking-widest",children:"7. Merchandising (Productos Fsicos)"}),a.jsx("p",{children:"Tiempo de envo: 30 a 60 das. Reembolsos por mercanca: 80 a 120 das, dependiendo del caso. No se garantiza stock constante ni envos inmediatos."})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsx("h3",{className:"text-[#00d2ff] font-orbitron font-bold text-xs uppercase tracking-widest",children:"8. Cambios en los Trminos"}),a.jsx("p",{children:"adalparedes.com puede modificar estos trminos en cualquier momento. El uso continuo del sitio implica aceptacin automtica."})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsx("h3",{className:"text-[#00d2ff] font-orbitron font-bold text-xs uppercase tracking-widest",children:"9. Limitacin de Responsabilidad"}),a.jsx("p",{children:"El usuario reconoce que los resultados de IA pueden contener errores. adalparedes.com no se hace responsable por prdidas econmicas, daos indirectos o fallas tcnicas de terceros."})]}),a.jsx("section",{className:"space-y-3 bg-white/5 p-4 rounded-xl border border-white/10",children:a.jsx("p",{className:"text-[10px] text-center font-mono uppercase tracking-tighter",children:"Al interactuar con el portal, usted confirma que ha ledo y aceptado estos protocolos de operacin digital."})})]}),a.jsx("div",{className:"p-6 bg-black border-t border-white/5 flex justify-center",children:a.jsx("button",{onClick:e,className:"px-12 py-4 bg-white text-black font-orbitron font-bold text-xs tracking-widest rounded-xl hover:scale-105 transition-all uppercase",children:"Entendido"})})]})}),Yv=({onClose:e})=>a.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-black/90 backdrop-blur-xl animate-in fade-in duration-300",children:a.jsxs("div",{className:"relative w-full max-w-2xl bg-[#050505] border border-white/10 rounded-3xl shadow-[0_0_80px_rgba(255,255,255,0.05)] overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in duration-300",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#00d2ff] to-transparent"}),a.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center bg-white/5",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-sm font-orbitron font-bold text-white tracking-widest uppercase",children:"Polticas de Privacidad"}),a.jsx("p",{className:"text-[9px] font-mono text-[#00d2ff] uppercase tracking-tighter mt-1",children:"adalparedes.com  Protocolo de Datos v3.0"})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-white transition-colors",children:a.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 font-sans text-sm text-gray-300 space-y-6 custom-scrollbar leading-relaxed",children:[a.jsxs("div",{className:"bg-[#00d2ff]/5 border border-[#00d2ff]/20 p-4 rounded-xl flex items-center gap-4",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsxs("p",{className:"text-[10px] font-mono text-white uppercase tracking-wider leading-tight",children:["ltima actualizacin: Enero 2026",a.jsx("br",{}),a.jsx("span",{className:"text-[#00d2ff]",children:"Contacto oficial: contacto@adalparedes.com"})]})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-white font-orbitron font-bold text-xs uppercase tracking-widest flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-[#00d2ff] rounded-full"})," 1. Informacin que recopilamos"]}),a.jsx("p",{className:"text-gray-400",children:"Podemos solicitar o recopilar:"}),a.jsxs("ul",{className:"grid grid-cols-2 gap-2 text-[11px] font-mono text-gray-300 ml-4",children:[a.jsx("li",{children:" Nombre"}),a.jsx("li",{children:" Correo electrnico"}),a.jsx("li",{children:" Telfono (opcional)"}),a.jsx("li",{children:" Pas o zona aproximada"}),a.jsx("li",{children:" Historial bsico de uso"}),a.jsx("li",{children:" Datos de transacciones"})]}),a.jsx("p",{className:"text-xs italic bg-white/5 p-2 rounded",children:"Nota: No recopilamos domicilio fsico del usuario."})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-white font-orbitron font-bold text-xs uppercase tracking-widest flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-[#00d2ff] rounded-full"})," 2. Cmo usamos la informacin"]}),a.jsx("p",{className:"text-gray-400",children:"Utilizamos los datos exclusivamente para:"}),a.jsxs("ul",{className:"space-y-1 text-gray-400 list-disc ml-6",children:[a.jsx("li",{children:"Administrar cuentas de usuario."}),a.jsx("li",{children:"Procesar pagos o recargas."}),a.jsx("li",{children:"Verificar identidad cuando sea necesario."}),a.jsx("li",{children:"Mejorar la app y experiencia del usuario."}),a.jsx("li",{children:"Prevenir abusos, spam o actividades sospechosas."})]}),a.jsx("p",{className:"text-[#00ff88] font-bold text-[10px] uppercase tracking-widest",children:"No vendemos datos a terceros bajo ningn concepto."})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-white font-orbitron font-bold text-xs uppercase tracking-widest flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-[#00d2ff] rounded-full"})," 3. Almacenamiento y seguridad"]}),a.jsx("p",{className:"text-gray-400",children:"Los datos se almacenan con medidas razonables de seguridad digital (encriptacin SHA-256). Sin embargo, el usuario reconoce que no existe la seguridad absoluta en entornos digitales contra incidentes de terceros."})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-white font-orbitron font-bold text-xs uppercase tracking-widest flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-[#00d2ff] rounded-full"})," 4. Terceros y proveedores"]}),a.jsx("p",{className:"text-gray-400",children:"Podemos usar servicios externos como: Procesadores de pago (Stripe/NOWPayments), Plataformas de IA (Google/OpenAI), Proveedores de hosting y Herramientas analticas. Cada proveedor maneja su propia poltica de privacidad."})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-white font-orbitron font-bold text-xs uppercase tracking-widest flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-[#00d2ff] rounded-full"})," 5. Correos y notificaciones"]}),a.jsxs("p",{className:"text-gray-400",children:["El usuario acepta recibir correos de verificacin, confirmaciones de pago y avisos importantes de la cuenta. ",a.jsx("span",{className:"text-white",children:"No enviamos spam ni publicidad invasiva."})]})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-white font-orbitron font-bold text-xs uppercase tracking-widest flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-[#00d2ff] rounded-full"})," 6. Conservacin de datos"]}),a.jsx("p",{className:"text-gray-400",children:"Podemos conservar informacin incluso despus de cerrar una cuenta para cumplir con obligaciones legales, prevenir fraudes o resolver disputas tcnicas."})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-white font-orbitron font-bold text-xs uppercase tracking-widest flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-[#00d2ff] rounded-full"})," 7. Cambios en estas Polticas"]}),a.jsx("p",{className:"text-gray-400",children:"Estas polticas pueden actualizarse en cualquier momento. El uso continuo de los servicios de Adal Paredes implica la aceptacin automtica de las actualizaciones."})]})]}),a.jsx("div",{className:"p-6 bg-black border-t border-white/5 flex justify-center",children:a.jsx("button",{onClick:e,className:"px-12 py-4 bg-[#00d2ff] text-black font-orbitron font-bold text-xs tracking-widest rounded-xl hover:scale-105 transition-all uppercase",children:"Confirmar Lectura"})})]})});class Qv extends gc.Component{constructor(){super(...arguments);Sl(this,"state",{hasError:!1})}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,n){console.error("[CRITICAL_UI_ERROR]",r,n)}render(){return this.state.hasError?a.jsxs("div",{className:"fixed inset-0 w-screen h-screen flex flex-col items-center justify-center bg-black text-white font-mono p-6 text-center z-[10000]",children:[a.jsx("div",{className:"absolute inset-0 bg-red-950/20 opacity-30"}),a.jsxs("div",{className:"relative border border-red-500/30 bg-black/80 backdrop-blur-md p-10 rounded-2xl max-w-lg",children:[a.jsx("div",{className:"text-5xl mb-6 animate-pulse",children:""}),a.jsx("h1",{className:"text-2xl font-orbitron text-red-500 mb-4 uppercase tracking-widest",children:"Error Crtico del Ncleo"}),a.jsx("p",{className:"text-gray-400 mb-8 leading-relaxed",children:"Ha ocurrido un fallo inesperado en la interfaz del sistema. Por favor, refresca la pgina para reiniciar el protocolo de comunicacin. Si el problema persiste, contacta a soporte."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-10 py-4 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700 transition-colors uppercase font-orbitron tracking-wider",children:"Reiniciar Interfaz"})]})]}):this.props.children}}var de=(e=>(e.LOADING="LOADING",e.PUZZLE="PUZZLE",e.GRANTED="GRANTED",e.AUTH="AUTH",e.DASHBOARD="DASHBOARD",e))(de||{});const Xv=()=>{var _,v,m;const{user:e,isLoading:t,session:r}=an(),[n,s]=b.useState(de.LOADING),[i,o]=b.useState(!1),[l,u]=b.useState(!1),[c,d]=b.useState(!1);b.useEffect(()=>{!t&&r&&n===de.AUTH&&s(de.DASHBOARD)},[r,t,n]);const p=()=>{const g=localStorage.getItem("ap_human_verified")==="true";s(r&&g?de.DASHBOARD:de.PUZZLE)},h=()=>{localStorage.setItem("ap_human_verified","true"),s(de.GRANTED)},f=()=>{s(r?de.DASHBOARD:de.AUTH)},y=b.useCallback(()=>{localStorage.removeItem("ap_human_verified"),s(de.PUZZLE)},[]),w=n===de.DASHBOARD&&r!==null;return a.jsxs("div",{className:`relative min-h-screen w-full bg-[#050505] text-white flex flex-col ${w?"overflow-hidden":"overflow-y-auto"}`,children:[a.jsx(Kv,{}),a.jsx("div",{className:"fixed inset-0 opacity-10 z-0 pointer-events-none",style:{backgroundImage:"linear-gradient(#00d2ff 1px, transparent 1px), linear-gradient(90deg, #00d2ff 1px, transparent 1px)",backgroundSize:"40px 40px"}}),n!==de.LOADING&&!w&&a.jsx(km,{}),a.jsxs("main",{className:`relative z-20 w-full flex-1 flex flex-col items-center ${w?"h-full":"pt-24 pb-32"}`,children:[n===de.LOADING&&a.jsx(Sm,{onComplete:p,duration:2e3}),n===de.PUZZLE&&a.jsxs("div",{className:"w-full flex flex-col items-center animate-in fade-in zoom-in duration-700",children:[a.jsx(Em,{onSolved:h}),a.jsx(ic,{})]}),n===de.GRANTED&&a.jsxs("div",{className:"w-full flex flex-col items-center animate-in fade-in duration-700",children:[a.jsx(iv,{onEnter:f}),a.jsx(ic,{})]}),n===de.AUTH&&a.jsx(ov,{onAuthSuccess:()=>s(de.DASHBOARD)}),w&&a.jsx("div",{className:"w-full h-full animate-in fade-in duration-500",children:a.jsx(Hv,{user:e||{fullName:"",email:((_=r==null?void 0:r.user)==null?void 0:_.email)||"",username:((m=(v=r==null?void 0:r.user)==null?void 0:v.email)==null?void 0:m.split("@")[0])||"User",gender:"other",ageRange:"unknown",membership:"FREE",balance:0},onLogout:y})})]}),i&&a.jsx(Gv,{onClose:()=>o(!1)}),l&&a.jsx(Jv,{onClose:()=>u(!1)}),c&&a.jsx(Yv,{onClose:()=>d(!1)}),n!==de.LOADING&&!w&&a.jsxs("footer",{className:"relative z-40 w-full py-6 bg-black/60 backdrop-blur-md flex flex-wrap justify-center items-center gap-x-6 text-[10px] text-[#00d2ff] opacity-60 font-mono tracking-widest border-t border-white/5 uppercase",children:[a.jsxs("span",{children:[" ",new Date().getFullYear()," ADAL PAREDES"]}),a.jsx("button",{onClick:()=>u(!0),className:"hover:text-white transition-colors",children:"TRMINOS"}),a.jsx("button",{onClick:()=>d(!0),className:"hover:text-white transition-colors",children:"PRIVACIDAD"}),a.jsx("button",{onClick:()=>o(!0),className:"text-[#00ff88] hover:text-[#00d2ff] font-bold",children:"CONTACTO"})]})]})},Zv=()=>a.jsx(Qv,{children:a.jsx(sv,{children:a.jsx(yv,{children:a.jsx(Xv,{})})})}),Mh=document.getElementById("root");if(!Mh)throw new Error("Could not find root element to mount to");const ey=Eo.createRoot(Mh);ey.render(a.jsx(gc.StrictMode,{children:a.jsx(Zv,{})}));export{ns as E,gc as R,wv as a,Dh as b,a as j,b as r,ne as s,an as u};
